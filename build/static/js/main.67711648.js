/*! For license information please see main.67711648.js.LICENSE.txt */
!function(){var e={4569:function(e,t,n){e.exports=n(8036)},3381:function(e,t,n){"use strict";var r=n(3589),i=n(7297),a=n(9301),o=n(9774),u=n(1804),s=n(9145),c=n(5411),l=n(6789),f=n(4531),h=n(6569),d=n(6261);e.exports=function(e){return new Promise((function(t,n){var p,v=e.data,y=e.headers,m=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(v)&&r.isStandardBrowserEnv()&&delete y["Content-Type"];var k=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";y.Authorization="Basic "+btoa(b+":"+w)}var x=u(e.baseURL,e.url);function _(){if(k){var r="getAllResponseHeaders"in k?s(k.getAllResponseHeaders()):null,a={data:m&&"text"!==m&&"json"!==m?k.response:k.responseText,status:k.status,statusText:k.statusText,headers:r,config:e,request:k};i((function(e){t(e),g()}),(function(e){n(e),g()}),a),k=null}}if(k.open(e.method.toUpperCase(),o(x,e.params,e.paramsSerializer),!0),k.timeout=e.timeout,"onloadend"in k?k.onloadend=_:k.onreadystatechange=function(){k&&4===k.readyState&&(0!==k.status||k.responseURL&&0===k.responseURL.indexOf("file:"))&&setTimeout(_)},k.onabort=function(){k&&(n(new f("Request aborted",f.ECONNABORTED,e,k)),k=null)},k.onerror=function(){n(new f("Network Error",f.ERR_NETWORK,e,k,k)),k=null},k.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||l;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new f(t,r.clarifyTimeoutError?f.ETIMEDOUT:f.ECONNABORTED,e,k)),k=null},r.isStandardBrowserEnv()){var S=(e.withCredentials||c(x))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;S&&(y[e.xsrfHeaderName]=S)}"setRequestHeader"in k&&r.forEach(y,(function(e,t){"undefined"===typeof v&&"content-type"===t.toLowerCase()?delete y[t]:k.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(k.withCredentials=!!e.withCredentials),m&&"json"!==m&&(k.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&k.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&k.upload&&k.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){k&&(n(!e||e&&e.type?new h:e),k.abort(),k=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),v||(v=null);var I=d(x);I&&-1===["http","https","file"].indexOf(I)?n(new f("Unsupported protocol "+I+":",f.ERR_BAD_REQUEST,e)):k.send(v)}))}},8036:function(e,t,n){"use strict";var r=n(3589),i=n(4049),a=n(3773),o=n(777);var u=function e(t){var n=new a(t),u=i(a.prototype.request,n);return r.extend(u,a.prototype,n),r.extend(u,n),u.create=function(n){return e(o(t,n))},u}(n(1709));u.Axios=a,u.CanceledError=n(6569),u.CancelToken=n(6857),u.isCancel=n(5517),u.VERSION=n(7600).version,u.toFormData=n(1397),u.AxiosError=n(4531),u.Cancel=u.CanceledError,u.all=function(e){return Promise.all(e)},u.spread=n(8089),u.isAxiosError=n(9580),e.exports=u,e.exports.default=u},6857:function(e,t,n){"use strict";var r=n(6569);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},6569:function(e,t,n){"use strict";var r=n(4531);function i(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(3589).inherits(i,r,{__CANCEL__:!0}),e.exports=i},5517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:function(e,t,n){"use strict";var r=n(3589),i=n(9774),a=n(7470),o=n(2733),u=n(777),s=n(1804),c=n(7835),l=c.validators;function f(e){this.defaults=e,this.interceptors={request:new a,response:new a}}f.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=u(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var a,s=[];if(this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)})),!i){var f=[o,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(s),a=Promise.resolve(t);f.length;)a=a.then(f.shift(),f.shift());return a}for(var h=t;r.length;){var d=r.shift(),p=r.shift();try{h=d(h)}catch(v){p(v);break}}try{a=o(h)}catch(v){return Promise.reject(v)}for(;s.length;)a=a.then(s.shift(),s.shift());return a},f.prototype.getUri=function(e){e=u(this.defaults,e);var t=s(e.baseURL,e.url);return i(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){f.prototype[e]=function(t,n){return this.request(u(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(u(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}f.prototype[e]=t(),f.prototype[e+"Form"]=t(!0)})),e.exports=f},4531:function(e,t,n){"use strict";var r=n(3589);function i(e,t,n,r,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var a=i.prototype,o={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){o[e]={value:e}})),Object.defineProperties(i,o),Object.defineProperty(a,"isAxiosError",{value:!0}),i.from=function(e,t,n,o,u,s){var c=Object.create(a);return r.toFlatObject(e,c,(function(e){return e!==Error.prototype})),i.call(c,e.message,t,n,o,u),c.name=e.name,s&&Object.assign(c,s),c},e.exports=i},7470:function(e,t,n){"use strict";var r=n(3589);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},1804:function(e,t,n){"use strict";var r=n(4044),i=n(9549);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},2733:function(e,t,n){"use strict";var r=n(3589),i=n(2693),a=n(5517),o=n(1709),u=n(6569);function s(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new u}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return s(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(s(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},777:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function u(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function s(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:s};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||a,i=t(e);r.isUndefined(i)&&t!==s||(n[e]=i)})),n}},7297:function(e,t,n){"use strict";var r=n(4531);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},2693:function(e,t,n){"use strict";var r=n(3589),i=n(1709);e.exports=function(e,t,n){var a=this||i;return r.forEach(n,(function(n){e=n.call(a,e,t)})),e}},1709:function(e,t,n){"use strict";var r=n(3589),i=n(4341),a=n(4531),o=n(6789),u=n(1397),s={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:o,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){if(i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,a=r.isObject(e),o=t&&t["Content-Type"];if((n=r.isFileList(e))||a&&"multipart/form-data"===o){var s=this.env&&this.env.FormData;return u(n?{"files[]":e}:e,s&&new s)}return a||"application/json"===o?(c(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(u){if(o){if("SyntaxError"===u.name)throw a.from(u,a.ERR_BAD_RESPONSE,this,null,this.response);throw u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(3035)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(s)})),e.exports=l},6789:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7600:function(e){e.exports={version:"0.27.2"}},4049:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},9774:function(e,t,n){"use strict";var r=n(3589);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),a=o.join("&")}if(a){var u=e.indexOf("#");-1!==u&&(e=e.slice(0,u)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},9549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,a,o){var u=[];u.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),r.isString(i)&&u.push("path="+i),r.isString(a)&&u.push("domain="+a),!0===o&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},9580:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},5411:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},3035:function(e){e.exports=null},9145:function(e,t,n){"use strict";var r=n(3589),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,o={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},6261:function(e){"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8089:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},1397:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||new FormData;var n=[];function i(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(a,o){if(r.isPlainObject(a)||r.isArray(a)){if(-1!==n.indexOf(a))throw Error("Circular reference detected in "+o);n.push(a),r.forEach(a,(function(n,a){if(!r.isUndefined(n)){var u,s=o?o+"."+a:a;if(n&&!o&&"object"===typeof n)if(r.endsWith(a,"{}"))n=JSON.stringify(n);else if(r.endsWith(a,"[]")&&(u=r.toArray(n)))return void u.forEach((function(e){!r.isUndefined(e)&&t.append(s,i(e))}));e(n,s)}})),n.pop()}else t.append(o,i(a))}(e),t}},7835:function(e,t,n){"use strict";var r=n(7600).version,i=n(4531),a={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){a[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};a.transitional=function(e,t,n){function a(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,u){if(!1===e)throw new i(a(r," has been removed"+(t?" in "+t:"")),i.ERR_DEPRECATED);return t&&!o[r]&&(o[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,u)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),a=r.length;a-- >0;){var o=r[a],u=t[o];if(u){var s=e[o],c=void 0===s||u(s,o,e);if(!0!==c)throw new i("option "+o+" must be "+c,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+o,i.ERR_BAD_OPTION)}},validators:a}},3589:function(e,t,n){"use strict";var r,i=n(4049),a=Object.prototype.toString,o=(r=Object.create(null),function(e){var t=a.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function u(e){return e=e.toLowerCase(),function(t){return o(t)===e}}function s(e){return Array.isArray(e)}function c(e){return"undefined"===typeof e}var l=u("ArrayBuffer");function f(e){return null!==e&&"object"===typeof e}function h(e){if("object"!==o(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var d=u("Date"),p=u("File"),v=u("Blob"),y=u("FileList");function m(e){return"[object Function]"===a.call(e)}var g=u("URLSearchParams");function k(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var b,w=(b="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return b&&e instanceof b});e.exports={isArray:s,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!c(e)&&null!==e.constructor&&!c(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||a.call(e)===t||m(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:f,isPlainObject:h,isUndefined:c,isDate:d,isFile:p,isBlob:v,isFunction:m,isStream:function(e){return f(e)&&m(e.pipe)},isURLSearchParams:g,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:k,merge:function e(){var t={};function n(n,r){h(t[r])&&h(n)?t[r]=e(t[r],n):h(n)?t[r]=e({},n):s(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)k(arguments[r],n);return t},extend:function(e,t,n){return k(t,(function(t,r){e[r]=n&&"function"===typeof t?i(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,i,a,o={};t=t||{};do{for(i=(r=Object.getOwnPropertyNames(e)).length;i-- >0;)o[a=r[i]]||(t[a]=e[a],o[a]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:o,kindOfTest:u,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(c(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:w,isFileList:y}},2110:function(e,t,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},8309:function(e,t,n){"use strict";e.exports=n(746)},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case I:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Se=null;function Ie(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ee(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Te(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Se)&&(Ne(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Je=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,St,It,Et=!1,Tt=[],Ct=null,Nt=null,At=null,Dt=new Map,Ot=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Et=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Dt.forEach(jt),Ot.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Dt.forEach(t),Ot.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function In(){return Sn}var En=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Dn),Pn=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Rn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){Ur(e,0)}function $n(e){if(H(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&$n(Hn)){var t=[];Gn(t,Hn,e,we(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Hn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Sr={};function Ir(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return _r[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Nr=Ir("transitionend"),Ar=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ar.set(e,t),s(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Rr=Dr[Pr];Or(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Or(Er,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Er:case Tr:case Cr:s=mn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=On;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Oe(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Jn;else if(Kn(u))if(Yn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Rn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,zn=!0)),0<(m=Wr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Zt=Xt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Oe(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Oe(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Si(e){return{current:e}}function Ii(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ei(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Si(Ti),Ni=Si(!1),Ai=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ii(Ni),Ii(Ci)}function Ri(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(Ci),Ei(Ci,e)):Ii(Ni),Ei(Ni,n)}var Ui=null,ji=!1,Vi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,zi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Ki=0,Gi=null,Wi=0,Hi=[],Qi=0,$i=null,Ji=1,Yi="";function Xi(e,t){qi[Ki++]=Wi,qi[Ki++]=Gi,Gi=e,Wi=t}function Zi(e,t,n){Hi[Qi++]=Ji,Hi[Qi++]=Yi,Hi[Qi++]=$i,$i=e;var r=Ji;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else Ji=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Wi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Hi[--Qi],Hi[Qi]=null,Yi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Ji,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Si(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ma.current;Ii(ma),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ra(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ra(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(i=Oi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ia(a):(a=Oi(t)?Ai:Ci.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Xi(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Rc(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case O:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ja=$a(!0),Ya=$a(!1),Xa={},Za=Si(Xa),eo=Si(Xa),to=Si(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Za),Ei(Za,t)}function io(){Ii(Za),Ii(eo),Ii(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Ii(Za),Ii(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Io(){var e=0!==bo;return bo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Oo(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,jo(9,Ro.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Wo(e,t){return zo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ho.bind(null,t,e),n)}function $o(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ia,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ia,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Uo,useDebugValue:$o,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Ns.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ia,useCallback:Jo,useContext:Ia,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Yo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(To(),yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ia,useCallback:Jo,useContext:Ia,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Yo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Ra(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ya(t,null,n,r):Ja(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Io(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Iu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ps,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ps,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Ps,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Ps,Os),Os|=r;return wu(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Oi(n)?Ai:Ci.current;return a=Di(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Io(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Oi(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)qu(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Di(t,c=Oi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Aa||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ia(s):s=Di(t,s=Oi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ou,Pu,Ru,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),ju(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=Ji,Hi[Qi++]=Yi,Hi[Qi++]=$i,Ji=e.id,Yi=e.overflow,$i=t),(t=Uu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Pc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Pc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&pa(r),Ja(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Oi(t.type)&&Pi(),Wu(t),null;case 3:return r=t.stateNode,io(),Ii(Ni),Ii(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":J(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ou(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":J(e,r),i=$(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Ru(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Ii(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Rs&&(Rs=3):vc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Wu(t),null;case 10:return xa(t.type._context),Wu(t),null;case 19:if(Ii(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Rs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>zs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Ye()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=uo.current,Ei(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ii(Ni),Ii(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ii(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ou=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ru=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Ju=!1,Yu="function"===typeof WeakSet?WeakSet:Set,Xu=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ju||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Ju&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Ju&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Ju=(r=Ju)||null!==n.memoizedState,hs(e,t,n),Ju=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yu),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Sc(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Sc(e,e.return,y)}}break;case 1:vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Sc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&Y(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Sc(e,e.return,y)}}break;case 6:if(vs(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Sc(e,e.return,y)}}break;case 3:if(vs(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(y){Sc(e,e.return,y)}break;case 4:default:vs(t,e),ms(e);break;case 13:vs(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Ye())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ju=(l=Ju)||f,vs(t,e),Ju=l):vs(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Xu=e,f=e.child;null!==f;){for(h=Xu=f;null!==Xu;){switch(p=(d=Xu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Sc(r,n,y)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Xu=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Sc(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Sc(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ms(e),4&r&&ps(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Xu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var i=Xu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ju;u=$u;var c=Ju;if($u=o,(Ju=s)&&!c)for(Xu=i;null!==Xu;)s=(o=Xu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Xu=s):xs(i);for(;null!==a;)Xu=a,ks(a,t,n),a=a.sibling;Xu=i,$u=u,Ju=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xu=a):bs(e)}}function bs(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ju||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ju)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Ju||512&t.flags&&is(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function ws(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function xs(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{is(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var _s,Ss=Math.ceil,Is=b.ReactCurrentDispatcher,Es=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Ds=0,Os=0,Ps=Si(0),Rs=0,Ls=null,Ms=0,Fs=0,Us=0,js=null,Vs=null,Bs=0,zs=1/0,qs=null,Ks=!1,Gs=null,Ws=null,Hs=!1,Qs=null,$s=0,Js=0,Ys=null,Xs=-1,Zs=0;function ec(){return 0!==(6&Cs)?Ye():-1!==Xs?Xs:Xs=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ds?Ds&-Ds:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Js)throw Js=0,Ys=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Rs&&uc(e,Ds)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(zs=Ye()+500,ji&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Ds:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xs=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Ds:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Ds===t||(qs=null,zs=Ye()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Is.current=o,Cs=i,null!==As?t=0:(Ns=null,Ds=0,t=Rs)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Ye()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Vs,qs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bs+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vs,qs),t);break}wc(e,Vs,qs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vs,qs),r);break}wc(e,Vs,qs);break;default:throw Error(a(329))}}}return rc(e,Ye()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Vs,Vs=n,null!==t&&oc(t)),e}function oc(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vs,qs),rc(e,Ye()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(zs=Ye()+500,ji&&zi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&xc();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&zi()}}function fc(){Os=Ps.current,Ii(Ps)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ii(Ni),Ii(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ii(uo);break;case 10:xa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,As=e=Pc(e.current,null),Ds=Os=t,Rs=0,Ls=null,Us=Fs=Ms=0,Vs=js=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function dc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Es.current=null,null===n||null===n.return){Rs=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ds,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Rs&&(Rs=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Is.current;return Is.current=ou,null===e?ou:e}function vc(){0!==Rs&&3!==Rs&&2!==Rs||(Rs=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,Ds)}function yc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Ds===t||(qs=null,hc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Is.current=r,null!==As)throw Error(a(261));return Ns=null,Ds=0,Rs}function mc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!$e();)kc(As)}function kc(e){var t=_s(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?bc(e):As=t,Es.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hu(n,t,Os)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Rs=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Rs&&(Rs=5)}function wc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Ds=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Es.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}v=ts,ts=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Je(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Hs&&(Hs=!1,Qs=e,$s=i),0===(o=e.pendingLanes)&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&$s)&&0!==e.tag&&xc(),0!==(1&(o=e.pendingLanes))?e===Ys?Js++:(Js=0,Ys=e):Js=0,zi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=bt($s),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,$s=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Xu=e.current;null!==Xu;){var o=Xu,u=o.child;if(0!==(16&Xu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var f=Xu;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Xu=h;else for(;null!==Xu;){var d=(f=Xu).sibling,p=f.return;if(as(f),f===l){Xu=null;break}if(null!==d){d.return=p,Xu=d;break}Xu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Xu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(o=Xu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xu=g;break e}Xu=o.return}}var k=e.current;for(Xu=k;null!==Xu;){var b=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Xu=b;else e:for(u=k;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){Sc(s,s.return,x)}if(s===u){Xu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Xu=w;break e}Xu=s.return}}if(Cs=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function _c(e,t,n){e=Ra(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Ra(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Ds&n)===n&&(4===Rs||3===Rs&&(130023424&Ds)===Ds&&500>Ye()-Bs?hc(e,0):Us|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(mt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Nc(e,t){return He(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Ac(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Lc(n.children,i,o,t);case S:u=8,i|=8;break;case I:return(e=Dc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case N:return(e=Dc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Dc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case C:u=11;break e;case D:u=14;break e;case O:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Pa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Ra(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Kc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ra(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}_s=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ei(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ei(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Iu(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qu(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ia(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),_u(e,t,r,i=ya(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),qu(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),qa(t,r,i),Ga(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Iu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Jc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Jc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Kc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Ye()),0===(6&Cs)&&(zs=Ye()+500,zi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},St=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ee,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.s=r.createRoot,r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},8459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},6900:function(e,t,n){"use strict";n(8459)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},P={transition:null},R={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,P(x);else{var t=r(l);null!==t&&R(w,t.startTime-e)}}function x(e,n){v=!1,y&&(y=!1,g(E),E=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&R(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,I=null,E=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?_():(S=!1,I=null)}}else S=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,O=D.port2;D.port1.onmessage=A,_=function(){O.postMessage(null)}}else _=function(){m(A,0)};function P(e){I=e,S||(S=!0,_())}function R(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(E),E=-1):y=!0,R(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},1561:function(e,t,n){"use strict";var r=n(2791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},7595:function(e,t,n){"use strict";var r=n(2791),i=n(7248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},7248:function(e,t,n){"use strict";e.exports=n(1561)},327:function(e,t,n){"use strict";e.exports=n(7595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".f94dd40c.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="netflix-build-youtube1:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunknetflix_build_youtube1=self.webpackChunknetflix_build_youtube1||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Kn},SDK_VERSION:function(){return Zr},_DEFAULT_ENTRY_NAME:function(){return Vr},_addComponent:function(){return Kr},_addOrOverwriteComponent:function(){return Gr},_apps:function(){return zr},_clearComponents:function(){return $r},_components:function(){return qr},_getProvider:function(){return Hr},_registerComponent:function(){return Wr},_removeServiceInstance:function(){return Qr},deleteApp:function(){return ri},getApp:function(){return ti},getApps:function(){return ni},initializeApp:function(){return ei},onLog:function(){return oi},registerVersion:function(){return ai},setLogLevel:function(){return ui}});var t=n(2791),r=n(1250),i=n(7248),a=n(327),o=n(4164);var u=function(e){e()},s=function(){return u},c=t.createContext(null);function l(){return(0,t.useContext)(c)}var f=function(){throw new Error("uSES not initialized!")},h=f,d=function(e,t){return e===t};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=e===c?l:function(){return(0,t.useContext)(e)};return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;var i=n(),a=i.store,o=i.subscription,u=i.getServerState,s=h(o.addNestedSub,a.getState,u||a.getState,e,r);return(0,t.useDebugValue)(s),s}}var v=p();n(2110),n(6900);var y={notify:function(){},get:function(){return[]}};function m(e,t){var n,r=y;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=s(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=y)},getListeners:function(){return r}};return o}var g=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var k=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=(0,t.useMemo)((function(){var e=m(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),u=(0,t.useMemo)((function(){return n.getState()}),[n]);g((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=r||c;return t.createElement(s.Provider,{value:o},i)};function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=e===c?l:function(){return(0,t.useContext)(e)};return function(){return n().store}}var w=b();function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=e===c?w:b(e);return function(){return t().dispatch}}var _,S=x();function I(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function E(e){return!!e&&!!e[ve]}function T(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===ye}(e)||Array.isArray(e)||!!e[pe]||!!e.constructor[pe]||R(e)||L(e))}function C(e,t,n){void 0===n&&(n=!1),0===N(e)?(n?Object.keys:me)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function N(e){var t=e[ve];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:R(e)?2:L(e)?3:0}function A(e,t){return 2===N(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function D(e,t){return 2===N(e)?e.get(t):e[t]}function O(e,t,n){var r=N(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function P(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function R(e){return le&&e instanceof Map}function L(e){return fe&&e instanceof Set}function M(e){return e.o||e.t}function F(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ge(e);delete t[ve];for(var n=me(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function U(e,t){return void 0===t&&(t=!1),V(e)||E(e)||!T(e)||(N(e)>1&&(e.set=e.add=e.clear=e.delete=j),Object.freeze(e),t&&C(e,(function(e,t){return U(t,!0)}),!0)),e}function j(){I(2)}function V(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function B(e){var t=ke[e];return t||I(18,e),t}function z(e,t){ke[e]||(ke[e]=t)}function q(){return se}function K(e,t){t&&(B("Patches"),e.u=[],e.s=[],e.v=t)}function G(e){W(e),e.p.forEach(Q),e.p=null}function W(e){e===se&&(se=e.l)}function H(e){return se={p:[],l:se,h:e,m:!0,_:0}}function Q(e){var t=e[ve];0===t.i||1===t.i?t.j():t.O=!0}function $(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||B("ES5").S(t,e,r),r?(n[ve].P&&(G(t),I(4)),T(e)&&(e=J(t,e),t.l||X(t,e)),t.u&&B("Patches").M(n[ve].t,e,t.u,t.s)):e=J(t,n,[]),G(t),t.u&&t.v(t.u,t.s),e!==de?e:void 0}function J(e,t,n){if(V(t))return t;var r=t[ve];if(!r)return C(t,(function(i,a){return Y(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return X(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=F(r.k):r.o;C(3===r.i?new Set(i):i,(function(t,a){return Y(e,r,i,t,a,n)})),X(e,i,!1),n&&e.u&&B("Patches").R(r,n,e.u,e.s)}return r.o}function Y(e,t,n,r,i,a){if(E(i)){var o=J(e,i,a&&t&&3!==t.i&&!A(t.D,r)?a.concat(r):void 0);if(O(n,r,o),!E(o))return;e.m=!1}if(T(i)&&!V(i)){if(!e.h.F&&e._<1)return;J(e,i),t&&t.A.l||X(e,i)}}function X(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&U(t,n)}function Z(e,t){var n=e[ve];return(n?M(n):e)[t]}function ee(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function te(e){e.P||(e.P=!0,e.l&&te(e.l))}function ne(e){e.o||(e.o=F(e.t))}function re(e,t,n){var r=R(t)?B("MapSet").N(t,n):L(t)?B("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:q(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=be;n&&(i=[r],a=we);var o=Proxy.revocable(i,a),u=o.revoke,s=o.proxy;return r.k=s,r.j=u,s}(t,n):B("ES5").J(t,n);return(n?n.A:q()).p.push(r),r}function ie(e){return E(e)||I(22,e),function e(t){if(!T(t))return t;var n,r=t[ve],i=N(t);if(r){if(!r.P&&(r.i<4||!B("ES5").K(r)))return r.t;r.I=!0,n=ae(t,i),r.I=!1}else n=ae(t,i);return C(n,(function(t,i){r&&D(r.t,t)===i||O(n,t,e(i))})),3===i?new Set(n):n}(e)}function ae(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return F(e)}function oe(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[ve];return be.get(t,e)},set:function(t){var n=this[ve];be.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][ve];if(!i.P)switch(i.i){case 5:r(i)&&te(i);break;case 4:n(i)&&te(i)}}}function n(e){for(var t=e.t,n=e.k,r=me(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==ve){var o=t[a];if(void 0===o&&!A(t,a))return!0;var u=n[a],s=u&&u[ve];if(s?s.t!==o:!P(u,o))return!0}}var c=!!t[ve];return r.length!==me(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};z("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=ge(n);delete a[ve];for(var o=me(a),u=0;u<o.length;u++){var s=o[u];a[s]=e(s,t||!!a[s].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:q(),P:!1,I:!1,D:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,ve,{value:a,writable:!0}),i},S:function(e,n,i){i?E(n)&&n[ve].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[ve];if(n){var i=n.t,a=n.k,o=n.D,u=n.i;if(4===u)C(a,(function(t){t!==ve&&(void 0!==i[t]||A(i,t)?o[t]||e(a[t]):(o[t]=!0,te(n)))})),C(i,(function(e){void 0!==a[e]||A(a,e)||(o[e]=!1,te(n))}));else if(5===u){if(r(n)&&(te(n),o.length=!0),a.length<i.length)for(var s=a.length;s<i.length;s++)o[s]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}!function(e){h=e}(a.useSyncExternalStoreWithSelector),function(e){e}(i.useSyncExternalStore),_=o.unstable_batchedUpdates,u=_;var ue,se,ce="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),le="undefined"!=typeof Map,fe="undefined"!=typeof Set,he="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,de=ce?Symbol.for("immer-nothing"):((ue={})["immer-nothing"]=!0,ue),pe=ce?Symbol.for("immer-draftable"):"__$immer_draftable",ve=ce?Symbol.for("immer-state"):"__$immer_state",ye=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),me="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ge=Object.getOwnPropertyDescriptors||function(e){var t={};return me(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},ke={},be={get:function(e,t){if(t===ve)return e;var n=M(e);if(!A(n,t))return function(e,t,n){var r,i=ee(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!T(r)?r:r===Z(e.t,t)?(ne(e),e.o[t]=re(e.A.h,r,e)):r},has:function(e,t){return t in M(e)},ownKeys:function(e){return Reflect.ownKeys(M(e))},set:function(e,t,n){var r=ee(M(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Z(M(e),t),a=null==i?void 0:i[ve];if(a&&a.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(P(n,i)&&(void 0!==n||A(e.t,t)))return!0;ne(e),te(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Z(e.t,t)||t in e.t?(e.D[t]=!1,ne(e),te(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=M(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){I(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){I(12)}},we={};C(be,(function(e,t){we[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),we.deleteProperty=function(e,t){return we.set.call(this,e,t,void 0)},we.set=function(e,t,n){return be.set.call(this,e[0],t,n,e[0])};var xe=function(){function e(e){var t=this;this.g=he,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&I(6),void 0!==r&&"function"!=typeof r&&I(7),T(e)){var u=H(t),s=re(t,e,void 0),c=!0;try{o=n(s),c=!1}finally{c?G(u):W(u)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return K(u,r),$(e,u)}),(function(e){throw G(u),e})):(K(u,r),$(o,u))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===de&&(o=void 0),t.F&&U(o,!0),r){var l=[],f=[];B("Patches").M(e,o,l,f),r(l,f)}return o}I(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){T(e)||I(8),E(e)&&(e=ie(e));var t=H(this),n=re(this,e,void 0);return n[ve].C=!0,W(t),n},t.finishDraft=function(e,t){var n=(e&&e[ve]).A;return K(n,t),$(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!he&&I(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=B("Patches").$;return E(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),_e=new xe,Se=_e.produce,Ie=(_e.produceWithPatches.bind(_e),_e.setAutoFreeze.bind(_e),_e.setUseProxies.bind(_e),_e.applyPatches.bind(_e),_e.createDraft.bind(_e),_e.finishDraft.bind(_e),Se);function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ae="function"===typeof Symbol&&Symbol.observable||"@@observable",De=function(){return Math.random().toString(36).substring(7).split("").join(".")},Oe={INIT:"@@redux/INIT"+De(),REPLACE:"@@redux/REPLACE"+De(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+De()}};function Pe(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Re(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Ne(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Ne(1));return n(Re)(e,t)}if("function"!==typeof e)throw new Error(Ne(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(Ne(3));return a}function f(e){if("function"!==typeof e)throw new Error(Ne(4));if(s)throw new Error(Ne(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(Ne(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!Pe(e))throw new Error(Ne(7));if("undefined"===typeof e.type)throw new Error(Ne(8));if(s)throw new Error(Ne(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error(Ne(10));i=e,h({type:Oe.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Ne(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[Ae]=function(){return this},e}return h({type:Oe.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[Ae]=p,r}function Le(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Oe.INIT}))throw new Error(Ne(12));if("undefined"===typeof n(void 0,{type:Oe.PROBE_UNKNOWN_ACTION()}))throw new Error(Ne(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(Ne(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Me(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Fe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Ne(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=Me.apply(void 0,a)(n.dispatch),Ce(Ce({},n),{},{dispatch:r})}}}function Ue(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var je=Ue();je.withExtraArgument=Ue;var Ve=je,Be=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ze=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},qe=Object.defineProperty,Ke=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),Ge=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable,He=function(e,t,n){return t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Qe=function(e,t){for(var n in t||(t={}))Ge.call(t,n)&&He(e,n,t[n]);if(Ke)for(var r=0,i=Ke(t);r<i.length;r++){n=i[r];We.call(t,n)&&He(e,n,t[n])}return e},$e="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Me:Me.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Je(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var Ye=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Be(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,ze([void 0],e[0].concat(this)))):new(t.bind.apply(t,ze([void 0],e.concat(this))))},t}(Array);function Xe(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new Ye);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(Ve.withExtraArgument(n.extraArgument)):r.push(Ve));0;return r}(e)}}function Ze(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Qe(Qe({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function et(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}Object.assign;var tt="listenerMiddleware";Ze(tt+"/add"),Ze(tt+"/removeAll"),Ze(tt+"/remove");oe();var nt=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:Ie(e.initialState,(function(){})),i=e.reducers||{},a=Object.keys(i),o={},u={},s={};function c(){var t="function"===typeof e.extraReducers?et(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,s=t[2],c=void 0===s?void 0:s,l=Qe(Qe({},i),u);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?et(t):[t,n,r],o=a[0],u=a[1],s=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return Ie(e(),(function(){}))};else{var c=Ie(e,(function(){}));i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=ze([o[t.type]],u.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[s]),n.reduce((function(e,n){if(n){var r;if(E(e))return"undefined"===typeof(r=n(e,t))?e:r;if(T(e))return Ie(e,(function(e){return n(e,t)}));if("undefined"===typeof(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,l,o,c)}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,u[c]=n,s[e]=r?Ze(c,r):Ze(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:s,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}({name:"user",initialState:{user:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null}}}),rt=nt.actions,it=rt.login,at=rt.logout,ot=function(e){return e.user.user},ut=function(e){var t,n=Xe(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,u=void 0===o?n():o,s=r.devTools,c=void 0===s||s,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!Je(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Le(a)}var p=u;"function"===typeof p&&(p=p(n));var v=Fe.apply(void 0,p),y=Me;c&&(y=$e(Qe({trace:!1},"object"===typeof c&&c)));var m=[v];return Array.isArray(d)?m=ze([v],d):"function"===typeof d&&(m=d(m)),Re(t,f,y.apply(void 0,m))}({reducer:{user:nt.reducer}}),st="https://js.stripe.com/v3",ct=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,lt="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",ft=null,ht=function(e){return null!==ft||(ft=new Promise((function(t,n){if("undefined"!==typeof window)if(window.Stripe&&e&&console.warn(lt),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(st,'"]')),t=0;t<e.length;t++){var n=e[t];if(ct.test(n.src))return n}return null}();r&&e?console.warn(lt):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(st).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(i){return void n(i)}else t(null)}))),ft},dt=function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.32.0",startTime:t})}(r,n),r},pt=Promise.resolve().then((function(){return ht(null)})),vt=!1;pt.catch((function(e){vt||console.warn(e)}));function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function mt(){mt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=b(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(S([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==yt(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function gt(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function kt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){gt(a,r,i,o,u,"next",e)}function u(e){gt(a,r,i,o,u,"throw",e)}o(void 0)}))}}function bt(e){if(Array.isArray(e))return e}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xt(e,t){if(e){if("string"===typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(e,t):void 0}}function _t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function St(e,t){return bt(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||xt(e,t)||_t()}var It="b0d4f35d8cebee8b47a5143255146ca0",Et={fetchTrending:"/trending/all/week?api_key=".concat(It,"&language=en-US"),fetchNetflixOriginals:"/discover/tv?api_key=".concat(It,"&with_networks=213"),fetchTopRated:"/movie/top_rated?api_key=".concat(It,"&language=en-US"),fetchActionMovies:"/discover/movie?api_key=".concat(It,"&with_genres=28"),fetchComedyMovies:"/discover/movie?api_key=".concat(It,"&with_genres=35"),fetchHorrorMovies:"/discover/movie?api_key=".concat(It,"&with_genres=27"),fetchRomanceMovies:"/discover/movie?api_key=".concat(It,"&with_genres=10749"),fetchDocumentaries:"/discover/movie?api_key=".concat(It,"&with_genres=99")},Tt=n(4569),Ct=n.n(Tt)().create({baseURL:"https://api.themoviedb.org/3"}),Nt=n(184);var At,Dt=function(){var e=St((0,t.useState)([]),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){function e(){return(e=kt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct.get(Et.fetchNetflixOriginals);case 2:return t=e.sent,r(t.data.results[Math.floor(Math.random()*t.data.results.length-1)]),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,Nt.jsxs)("header",{className:"banner",style:{backgroundSize:"cover",backgroundImage:'url("https://image.tmdb.org/t/p/original/'.concat(null===n||void 0===n?void 0:n.backdrop_path,'")'),backgroundPosition:"center center"},children:[(0,Nt.jsxs)("div",{className:"banner_contents",children:[(0,Nt.jsx)("h1",{className:"banner_title",children:(null===n||void 0===n?void 0:n.title)||(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n?void 0:n.original_name)}),(0,Nt.jsxs)("div",{className:"banner_buttons",children:[(0,Nt.jsx)("button",{className:"banner_button",children:"Play"}),(0,Nt.jsx)("button",{className:"banner_button",children:"My List"})]}),(0,Nt.jsx)("h1",{className:"banner_description",children:function(e,t){return(null===e||void 0===e?void 0:e.length)>t?e.substr(0,t-1)+"...":e}(null===n||void 0===n?void 0:n.overview,150)})]}),(0,Nt.jsx)("div",{className:"banner--fadeBottom"})]})};function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(At||(At={}));var Pt=function(e){return e};var Rt="beforeunload",Lt="popstate";function Mt(e){e.preventDefault(),e.returnValue=""}function Ft(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function Ut(){return Math.random().toString(36).substr(2,8)}function jt(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function Vt(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var Bt=(0,t.createContext)(null);var zt=(0,t.createContext)(null);var qt=(0,t.createContext)({outlet:null,matches:[]});function Kt(e,t){if(!e)throw new Error(t)}function Gt(e,t,n){void 0===n&&(n="/");var r=Zt(("string"===typeof t?Vt(t):t).pathname||"/",n);if(null==r)return null;var i=Wt(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Jt(i[o],r);return a}function Wt(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||Kt(!1),a.relativePath=a.relativePath.slice(r.length));var o=en([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&Kt(!1),Wt(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:$t(o,e.index),routesMeta:u})})),t}var Ht=/^:\w+$/,Qt=function(e){return"*"===e};function $t(e,t){var n=e.split("/"),r=n.length;return n.some(Qt)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!Qt(e)})).reduce((function(e,t){return e+(Ht.test(t)?3:""===t?1:10)}),r)}function Jt(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=Yt({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:en([i,l.pathname]),pathnameBase:tn(en([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=en([i,l.pathnameBase]))}return a}function Yt(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=St(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function Xt(e,t,n){var r,i="string"===typeof e?Vt(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?Vt(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:nn(a),hash:rn(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function Zt(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var en=function(e){return e.join("/").replace(/\/\/+/g,"/")},tn=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},nn=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},rn=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function an(){return null!=(0,t.useContext)(zt)}function on(){return an()||Kt(!1),(0,t.useContext)(zt).location}function un(){an()||Kt(!1);var e=(0,t.useContext)(Bt),n=e.basename,r=e.navigator,i=(0,t.useContext)(qt).matches,a=on().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=Xt(e,JSON.parse(o),a);"/"!==n&&(i.pathname=en([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}function sn(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(qt.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function cn(e){Kt(!1)}function ln(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?At.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;an()&&Kt(!1);var h=tn(r),d=(0,t.useMemo)((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=Vt(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,b=void 0===k?"":k,w=p.state,x=void 0===w?null:w,_=p.key,S=void 0===_?"default":_,I=(0,t.useMemo)((function(){var e=Zt(y,h);return null==e?null:{pathname:e,search:g,hash:b,state:x,key:S}}),[h,y,g,b,x,S]);return null==I?null:(0,t.createElement)(Bt.Provider,{value:d},(0,t.createElement)(zt.Provider,{children:a,value:{location:I,navigationType:s}}))}function fn(e){var n=e.children,r=e.location;return function(e,n){an()||Kt(!1);var r,i=(0,t.useContext)(qt).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,on());if(n){var c,l="string"===typeof n?Vt(n):n;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||Kt(!1),r=l}else r=s;var f=r.pathname||"/",h=Gt(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return sn(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:en([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:en([u,e.pathnameBase])})})),i)}(hn(n),r)}function hn(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==cn&&Kt(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=hn(e.props.children)),n.push(r)}else n.push.apply(n,hn(e.props.children))})),n}var dn=function(){var e=St((0,t.useState)(!1),2),n=e[0],r=e[1],i=un(),a=function(){window.scrollY>100?r(!0):r(!1)};return(0,t.useEffect)((function(){return window.addEventListener("scroll",a),function(){return window.removeEventListener("scroll",a)}}),[]),(0,Nt.jsx)("div",{className:"nav ".concat(n&&"nav_black"),children:(0,Nt.jsxs)("div",{className:"nav_contents",children:[(0,Nt.jsx)("img",{onClick:function(){return i("/")},className:"nav_logo",src:"http://assets.stickpng.com/images/580b57fcd9996e24bc43c529.png",alt:""}),(0,Nt.jsx)("img",{onClick:function(){return i("/profile")},className:"nav_avatar",src:"https://i.pinimg.com/564x/0d/dc/ca/0ddccae723d85a703b798a5e682c23c1--horse-stuff-sleepover.jpg",alt:""})]})})};var pn=function(e){var n=e.title,r=e.fetchURL,i=e.isLargeRow,a=St((0,t.useState)([]),2),o=a[0],u=a[1];return(0,t.useEffect)((function(){function e(){return(e=kt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct.get(r);case 2:return t=e.sent,u(t.data.results),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),(0,Nt.jsxs)("div",{className:"row",children:[(0,Nt.jsx)("h2",{children:n}),(0,Nt.jsx)("div",{className:"row_posters",children:o.map((function(e){return(i&&e.poster_path||!i&&e.backdrop_path)&&(0,Nt.jsx)("img",{className:"row_poster ".concat(i&&"row_posterLarge"),src:"".concat("https://image.tmdb.org/t/p/original/").concat(i?e.poster_path:e.backdrop_path),alt:e.name},e.id)}))})]})};var vn=function(){return(0,Nt.jsxs)("div",{className:"homeScreen",children:[(0,Nt.jsx)(dn,{}),(0,Nt.jsx)(Dt,{}),(0,Nt.jsx)(pn,{title:"NETFLIX ORIGINALS",fetchURL:Et.fetchNetflixOriginals,isLargeRow:!0}),(0,Nt.jsx)(pn,{title:"Trending Now",fetchURL:Et.fetchTrending}),(0,Nt.jsx)(pn,{title:"Top Rated",fetchURL:Et.fetchTopRated}),(0,Nt.jsx)(pn,{title:"Action Movies",fetchURL:Et.fetchActionMovies}),(0,Nt.jsx)(pn,{title:"Comedy Movies",fetchURL:Et.fetchComedyMovies}),(0,Nt.jsx)(pn,{title:"Horror Movies",fetchURL:Et.fetchHorrorMovies}),(0,Nt.jsx)(pn,{title:"Romance Movies",fetchURL:Et.fetchRomanceMovies}),(0,Nt.jsx)(pn,{title:"Documentaries",fetchURL:Et.fetchDocumentaries})]})};function yn(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,Pt({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(Lt,(function(){if(a)f.call(a),a=null;else{var e=At.Pop,t=i(),n=t[0],r=t[1];if(f.length){if(null!=n){var o=s-n;o&&(a={action:e,location:r,retry:function(){m(-1*o)}},m(o))}}else y(e)}}));var o=At.Pop,u=i(),s=u[0],c=u[1],l=Ft(),f=Ft();function h(e){return"string"===typeof e?e:jt(e)}function d(e,t){return void 0===t&&(t=null),Pt(Ot({pathname:c.pathname,hash:"",search:""},"string"===typeof e?Vt(e):e,{state:t,key:Ut()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},h(e)]}function v(e,t,n){return!f.length||(f.call({action:e,location:t,retry:n}),!1)}function y(e){o=e;var t=i();s=t[0],c=t[1],l.call({action:o,location:c})}function m(e){r.go(e)}null==s&&(s=0,r.replaceState(Ot({},r.state,{idx:s}),""));var g={get action(){return o},get location(){return c},createHref:h,push:function e(t,i){var a=At.Push,o=d(t,i);if(v(a,o,(function(){e(t,i)}))){var u=p(o,s+1),c=u[0],l=u[1];try{r.pushState(c,"",l)}catch(f){n.location.assign(l)}y(a)}},replace:function e(t,n){var i=At.Replace,a=d(t,n);if(v(i,a,(function(){e(t,n)}))){var o=p(a,s),u=o[0],c=o[1];r.replaceState(u,"",c),y(i)}},go:m,back:function(){m(-1)},forward:function(){m(1)},listen:function(e){return l.push(e)},block:function(e){var t=f.push(e);return 1===f.length&&n.addEventListener(Rt,Mt),function(){t(),f.length||n.removeEventListener(Rt,Mt)}}};return g}({window:i}));var o=a.current,u=St((0,t.useState)({action:o.action,location:o.location}),2),s=u[0],c=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(c)}),[o]),(0,t.createElement)(ln,{basename:n,children:r,location:s.location,navigationType:s.action,navigator:o})}function mn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kn(e,t,n){return t&&gn(e.prototype,t),n&&gn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=xt(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xn(e,t){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xn(e,t)}function _n(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xn(e,t)}function Sn(e){return Sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sn(e)}function In(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function En(e,t){if(t&&("object"===yt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wn(e)}function Tn(e){var t=In();return function(){var n,r=Sn(e);if(t){var i=Sn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return En(this,n)}}function Cn(e,t,n){return Cn=In()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&xn(i,n.prototype),i},Cn.apply(null,arguments)}function Nn(e){var t="function"===typeof Map?new Map:void 0;return Nn=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Cn(e,arguments,Sn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),xn(n,e)},Nn(e)}var An=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Dn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(An(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},On=function(e){return function(e){var t=An(e);return Dn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Pn=function(e){try{return Dn.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Rn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Rn(e[n],t[n]));return e}var Ln=function(){function e(){var t=this;mn(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return kn(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Mn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[On(JSON.stringify({alg:"none",type:"JWT"})),On(JSON.stringify(a)),""].join(".")}function Fn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Un(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fn())}function jn(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Vn(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Bn(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function zn(){var e=Fn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function qn(){return"object"===typeof indexedDB}var Kn=function(e){_n(n,e);var t=Tn(n);function n(e,r,i){var a;return mn(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(wn(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(wn(a),Gn.prototype.create),a}return kn(n)}(Nn(Error)),Gn=function(){function e(t,n,r){mn(this,e),this.service=t,this.serviceName=n,this.errors=r}return kn(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Wn(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Kn(n,a,t);return o}}]),e}();function Wn(e,t){return e.replace(Hn,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Hn=/\{\$([^}]+)}/g;function Qn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function $n(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Jn(u)&&Jn(s)){if(!$n(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Jn(e){return null!==e&&"object"===typeof e}function Yn(e){for(var t=[],n=function(){var e=St(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Xn(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=St(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Zn(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function er(e,t){var n=new tr(e,t);return n.subscribe.bind(n)}var tr=function(){function e(t,n){var r=this;mn(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return kn(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=bn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=nr),void 0===r.error&&(r.error=nr),void 0===r.complete&&(r.complete=nr);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function nr(){}function rr(e){return e&&e._delegate?e._delegate:e}function ir(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ar(e){return function(e){if(Array.isArray(e))return wt(e)}(e)||ir(e)||xt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var or=function(){function e(t,n,r){mn(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return kn(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ur="[DEFAULT]",sr=function(){function e(t,n){mn(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return kn(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Ln;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ur})}catch(s){}var t,n=bn(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=St(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=kt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ar(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ar(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=bn(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=St(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=bn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(fE){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ur?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(fE){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur;return this.component?this.component.multipleInstances?e:ur:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var cr,lr,fr=function(){function e(t){mn(this,e),this.name=t,this.providers=new Map}return kn(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new sr(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),hr=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(lr||(lr={}));var dr={debug:lr.DEBUG,verbose:lr.VERBOSE,info:lr.INFO,warn:lr.WARN,error:lr.ERROR,silent:lr.SILENT},pr=lr.INFO,vr=(Ee(cr={},lr.DEBUG,"log"),Ee(cr,lr.VERBOSE,"log"),Ee(cr,lr.INFO,"info"),Ee(cr,lr.WARN,"warn"),Ee(cr,lr.ERROR,"error"),cr),yr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=vr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},mr=function(){function e(t){mn(this,e),this.name=t,this._logLevel=pr,this._logHandler=yr,this._userLogHandler=null,hr.push(this)}return kn(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in lr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?dr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lr.DEBUG].concat(t)),this._logHandler.apply(this,[this,lr.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lr.VERBOSE].concat(t)),this._logHandler.apply(this,[this,lr.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lr.INFO].concat(t)),this._logHandler.apply(this,[this,lr.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lr.WARN].concat(t)),this._logHandler.apply(this,[this,lr.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lr.ERROR].concat(t)),this._logHandler.apply(this,[this,lr.ERROR].concat(t))}}]),e}();var gr,kr;var br=new WeakMap,wr=new WeakMap,xr=new WeakMap,_r=new WeakMap,Sr=new WeakMap;var Ir={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return wr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||xr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cr(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Er(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(kr||(kr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Nr(this),n),Cr(br.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Cr(e.apply(Nr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Nr(this),t].concat(r));return xr.set(a,t.sort?t.sort():[t]),Cr(a)}}function Tr(e){return"function"===typeof e?Er(e):(e instanceof IDBTransaction&&function(e){if(!wr.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));wr.set(e,t)}}(e),t=e,(gr||(gr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Ir):e);var t}function Cr(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Cr(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&br.set(t,e)})).catch((function(){})),Sr.set(t,e),t}(e);if(_r.has(e))return _r.get(e);var t=Tr(e);return t!==e&&(_r.set(e,t),Sr.set(t,e)),t}var Nr=function(e){return Sr.get(e)};var Ar,Dr,Or=["get","getKey","getAll","getAllKeys","count"],Pr=["put","add","delete","clear"],Rr=new Map;function Lr(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Rr.get(t))return Rr.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Pr.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Or.includes(n))){var a=function(){var e=kt(mt().mark((function e(t){var a,o,u,s,c,l,f=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Rr.set(t,a),a}}}Ir=function(e){return Ce(Ce({},e),{},{get:function(t,n,r){return Lr(t,n)||e.get(t,n,r)},has:function(t,n){return!!Lr(t,n)||e.has(t,n)}})}(Ir);var Mr=function(){function e(t){mn(this,e),this.container=t}return kn(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Fr="@firebase/app",Ur="0.7.26",jr=new mr("@firebase/app"),Vr="[DEFAULT]",Br=(Ee(Ar={},Fr,"fire-core"),Ee(Ar,"@firebase/app-compat","fire-core-compat"),Ee(Ar,"@firebase/analytics","fire-analytics"),Ee(Ar,"@firebase/analytics-compat","fire-analytics-compat"),Ee(Ar,"@firebase/app-check","fire-app-check"),Ee(Ar,"@firebase/app-check-compat","fire-app-check-compat"),Ee(Ar,"@firebase/auth","fire-auth"),Ee(Ar,"@firebase/auth-compat","fire-auth-compat"),Ee(Ar,"@firebase/database","fire-rtdb"),Ee(Ar,"@firebase/database-compat","fire-rtdb-compat"),Ee(Ar,"@firebase/functions","fire-fn"),Ee(Ar,"@firebase/functions-compat","fire-fn-compat"),Ee(Ar,"@firebase/installations","fire-iid"),Ee(Ar,"@firebase/installations-compat","fire-iid-compat"),Ee(Ar,"@firebase/messaging","fire-fcm"),Ee(Ar,"@firebase/messaging-compat","fire-fcm-compat"),Ee(Ar,"@firebase/performance","fire-perf"),Ee(Ar,"@firebase/performance-compat","fire-perf-compat"),Ee(Ar,"@firebase/remote-config","fire-rc"),Ee(Ar,"@firebase/remote-config-compat","fire-rc-compat"),Ee(Ar,"@firebase/storage","fire-gcs"),Ee(Ar,"@firebase/storage-compat","fire-gcs-compat"),Ee(Ar,"@firebase/firestore","fire-fst"),Ee(Ar,"@firebase/firestore-compat","fire-fst-compat"),Ee(Ar,"fire-js","fire-js"),Ee(Ar,"firebase","fire-js-all"),Ar),zr=new Map,qr=new Map;function Kr(e,t){try{e.container.addComponent(t)}catch(n){jr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Gr(e,t){e.container.addOrOverwriteComponent(t)}function Wr(e){var t=e.name;if(qr.has(t))return jr.debug("There were multiple attempts to register component ".concat(t,".")),!1;qr.set(t,e);var n,r=bn(zr.values());try{for(r.s();!(n=r.n()).done;){Kr(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Hr(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Qr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vr;Hr(e,t).clearInstance(n)}function $r(){qr.clear()}var Jr=(Ee(Dr={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ee(Dr,"bad-app-name","Illegal App name: '{$appName}"),Ee(Dr,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ee(Dr,"app-deleted","Firebase App named '{$appName}' already deleted"),Ee(Dr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ee(Dr,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ee(Dr,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),Ee(Dr,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),Ee(Dr,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),Ee(Dr,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Dr),Yr=new Gn("app","Firebase",Jr),Xr=function(){function e(t,n,r){var i=this;mn(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new or("app",(function(){return i}),"PUBLIC"))}return kn(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}]),e}(),Zr="9.8.3";function ei(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Vr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Yr.create("bad-app-name",{appName:String(i)});var a=zr.get(i);if(a){if($n(e,a.options)&&$n(r,a.config))return a;throw Yr.create("duplicate-app",{appName:i})}var o,u=new fr(i),s=bn(qr.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Xr(e,r,u);return zr.set(i,l),l}function ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr,t=zr.get(e);if(!t)throw Yr.create("no-app",{appName:e});return t}function ni(){return Array.from(zr.values())}function ri(e){return ii.apply(this,arguments)}function ii(){return(ii=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!zr.has(n)){e.next=6;break}return zr.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ai(e,t,n){var r,i=null!==(r=Br[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void jr.warn(u.join(" "))}Wr(new or("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function oi(e,t){if(null!==e&&"function"!==typeof e)throw Yr.create("invalid-log-argument");!function(e,t){var n,r=bn(hr);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=dr[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:lr[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ui(e){var t;t=e,hr.forEach((function(e){e.setLogLevel(t)}))}var si="firebase-heartbeat-store",ci=null;function li(){return ci||(ci=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Cr(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Cr(u.result),e.oldVersion,e.newVersion,Cr(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(si)}}).catch((function(e){throw Yr.create("storage-open",{originalErrorMessage:e.message})}))),ci}function fi(e){return hi.apply(this,arguments)}function hi(){return hi=kt(mt().mark((function e(t){var n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,li();case 3:return r=e.sent,e.abrupt("return",r.transaction(si).objectStore(si).get(vi(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Yr.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),hi.apply(this,arguments)}function di(e,t){return pi.apply(this,arguments)}function pi(){return pi=kt(mt().mark((function e(t,n){var r,i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,li();case 3:return i=e.sent,a=i.transaction(si,"readwrite"),o=a.objectStore(si),e.next=8,o.put(n,vi(t));case 8:return e.abrupt("return",a.done);case 11:throw e.prev=11,e.t0=e.catch(0),Yr.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),pi.apply(this,arguments)}function vi(e){return"".concat(e.name,"!").concat(e.options.appId)}var yi=function(){function e(t){var n=this;mn(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new wi(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return kn(e,[{key:"triggerHeartbeat",value:function(){var e=kt(mt().mark((function e(){var t,n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=mi(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=kt(mt().mark((function e(){var t,n,r,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=mi(),n=gi(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=On(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function mi(){return(new Date).toISOString().substring(0,10)}function gi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=bn(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),xi(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),xi(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ki,bi,wi=function(){function e(t){mn(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return kn(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qn()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=kt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,fi(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=kt(mt().mark((function e(t){var n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",di(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=kt(mt().mark((function e(t){var n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",di(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ar(r.heartbeats),ar(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function xi(e){return On(JSON.stringify({version:2,heartbeats:e})).length}ki="",Wr(new or("platform-logger",(function(e){return new Mr(e)}),"PRIVATE")),Wr(new or("heartbeat",(function(e){return new yi(e)}),"PRIVATE")),ai(Fr,Ur,ki),ai(Fr,Ur,"esm2017"),ai("fire-js","");var _i=function(){function e(t,n){var r=this;mn(this,e),this._delegate=t,this.firebase=n,Kr(t,new or("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return kn(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),ri(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vr;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vr;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Kr(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Gr(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Si=(Ee(bi={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ee(bi,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),bi),Ii=new Gn("app-compat","Firebase",Si);var Ei=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ei(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Qn(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ai,setLogLevel:ui,onLog:oi,apps:null,SDK_VERSION:Zr,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Wr(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ii.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Rn(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Qn(n,e=e||Vr))throw Ii.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(_i);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Rn(n,e)},createSubscribe:er,ErrorFactory:Gn,deepExtend:Rn}),n}(),Ti=new mr("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Ti.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ci=self.firebase.SDK_VERSION;Ci&&Ci.indexOf("LITE")>=0&&Ti.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ni=Ei;!function(e){ai("@firebase/app-compat","0.1.27",e)}();function Ai(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sn(e)););return e}function Di(){return Di="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Ai(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Di.apply(this,arguments)}Ni.registerVersion("firebase","9.8.3","app-compat");function Oi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Pi;Object.create;var Ri="facebook.com",Li="github.com",Mi="google.com",Fi="password",Ui="twitter.com",ji="EMAIL_SIGNIN",Vi="PASSWORD_RESET",Bi="RECOVER_EMAIL",zi="REVERT_SECOND_FACTOR_ADDITION",qi="VERIFY_AND_CHANGE_EMAIL",Ki="VERIFY_EMAIL";function Gi(){return Ee({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Wi=function(){var e;return Ee(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Ee(e,"argument-error",""),Ee(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Ee(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Ee(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Ee(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Ee(e,"cordova-not-ready","Cordova framework is not ready."),Ee(e,"cors-unsupported","This browser is not supported."),Ee(e,"credential-already-in-use","This credential is already associated with a different user account."),Ee(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Ee(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Ee(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Ee(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Ee(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Ee(e,"email-already-in-use","The email address is already in use by another account."),Ee(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Ee(e,"expired-action-code","The action code has expired."),Ee(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Ee(e,"internal-error","An internal AuthError has occurred."),Ee(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Ee(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Ee(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Ee(e,"invalid-auth-event","An internal AuthError has occurred."),Ee(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Ee(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Ee(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Ee(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Ee(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Ee(e,"invalid-email","The email address is badly formatted."),Ee(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Ee(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Ee(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Ee(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Ee(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Ee(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Ee(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Ee(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Ee(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Ee(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Ee(e,"wrong-password","The password is invalid or the user does not have a password."),Ee(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Ee(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Ee(e,"invalid-provider-id","The specified provider ID is invalid."),Ee(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Ee(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Ee(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Ee(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Ee(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Ee(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Ee(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Ee(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Ee(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Ee(e,"missing-continue-uri","A continue URL must be provided in the request."),Ee(e,"missing-iframe-start","An internal AuthError has occurred."),Ee(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Ee(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Ee(e,"missing-multi-factor-info","No second factor identifier is provided."),Ee(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Ee(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Ee(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Ee(e,"app-deleted","This instance of FirebaseApp has been deleted."),Ee(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Ee(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Ee(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Ee(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Ee(e,"no-auth-event","An internal AuthError has occurred."),Ee(e,"no-such-provider","User was not linked to an account with the given provider."),Ee(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Ee(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Ee(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Ee(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Ee(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Ee(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Ee(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Ee(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Ee(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Ee(e,"rejected-credential","The request contains malformed or mismatching credentials."),Ee(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Ee(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Ee(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Ee(e,"timeout","The operation has timed out."),Ee(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Ee(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Ee(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Ee(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Ee(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Ee(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Ee(e,"unverified-email","The operation requires a verified email."),Ee(e,"user-cancelled","The user did not grant your application the permissions it requested."),Ee(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Ee(e,"user-disabled","The user account has been disabled by an administrator."),Ee(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Ee(e,"user-signed-out",""),Ee(e,"weak-password","The password must be 6 characters long or more."),Ee(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Ee(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Hi=Gi,Qi=new Gn("auth","Firebase",Gi()),$i=new mr("@firebase/auth");function Ji(e){if($i.logLevel<=lr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];$i.error.apply($i,["Auth (".concat(Zr,"): ").concat(e)].concat(n))}}function Yi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ta.apply(void 0,[e].concat(n))}function Xi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ta.apply(void 0,[e].concat(n))}function Zi(e,t,n){var r=Object.assign(Object.assign({},Hi()),Ee({},t,n));return new Gn("auth","Firebase",r).create(t,{appName:e.name})}function ea(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Yi(e,"argument-error"),Zi(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ta(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ar(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ar(o)))}return Qi.create.apply(Qi,[e].concat(n))}function na(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ta.apply(void 0,[t].concat(r))}}function ra(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Ji(t),new Error(t)}function ia(e,t){e||ra(t)}var aa=new Map;function oa(e){ia(e instanceof Function,"Expected a class definition");var t=aa.get(e);return t?(ia(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,aa.set(e,t),t)}function ua(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function sa(){return"http:"===ca()||"https:"===ca()}function ca(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var la=function(){function e(t,n){mn(this,e),this.shortDelay=t,this.longDelay=n,ia(n>t,"Short delay should be less than long delay!"),this.isMobile=Un()||Bn()}return kn(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(sa()||Vn()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function fa(e,t){ia(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ha=function(){function e(){mn(this,e)}return kn(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ra("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ra("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ra("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),da=(Ee(Pi={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Ee(Pi,"MISSING_CUSTOM_TOKEN","internal-error"),Ee(Pi,"INVALID_IDENTIFIER","invalid-email"),Ee(Pi,"MISSING_CONTINUE_URI","internal-error"),Ee(Pi,"INVALID_PASSWORD","wrong-password"),Ee(Pi,"MISSING_PASSWORD","internal-error"),Ee(Pi,"EMAIL_EXISTS","email-already-in-use"),Ee(Pi,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Ee(Pi,"INVALID_IDP_RESPONSE","invalid-credential"),Ee(Pi,"INVALID_PENDING_TOKEN","invalid-credential"),Ee(Pi,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Ee(Pi,"MISSING_REQ_TYPE","internal-error"),Ee(Pi,"EMAIL_NOT_FOUND","user-not-found"),Ee(Pi,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Ee(Pi,"EXPIRED_OOB_CODE","expired-action-code"),Ee(Pi,"INVALID_OOB_CODE","invalid-action-code"),Ee(Pi,"MISSING_OOB_CODE","internal-error"),Ee(Pi,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Ee(Pi,"INVALID_ID_TOKEN","invalid-user-token"),Ee(Pi,"TOKEN_EXPIRED","user-token-expired"),Ee(Pi,"USER_NOT_FOUND","user-token-expired"),Ee(Pi,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Ee(Pi,"INVALID_CODE","invalid-verification-code"),Ee(Pi,"INVALID_SESSION_INFO","invalid-verification-id"),Ee(Pi,"INVALID_TEMPORARY_PROOF","invalid-credential"),Ee(Pi,"MISSING_SESSION_INFO","missing-verification-id"),Ee(Pi,"SESSION_EXPIRED","code-expired"),Ee(Pi,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Ee(Pi,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Ee(Pi,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Ee(Pi,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Ee(Pi,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Ee(Pi,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Ee(Pi,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Ee(Pi,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Ee(Pi,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Ee(Pi,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Ee(Pi,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Pi),pa=new la(3e4,6e4);function va(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function ya(e,t,n,r){return ma.apply(this,arguments)}function ma(){return ma=kt(mt().mark((function e(t,n,r,i){var a,o=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",ga(t,a,kt(mt().mark((function e(){var a,o,u,s;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Yn(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ha.fetch()(xa(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),ma.apply(this,arguments)}function ga(e,t,n){return ka.apply(this,arguments)}function ka(){return ka=kt(mt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},da),n),e.prev=2,a=new _a(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Sa(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=St(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Sa(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Sa(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Sa(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw Zi(t,d,h);case 34:Yi(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Kn)){e.next=41;break}throw e.t0;case 41:Yi(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),ka.apply(this,arguments)}function ba(e,t,n,r){return wa.apply(this,arguments)}function wa(){return wa=kt(mt().mark((function e(t,n,r,i){var a,o,u=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,ya(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Yi(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),wa.apply(this,arguments)}function xa(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?fa(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var _a=function(){function e(t){var n=this;mn(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Xi(n.auth,"network-request-failed"))}),pa.get())}))}return kn(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Sa(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Xi(e,t,r);return i.customData._tokenResponse=n,i}function Ia(e,t){return Ea.apply(this,arguments)}function Ea(){return Ea=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function Ta(e,t){return Ca.apply(this,arguments)}function Ca(){return Ca=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ca.apply(this,arguments)}function Na(e,t){return Aa.apply(this,arguments)}function Aa(){return Aa=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Aa.apply(this,arguments)}function Da(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Oa(){return Oa=kt(mt().mark((function e(t){var n,r,i,a,o,u,s=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=rr(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,na((a=Ra(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Da(Pa(a.auth_time)),issuedAtTime:Da(Pa(a.iat)),expirationTime:Da(Pa(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}function Pa(e){return 1e3*Number(e)}function Ra(e){var t=St(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Ji("JWT malformed, contained fewer than 3 sections"),null;try{var a=Pn(r);return a?JSON.parse(a):(Ji("Failed to decode base64 JWT payload"),null)}catch(o){return Ji("Caught error parsing JWT payload as JSON",o),null}}function La(e,t){return Ma.apply(this,arguments)}function Ma(){return Ma=kt(mt().mark((function e(t,n){var r=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Kn&&Fa(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ma.apply(this,arguments)}function Fa(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Ua=function(){function e(t){mn(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return kn(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(kt(mt().mark((function t(){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ja=function(){function e(t,n){mn(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return kn(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Da(this.lastLoginAt),this.creationTime=Da(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Va(e){return Ba.apply(this,arguments)}function Ba(){return Ba=kt(mt().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,La(t,Na(r,{idToken:i}));case 6:na(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Ka(o.providerUserInfo):[],s=qa(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ja(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Ba.apply(this,arguments)}function za(){return(za=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=rr(t),e.next=3,Va(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qa(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ar(n),ar(t))}function Ka(e){return e.map((function(e){var t=e.providerId,n=Oi(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Ga(e,t){return Wa.apply(this,arguments)}function Wa(){return Wa=kt(mt().mark((function e(t,n){var r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ga(t,{},kt(mt().mark((function e(){var r,i,a,o,u,s;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yn({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=xa(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ha.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}var Ha=function(){function e(){mn(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return kn(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){na(e.idToken,"internal-error"),na("undefined"!==typeof e.idToken,"internal-error"),na("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Ra(e);return na(t,"internal-error"),na("undefined"!==typeof t.exp,"internal-error"),na("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=kt(mt().mark((function e(t){var n,r=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],na(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=kt(mt().mark((function e(t,n){var r,i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ga(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return ra("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(na("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(na("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(na("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Qa(e,t){na("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var $a=function(){function e(t){mn(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Oi(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ua(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?ar(a.providerData):[],this.metadata=new ja(a.createdAt||void 0,a.lastLoginAt||void 0)}return kn(e,[{key:"getIdToken",value:function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,La(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(na(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Oa.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return za.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(na(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){na(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=kt(mt().mark((function e(t){var n,r,i=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Va(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=kt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,La(this,Ia(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;na(k&&_,t,"internal-error");var S=Ha.fromJSON(this.name,_);na("string"===typeof k,t,"internal-error"),Qa(f,t.name),Qa(h,t.name),na("boolean"===typeof b,t,"internal-error"),na("boolean"===typeof w,t,"internal-error"),Qa(d,t.name),Qa(p,t.name),Qa(v,t.name),Qa(y,t.name),Qa(m,t.name),Qa(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(I.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(){var t=kt(mt().mark((function t(n,r){var i,a,o,u=arguments;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Ha).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Va(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Ja=function(){function e(){mn(this,e),this.type="NONE",this.storage={}}return kn(e,[{key:"_isAvailable",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ja.type="NONE";var Ya=Ja;function Xa(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Za=function(){function e(t,n,r){mn(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Xa(this.userKey,a.apiKey,o),this.fullPersistenceKey=Xa("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return kn(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=kt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?$a._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=kt(mt().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(oa(Ya),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||oa(Ya),u=Xa(i,n.config.apiKey,n.name),s=null,c=bn(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=$a._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function eo(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(io(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(to(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(oo(t))return"Blackberry";if(uo(t))return"Webos";if(no(t))return"Safari";if((t.includes("chrome/")||ro(t))&&!t.includes("edge/"))return"Chrome";if(ao(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function to(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();return/firefox\//i.test(e)}function no(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ro(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();return/crios\//i.test(e)}function io(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();return/iemobile/i.test(e)}function ao(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();return/android/i.test(e)}function oo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();return/blackberry/i.test(e)}function uo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();return/webos/i.test(e)}function so(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();return/iphone|ipad|ipod/i.test(e)}function co(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();return so(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function lo(){return zn()&&10===document.documentMode}function fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();return so(e)||ao(e)||uo(e)||oo(e)||/windows phone/i.test(e)||io(e)}function ho(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=eo(Fn());break;case"Worker":t="".concat(eo(Fn()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Zr,"/").concat(r)}var po=function(){function e(t){mn(this,e),this.auth=t,this.queue=[]}return kn(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=kt(mt().mark((function e(t){var n,r,i,a,o,u,s,c;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=bn(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=bn(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(q){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),vo=function(){function e(t,n,r){mn(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mo(this),this.idTokenSubscription=new mo(this),this.beforeStateQueue=new po(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qi,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return kn(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=oa(t)),this._initializationPromise=this.queue(kt(mt().mark((function r(){var i,a;return mt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Za.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=kt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=kt(mt().mark((function e(t){var n,r,i,a,o,u,s;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return na(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Va(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?rr(t):null)&&na(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=kt(mt().mark((function e(t){var n,r=this,i=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&na(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(kt(mt().mark((function n(){return mt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(oa(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Gn("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=kt(mt().mark((function e(t,n){var r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return na(n=t&&oa(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Za.create(this,[oa(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=kt(mt().mark((function e(t){var n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=kt(mt().mark((function e(t){var n=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return na(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return na(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ho(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=kt(mt().mark((function e(){var t,n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ee({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function yo(e){return rr(e)}var mo=function(){function e(t){var n=this;mn(this,e),this.auth=t,this.observer=null,this.addObserver=er((function(e){return n.observer=e}))}return kn(e,[{key:"next",get:function(){return na(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function go(e,t,n){var r=yo(e);na(r._canInitEmulator,r,"emulator-config-failed"),na(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=ko(t),o=function(e){var t=ko(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:bo(r.substr(a.length+1))}}var o=St(r.split(":"),2);return{host:o[0],port:bo(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ko(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function bo(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var wo=function(){function e(t,n){mn(this,e),this.providerId=t,this.signInMethod=n}return kn(e,[{key:"toJSON",value:function(){return ra("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return ra("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return ra("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return ra("not implemented")}}]),e}();function xo(e,t){return _o.apply(this,arguments)}function _o(){return _o=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:resetPassword",va(t,n)));case 1:case"end":return e.stop()}}),e)}))),_o.apply(this,arguments)}function So(e,t){return Io.apply(this,arguments)}function Io(){return Io=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Io.apply(this,arguments)}function Eo(e,t){return To.apply(this,arguments)}function To(){return To=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:update",va(t,n)));case 1:case"end":return e.stop()}}),e)}))),To.apply(this,arguments)}function Co(e,t){return No.apply(this,arguments)}function No(){return No=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:signInWithPassword",va(t,n)));case 1:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}function Ao(e,t){return Do.apply(this,arguments)}function Do(){return Do=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:sendOobCode",va(t,n)));case 1:case"end":return e.stop()}}),e)}))),Do.apply(this,arguments)}function Oo(e,t){return Po.apply(this,arguments)}function Po(){return Po=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ao(t,n));case 1:case"end":return e.stop()}}),e)}))),Po.apply(this,arguments)}function Ro(e,t){return Lo.apply(this,arguments)}function Lo(){return Lo=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ao(t,n));case 1:case"end":return e.stop()}}),e)}))),Lo.apply(this,arguments)}function Mo(e,t){return Fo.apply(this,arguments)}function Fo(){return Fo=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ao(t,n));case 1:case"end":return e.stop()}}),e)}))),Fo.apply(this,arguments)}function Uo(e,t){return jo.apply(this,arguments)}function jo(){return jo=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ao(t,n));case 1:case"end":return e.stop()}}),e)}))),jo.apply(this,arguments)}function Vo(e,t){return Bo.apply(this,arguments)}function Bo(){return Bo=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:signInWithEmailLink",va(t,n)));case 1:case"end":return e.stop()}}),e)}))),Bo.apply(this,arguments)}function zo(e,t){return qo.apply(this,arguments)}function qo(){return qo=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:signInWithEmailLink",va(t,n)));case 1:case"end":return e.stop()}}),e)}))),qo.apply(this,arguments)}var Ko=function(e){_n(n,e);var t=Tn(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return mn(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return kn(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Co(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Vo(t,{email:this._email,oobCode:this._password}));case 5:Yi(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",So(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",zo(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Yi(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(wo);function Go(e,t){return Wo.apply(this,arguments)}function Wo(){return Wo=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:signInWithIdp",va(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wo.apply(this,arguments)}var Ho=function(e){_n(n,e);var t=Tn(n);function n(){var e;return mn(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return kn(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Go(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Go(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Go(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yn(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yi("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Oi(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(wo);function Qo(e,t){return $o.apply(this,arguments)}function $o(){return $o=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:sendVerificationCode",va(t,n)));case 1:case"end":return e.stop()}}),e)}))),$o.apply(this,arguments)}function Jo(){return Jo=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:signInWithPhoneNumber",va(t,n)));case 1:case"end":return e.stop()}}),e)}))),Jo.apply(this,arguments)}function Yo(){return Yo=kt(mt().mark((function e(t,n){var r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ba(t,"POST","/v1/accounts:signInWithPhoneNumber",va(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Sa(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Yo.apply(this,arguments)}var Xo=Ee({},"USER_NOT_FOUND","user-not-found");function Zo(){return Zo=kt(mt().mark((function e(t,n){var r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ba(t,"POST","/v1/accounts:signInWithPhoneNumber",va(t,r),Xo));case 2:case"end":return e.stop()}}),e)}))),Zo.apply(this,arguments)}var eu=function(e){_n(n,e);var t=Tn(n);function n(e){var r;return mn(this,n),(r=t.call(this,"phone","phone")).params=e,r}return kn(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Jo.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Yo.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Zo.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(wo);var tu=function(){function e(t){var n,r,i,a,o,u;mn(this,e);var s=Xn(Zn(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);na(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return kn(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Xn(Zn(e)).link,n=t?Xn(Zn(t)).deep_link_id:null,r=Xn(Zn(e)).deep_link_id;return(r?Xn(Zn(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(fE){return null}}}]),e}();var nu=function(){function e(){mn(this,e),this.providerId=e.PROVIDER_ID}return kn(e,null,[{key:"credential",value:function(e,t){return Ko._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=tu.parseLink(t);return na(n,"argument-error"),Ko._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();nu.PROVIDER_ID="password",nu.EMAIL_PASSWORD_SIGN_IN_METHOD="password",nu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ru=function(){function e(t){mn(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return kn(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),iu=function(e){_n(n,e);var t=Tn(n);function n(){var e;return mn(this,n),(e=t.apply(this,arguments)).scopes=[],e}return kn(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ar(this.scopes)}}]),n}(ru),au=function(e){_n(n,e);var t=Tn(n);function n(){return mn(this,n),t.apply(this,arguments)}return kn(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return na(e.idToken||e.accessToken,"argument-error"),Ho._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return na("providerId"in t&&"signInMethod"in t,"argument-error"),Ho._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(iu),ou=function(e){_n(n,e);var t=Tn(n);function n(){return mn(this,n),t.call(this,"facebook.com")}return kn(n,null,[{key:"credential",value:function(e){return Ho._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(fE){return null}}}]),n}(iu);ou.FACEBOOK_SIGN_IN_METHOD="facebook.com",ou.PROVIDER_ID="facebook.com";var uu=function(e){_n(n,e);var t=Tn(n);function n(){var e;return mn(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return kn(n,null,[{key:"credential",value:function(e,t){return Ho._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(fE){return null}}}]),n}(iu);uu.GOOGLE_SIGN_IN_METHOD="google.com",uu.PROVIDER_ID="google.com";var su=function(e){_n(n,e);var t=Tn(n);function n(){return mn(this,n),t.call(this,"github.com")}return kn(n,null,[{key:"credential",value:function(e){return Ho._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(fE){return null}}}]),n}(iu);su.GITHUB_SIGN_IN_METHOD="github.com",su.PROVIDER_ID="github.com";var cu=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return kn(n,[{key:"_getIdTokenResponse",value:function(e){return Go(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Go(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Go(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(wo),lu=function(e){_n(n,e);var t=Tn(n);function n(e){return mn(this,n),na(e.startsWith("saml."),"argument-error"),t.call(this,e)}return kn(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=cu.fromJSON(e);return na(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return cu._create(r,n)}catch(i){return null}}}]),n}(ru),fu=function(e){_n(n,e);var t=Tn(n);function n(){return mn(this,n),t.call(this,"twitter.com")}return kn(n,null,[{key:"credential",value:function(e,t){return Ho._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(fE){return null}}}]),n}(iu);function hu(e,t){return du.apply(this,arguments)}function du(){return du=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:signUp",va(t,n)));case 1:case"end":return e.stop()}}),e)}))),du.apply(this,arguments)}fu.TWITTER_SIGN_IN_METHOD="twitter.com",fu.PROVIDER_ID="twitter.com";var pu=function(){function e(t){mn(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return kn(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=kt(mt().mark((function t(n,r,i){var a,o,u,s,c=arguments;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,$a._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=vu(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=kt(mt().mark((function t(n,r,i){var a;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=vu(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function vu(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function yu(){return yu=kt(mt().mark((function e(t){var n,r,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yo(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new pu({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,hu(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,pu._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),yu.apply(this,arguments)}var mu=function(e){_n(n,e);var t=Tn(n);function n(e,r,i,a){var o,u;return mn(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(wn(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return kn(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Kn);function gu(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw mu._fromErrorAndOperation(e,n,t,r);throw n}))}function ku(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function bu(e,t){return wu.apply(this,arguments)}function wu(){return wu=kt(mt().mark((function e(t,n){var r,i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rr(t),e.next=3,Su(!0,r,n);case 3:return e.t0=Ta,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=ku(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),wu.apply(this,arguments)}function xu(e,t){return _u.apply(this,arguments)}function _u(){return _u=kt(mt().mark((function e(t,n){var r,i,a=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=La,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",pu._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),_u.apply(this,arguments)}function Su(e,t,n){return Iu.apply(this,arguments)}function Iu(){return(Iu=kt(mt().mark((function e(t,n,r){var i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Va(n);case 2:i=ku(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",na(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eu(e,t){return Tu.apply(this,arguments)}function Tu(){return Tu=kt(mt().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,La(t,gu(i,a,n,t),r);case 6:return na((o=e.sent).idToken,i,"internal-error"),na(u=Ra(o.idToken),i,"internal-error"),s=u.sub,na(t.uid===s,i,"user-mismatch"),e.abrupt("return",pu._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Yi(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Tu.apply(this,arguments)}function Cu(e,t){return Nu.apply(this,arguments)}function Nu(){return Nu=kt(mt().mark((function e(t,n){var r,i,a,o,u=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,gu(t,i,n);case 4:return a=e.sent,e.next=7,pu._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Nu.apply(this,arguments)}function Au(e,t){return Du.apply(this,arguments)}function Du(){return Du=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cu(yo(t),n));case 1:case"end":return e.stop()}}),e)}))),Du.apply(this,arguments)}function Ou(e,t){return Pu.apply(this,arguments)}function Pu(){return(Pu=kt(mt().mark((function e(t,n){var r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rr(t),e.next=3,Su(!1,r,n.providerId);case 3:return e.abrupt("return",xu(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ru(e,t){return Lu.apply(this,arguments)}function Lu(){return(Lu=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eu(rr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mu(e,t){return Fu.apply(this,arguments)}function Fu(){return Fu=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:signInWithCustomToken",va(t,n)));case 1:case"end":return e.stop()}}),e)}))),Fu.apply(this,arguments)}function Uu(){return Uu=kt(mt().mark((function e(t,n){var r,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yo(t),e.next=3,Mu(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,pu._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Uu.apply(this,arguments)}var ju=function(){function e(t,n){mn(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return kn(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Vu._fromServerResponse(e,t):Yi(e,"internal-error")}}]),e}(),Vu=function(e){_n(n,e);var t=Tn(n);function n(e){var r;return mn(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return kn(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ju);function Bu(e,t,n){var r;na((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),na("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(na(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(na(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function zu(){return zu=kt(mt().mark((function e(t,n,r){var i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rr(t),a={requestType:"PASSWORD_RESET",email:n},r&&Bu(i,a,r),e.next=5,Ro(i,a);case 5:case"end":return e.stop()}}),e)}))),zu.apply(this,arguments)}function qu(){return qu=kt(mt().mark((function e(t,n,r){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xo(rr(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),qu.apply(this,arguments)}function Ku(){return Ku=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eo(rr(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Ku.apply(this,arguments)}function Gu(e,t){return Wu.apply(this,arguments)}function Wu(){return Wu=kt(mt().mark((function e(t,n){var r,i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rr(t),e.next=3,xo(r,{oobCode:n});case 3:i=e.sent,na(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return na(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:na(i.mfaInfo,r,"internal-error");case 13:na(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ju._fromServerResponse(yo(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}function Hu(){return Hu=kt(mt().mark((function e(t,n){var r,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gu(rr(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Hu.apply(this,arguments)}function Qu(e,t,n){return $u.apply(this,arguments)}function $u(){return $u=kt(mt().mark((function e(t,n,r){var i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yo(t),e.next=3,hu(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,pu._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),$u.apply(this,arguments)}function Ju(){return Ju=kt(mt().mark((function e(t,n,r){var i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rr(t),a={requestType:"EMAIL_SIGNIN",email:n},na(r.handleCodeInApp,i,"argument-error"),r&&Bu(i,a,r),e.next=6,Mo(i,a);case 6:case"end":return e.stop()}}),e)}))),Ju.apply(this,arguments)}function Yu(){return Yu=kt(mt().mark((function e(t,n,r){var i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rr(t),na((a=nu.credentialWithLink(n,r||ua()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Au(i,a));case 4:case"end":return e.stop()}}),e)}))),Yu.apply(this,arguments)}function Xu(e,t){return Zu.apply(this,arguments)}function Zu(){return Zu=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:createAuthUri",va(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zu.apply(this,arguments)}function es(){return es=kt(mt().mark((function e(t,n){var r,i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sa()?ua():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Xu(rr(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}function ts(){return(ts=kt(mt().mark((function e(t,n){var r,i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rr(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Bu(r.auth,a,n),e.next=8,Oo(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ns(){return(ns=kt(mt().mark((function e(t,n,r){var i,a,o,u;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rr(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Bu(i.auth,o,r),e.next=8,Uo(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rs(e,t){return is.apply(this,arguments)}function is(){return is=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}function as(){return(as=kt(mt().mark((function e(t,n){var r,i,a,o,u,s,c;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=rr(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,La(a,rs(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function os(e,t,n){return us.apply(this,arguments)}function us(){return us=kt(mt().mark((function e(t,n,r){var i,a,o,u;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,La(t,So(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),us.apply(this,arguments)}var ss=kn((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};mn(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),cs=function(e){_n(n,e);var t=Tn(n);function n(e,r,i,a){var o;return mn(this,n),(o=t.call(this,e,r,i)).username=a,o}return kn(n)}(ss),ls=function(e){_n(n,e);var t=Tn(n);function n(e,r){return mn(this,n),t.call(this,e,"facebook.com",r)}return kn(n)}(ss),fs=function(e){_n(n,e);var t=Tn(n);function n(e,r){return mn(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return kn(n)}(cs),hs=function(e){_n(n,e);var t=Tn(n);function n(e,r){return mn(this,n),t.call(this,e,"google.com",r)}return kn(n)}(ss),ds=function(e){_n(n,e);var t=Tn(n);function n(e,r,i){return mn(this,n),t.call(this,e,"twitter.com",r,i)}return kn(n)}(cs);function ps(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Ra(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ss(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ls(a,i);case"github.com":return new fs(a,i);case"google.com":return new hs(a,i);case"twitter.com":return new ds(a,i,e.screenName||null);case"custom":case"anonymous":return new ss(a,null);default:return new ss(a,r,i)}}(n)}var vs=function(){function e(t,n){mn(this,e),this.type=t,this.credential=n}return kn(e,[{key:"toJSON",value:function(){return{multiFactorSession:Ee({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ys=function(){function e(t,n,r){mn(this,e),this.session=t,this.hints=n,this.signInResolver=r}return kn(e,[{key:"resolveSignIn",value:function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=yo(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ju._fromServerResponse(r,e)}));na(i.mfaPendingCredential,r,"internal-error");var o=vs._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=kt(mt().mark((function e(t){var a,u,s;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,pu._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return na(n.user,r,"internal-error"),e.abrupt("return",pu._forOperation(n.user,n.operationType,u));case 17:Yi(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function ms(e,t){return ya(e,"POST","/v2/accounts/mfaEnrollment:start",va(e,t))}function gs(e,t){return ya(e,"POST","/v2/accounts/mfaEnrollment:withdraw",va(e,t))}var ks=function(){function e(t){var n=this;mn(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ju._fromServerResponse(t.auth,e)})))}))}return kn(e,[{key:"getSession",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=vs,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=kt(mt().mark((function e(t,n){var r,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,La(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=kt(mt().mark((function e(t){var n,r,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,La(this.user,gs(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),bs=new WeakMap;var ws="__sak",xs=function(){function e(t,n){mn(this,e),this.storageRetriever=t,this.type=n}return kn(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ws,"1"),this.storage.removeItem(ws),Promise.resolve(!0)):Promise.resolve(!1)}catch(fE){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var _s=function(e){_n(n,e);var t=Tn(n);function n(){var e;return mn(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Fn();return no(e)||so(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=fo(),e._shouldAllowMigration=!0,e}return kn(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);lo()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=kt(mt().mark((function e(t,r){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Di(Sn(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=kt(mt().mark((function e(t){var r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Di(Sn(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Di(Sn(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(xs);_s.type="LOCAL";var Ss=_s,Is=function(e){_n(n,e);var t=Tn(n);function n(){return mn(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return kn(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(xs);Is.type="SESSION";var Es=Is;function Ts(e){return Promise.all(e.map(function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Cs=function(){function e(t){mn(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return kn(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=kt(mt().mark((function e(t){var n,r,i,a,o,u,s,c;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ts(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ns(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Cs.receivers=[];var As=function(){function e(t){mn(this,e),this.target=t,this.handlers=new Set}return kn(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=kt(mt().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Ns("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ds(){return window}function Os(){return"undefined"!==typeof Ds().WorkerGlobalScope&&"function"===typeof Ds().importScripts}function Ps(){return Rs.apply(this,arguments)}function Rs(){return(Rs=kt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Ls(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Ms="firebaseLocalStorageDb",Fs="firebaseLocalStorage",Us="fbase_key",js=function(){function e(t){mn(this,e),this.request=t}return kn(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Vs(e,t){return e.transaction([Fs],t?"readwrite":"readonly").objectStore(Fs)}function Bs(){var e=indexedDB.deleteDatabase(Ms);return new js(e).toPromise()}function zs(){var e=indexedDB.open(Ms,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Fs,{keyPath:Us})}catch(r){n(r)}})),e.addEventListener("success",kt(mt().mark((function n(){var r;return mt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Fs)){n.next=12;break}return r.close(),n.next=5,Bs();case 5:return n.t0=t,n.next=8,zs();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function qs(e,t,n){return Ks.apply(this,arguments)}function Ks(){return Ks=kt(mt().mark((function e(t,n,r){var i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vs(t,!0).put((Ee(i={},Us,n),Ee(i,"value",r),i)),e.abrupt("return",new js(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ks.apply(this,arguments)}function Gs(e,t){return Ws.apply(this,arguments)}function Ws(){return Ws=kt(mt().mark((function e(t,n){var r,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vs(t,!1).get(n),e.next=3,new js(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Ws.apply(this,arguments)}function Hs(e,t){var n=Vs(e,!0).delete(t);return new js(n).toPromise()}var Qs=function(){function e(){mn(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return kn(e,[{key:"_openDb",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,zs();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=kt(mt().mark((function e(t){var n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Os()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=kt(mt().mark((function e(){var t=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Cs._getInstance(Os()?self:null),this.receiver._subscribe("keyChanged",function(){var e=kt(mt().mark((function e(n,r){var i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=kt(mt().mark((function e(){var t,n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ps();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new As(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ls()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=kt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,zs();case 5:return t=e.sent,e.next=8,qs(t,ws,"1");case 8:return e.next=10,Hs(t,ws);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=kt(mt().mark((function e(t,n){var r=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return qs(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Gs(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=kt(mt().mark((function e(t){var n=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Hs(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=kt(mt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Vs(e,!1).getAll();return new js(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=bn(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(kt(mt().mark((function t(){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Qs.type="LOCAL";var $s=Qs;function Js(e,t){return ya(e,"POST","/v2/accounts/mfaSignIn:start",va(e,t))}function Ys(e){return Xs.apply(this,arguments)}function Xs(){return Xs=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ya(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Xs.apply(this,arguments)}function Zs(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Xi("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function ec(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var tc=1e12,nc=function(){function e(t){mn(this,e),this.auth=t,this.counter=tc,this._widgets=new Map}return kn(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new rc(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||tc;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||tc;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=kt(mt().mark((function e(t){var n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||tc,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),rc=function(){function e(t,n,r){var i=this;mn(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;na(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return kn(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var ic=ec("rcb"),ac=new la(3e4,6e4),oc="https://www.google.com/recaptcha/api.js?",uc=function(){function e(){mn(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ds().grecaptcha}return kn(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return na(sc(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ds().grecaptcha):new Promise((function(r,i){var a=Ds().setTimeout((function(){i(Xi(e,"network-request-failed"))}),ac.get());Ds()[ic]=function(){Ds().clearTimeout(a),delete Ds()[ic];var o=Ds().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Xi(e,"internal-error"))},Zs("".concat(oc,"?").concat(Yn({onload:ic,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Xi(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Ds().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function sc(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var cc=function(){function e(){mn(this,e)}return kn(e,[{key:"load",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new nc(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),lc="recaptcha",fc={theme:"light",type:"image"},hc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},fc),r=arguments.length>2?arguments[2]:void 0;mn(this,e),this.parameters=n,this.type=lc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yo(r),this.isInvisible="invisible"===this.parameters.size,na("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;na(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cc:new uc,this.validateStartingState()}return kn(e,[{key:"verify",value:function(){var e=kt(mt().mark((function e(){var t,n,r,i=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){na(!this.parameters.sitekey,this.auth,"argument-error"),na(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),na("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ds()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){na(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=kt(mt().mark((function e(){var t,n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=kt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return na(sa()&&!Os(),this.auth,"internal-error"),e.next=3,dc();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ys(this.auth);case 8:na(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return na(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function dc(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var pc=function(){function e(t,n){mn(this,e),this.verificationId=t,this.onConfirmation=n}return kn(e,[{key:"confirm",value:function(e){var t=eu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function vc(){return vc=kt(mt().mark((function e(t,n,r){var i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yo(t),e.next=3,kc(i,n,rr(r));case 3:return a=e.sent,e.abrupt("return",new pc(a,(function(e){return Au(i,e)})));case 5:case"end":return e.stop()}}),e)}))),vc.apply(this,arguments)}function yc(e,t,n){return mc.apply(this,arguments)}function mc(){return(mc=kt(mt().mark((function e(t,n,r){var i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rr(t),e.next=3,Su(!1,i,"phone");case 3:return e.next=5,kc(i.auth,n,rr(r));case 5:return a=e.sent,e.abrupt("return",new pc(a,(function(e){return Ou(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gc(){return(gc=kt(mt().mark((function e(t,n,r){var i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rr(t),e.next=3,kc(i.auth,n,rr(r));case 3:return a=e.sent,e.abrupt("return",new pc(a,(function(e){return Ru(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kc(e,t,n){return bc.apply(this,arguments)}function bc(){return bc=kt(mt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,na("string"===typeof a,t,"argument-error"),na(r.type===lc,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return na("enroll"===u.type,t,"internal-error"),e.next=13,ms(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return na("signin"===u.type,t,"internal-error"),na(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Js(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Qo(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),bc.apply(this,arguments)}function wc(){return(wc=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xu(rr(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xc=function(){function e(t){mn(this,e),this.providerId=e.PROVIDER_ID,this.auth=yo(t)}return kn(e,[{key:"verifyPhoneNumber",value:function(e,t){return kc(this.auth,e,rr(t))}}],[{key:"credential",value:function(e,t){return eu._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?eu._fromTokenResponse(n,r):null}}]),e}();function _c(e,t){return t?oa(t):(na(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}xc.PROVIDER_ID="phone",xc.PHONE_SIGN_IN_METHOD="phone";var Sc=function(e){_n(n,e);var t=Tn(n);function n(e){var r;return mn(this,n),(r=t.call(this,"custom","custom")).params=e,r}return kn(n,[{key:"_getIdTokenResponse",value:function(e){return Go(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Go(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Go(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(wo);function Ic(e){return Cu(e.auth,new Sc(e),e.bypassAuthState)}function Ec(e){var t=e.auth,n=e.user;return na(n,t,"internal-error"),Eu(n,new Sc(e),e.bypassAuthState)}function Tc(e){return Cc.apply(this,arguments)}function Cc(){return Cc=kt(mt().mark((function e(t){var n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,na(r=t.user,n,"internal-error"),e.abrupt("return",xu(r,new Sc(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Cc.apply(this,arguments)}var Nc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];mn(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return kn(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=kt(mt().mark((function t(n,r){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=kt(mt().mark((function e(t){var n,r,i,a,o,u,s;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ic;case"linkViaPopup":case"linkViaRedirect":return Tc;case"reauthViaPopup":case"reauthViaRedirect":return Ec;default:Yi(this.auth,"internal-error")}}},{key:"resolve",value:function(e){ia(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){ia(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Ac=new la(2e3,1e4);function Dc(e,t,n){return Oc.apply(this,arguments)}function Oc(){return Oc=kt(mt().mark((function e(t,n,r){var i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yo(t),ea(t,n,ru),a=_c(i,r),o=new Mc(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Oc.apply(this,arguments)}function Pc(){return(Pc=kt(mt().mark((function e(t,n,r){var i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ea((i=rr(t)).auth,n,ru),a=_c(i.auth,r),o=new Mc(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rc(e,t,n){return Lc.apply(this,arguments)}function Lc(){return(Lc=kt(mt().mark((function e(t,n,r){var i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ea((i=rr(t)).auth,n,ru),a=_c(i.auth,r),o=new Mc(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mc=function(e){_n(n,e);var t=Tn(n);function n(e,r,i,a,o){var u;return mn(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=wn(u),u}return kn(n,[{key:"executeNotNull",value:function(){var e=kt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return na(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=kt(mt().mark((function e(){var t,n=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ia(1===this.filter.length,"Popup operations only handle one event"),t=Ns(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Xi(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Xi(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Xi(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Ac.get())}()}}]),n}(Nc);Mc.currentPopupAction=null;var Fc=new Map,Uc=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return mn(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return kn(n,[{key:"execute",value:function(){var e=kt(mt().mark((function e(){var t,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Fc.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,jc(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Di(Sn(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Fc.set(this.auth._key(),t);case 21:return this.bypassAuthState||Fc.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=kt(mt().mark((function e(t){var r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Di(Sn(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Di(Sn(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Nc);function jc(e,t){return Vc.apply(this,arguments)}function Vc(){return Vc=kt(mt().mark((function e(t,n){var r,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gc(n),i=Kc(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Vc.apply(this,arguments)}function Bc(e,t){return zc.apply(this,arguments)}function zc(){return zc=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kc(t)._set(Gc(n),"true"));case 1:case"end":return e.stop()}}),e)}))),zc.apply(this,arguments)}function qc(e,t){Fc.set(e._key(),t)}function Kc(e){return oa(e._redirectPersistence)}function Gc(e){return Xa("pendingRedirect",e.config.apiKey,e.name)}function Wc(e,t,n){return function(e,t,n){return Hc.apply(this,arguments)}(e,t,n)}function Hc(){return Hc=kt(mt().mark((function e(t,n,r){var i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yo(t),ea(t,n,ru),a=_c(i,r),e.next=5,Bc(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Hc.apply(this,arguments)}function Qc(e,t,n){return function(e,t,n){return $c.apply(this,arguments)}(e,t,n)}function $c(){return($c=kt(mt().mark((function e(t,n,r){var i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ea((i=rr(t)).auth,n,ru),a=_c(i.auth,r),e.next=5,Bc(a,i.auth);case 5:return e.next=7,nl(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jc(e,t,n){return function(e,t,n){return Yc.apply(this,arguments)}(e,t,n)}function Yc(){return(Yc=kt(mt().mark((function e(t,n,r){var i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ea((i=rr(t)).auth,n,ru),a=_c(i.auth,r),e.next=5,Su(!1,i,n.providerId);case 5:return e.next=7,Bc(a,i.auth);case 7:return e.next=9,nl(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xc(e,t){return Zc.apply(this,arguments)}function Zc(){return Zc=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yo(t)._initializationPromise;case 2:return e.abrupt("return",el(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Zc.apply(this,arguments)}function el(e,t){return tl.apply(this,arguments)}function tl(){return tl=kt(mt().mark((function e(t,n){var r,i,a,o,u,s=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=yo(t),a=_c(i,n),o=new Uc(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),tl.apply(this,arguments)}function nl(e){return rl.apply(this,arguments)}function rl(){return(rl=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ns("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var il=function(){function e(t){mn(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return kn(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ol(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ol(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Xi(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(al(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(al(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function al(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function ol(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ul(e){return sl.apply(this,arguments)}function sl(){return sl=kt(mt().mark((function e(t){var n,r=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",ya(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),sl.apply(this,arguments)}var cl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ll=/^https?/;function fl(){return fl=kt(mt().mark((function e(t){var n,r,i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ul(t);case 4:n=e.sent,r=n.authorizedDomains,i=bn(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!hl(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Yi(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),fl.apply(this,arguments)}function hl(e){var t=ua(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ll.test(r))return!1;if(cl.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var dl=new la(3e4,6e4);function pl(){var e=Ds().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ar(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var vl=null;function yl(e){return vl=vl||function(e){return new Promise((function(t,n){var r,i,a;function o(){pl(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){pl(),n(Xi(e,"network-request-failed"))},timeout:dl.get()})}if(null===(i=null===(r=Ds().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ds().gapi)||void 0===a?void 0:a.load)){var u=ec("iframefcb");return Ds()[u]=function(){gapi.load?o():n(Xi(e,"network-request-failed"))},Zs("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw vl=null,e}))}(e),vl}var ml=new la(5e3,15e3),gl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bl(e){var t=e.config;na(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?fa(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Zr},i=kl.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Yn(r).slice(1))}function wl(e){return xl.apply(this,arguments)}function xl(){return xl=kt(mt().mark((function e(t){var n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yl(t);case 2:return n=e.sent,na(r=Ds().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:bl(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gl,dontclear:!0},(function(e){return new Promise(function(){var n=kt(mt().mark((function n(r,i){var a,o,u;return mt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Ds().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Xi(t,"network-request-failed"),o=Ds().setTimeout((function(){i(a)}),ml.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),xl.apply(this,arguments)}var _l={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Sl="_blank",Il="http://localhost",El=function(){function e(t){mn(this,e),this.window=t,this.associatedEvent=null}return kn(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Tl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},_l),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Fn().toLowerCase();n&&(u=ro(c)?Sl:n),to(c)&&(t=t||Il,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=St(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(co(c)&&"_self"!==u)return Cl(t||"",u),new El(null);var f=window.open(t||"",u,l);na(f,e,"popup-blocked");try{f.focus()}catch(h){}return new El(f)}function Cl(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Nl="__/auth/handler",Al="emulator/auth/handler";function Dl(e,t,n,r,i,a){na(e.config.authDomain,e,"auth-domain-config-required"),na(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Zr,eventId:i};if(t instanceof ru){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=St(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof iu){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Nl);return fa(t,Al)}(e),"?").concat(Yn(d).slice(1))}var Ol="webStorageSupport",Pl=function(){function e(){mn(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Es,this._completeRedirectFn=el,this._overrideRedirectResult=qc}return kn(e,[{key:"_openPopup",value:function(){var e=kt(mt().mark((function e(t,n,r,i){var a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ia(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Dl(t,n,r,ua(),i),e.abrupt("return",Tl(t,o,Ns()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=kt(mt().mark((function e(t,n,r,i){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Dl(t,n,r,ua(),i),Ds().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(ia(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=kt(mt().mark((function e(t){var n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wl(t);case 2:return n=e.sent,r=new il(t),n.register("authEvent",(function(e){return na(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Ol,{type:Ol},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Yi(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return fl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return fo()||no()||so()}}]),e}(),Rl=Pl,Ll=function(){function e(t){mn(this,e),this.factorId=t}return kn(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ra("unexpected MultiFactorSessionType")}}}]),e}(),Ml=function(e){_n(n,e);var t=Tn(n);function n(e){var r;return mn(this,n),(r=t.call(this,"phone")).credential=e,r}return kn(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return ya(e,"POST","/v2/accounts/mfaEnrollment:finalize",va(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return ya(e,"POST","/v2/accounts/mfaSignIn:finalize",va(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Ll),Fl=function(){function e(){mn(this,e)}return kn(e,null,[{key:"assertion",value:function(e){return Ml._fromCredential(e)}}]),e}();Fl.FACTOR_ID="phone";var Ul,jl="@firebase/auth",Vl="0.20.3",Bl=function(){function e(t){mn(this,e),this.auth=t,this.internalListeners=new Map}return kn(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){na(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function zl(){return window}Ul="Browser",Wr(new or("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){na(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),na(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Ul,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ho(Ul)},i=new vo(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(oa);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Wr(new or("auth-internal",(function(e){return function(e){return new Bl(e)}(yo(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ai(jl,Vl,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ul)),ai(jl,Vl,"esm2017");function ql(e,t,n){return Kl.apply(this,arguments)}function Kl(){return Kl=kt(mt().mark((function e(t,n,r){var i,a,o,u,s;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=zl(),o=a.BuildInfo,ia(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Jl(n.sessionId);case 4:return u=e.sent,s={},so()?s.ibi=o.packageName:ao()?s.apn=o.packageName:Yi(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Dl(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Kl.apply(this,arguments)}function Gl(){return Gl=kt(mt().mark((function e(t){var n,r,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zl(),r=n.BuildInfo,i={},so()?i.iosBundleId=r.packageName:ao()?i.androidPackageName=r.packageName:Yi(t,"operation-not-supported-in-this-environment"),e.next=5,ul(t,i);case 5:case"end":return e.stop()}}),e)}))),Gl.apply(this,arguments)}function Wl(e){var t=zl().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Hl(e,t,n){return Ql.apply(this,arguments)}function Ql(){return Ql=kt(mt().mark((function e(t,n,r){var i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zl(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Xi(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ao()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Ql.apply(this,arguments)}function $l(e){var t,n,r,i,a,o,u,s,c,l,f=zl();na("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),na("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),na("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),na("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),na("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Jl(e){return Yl.apply(this,arguments)}function Yl(){return(Yl=kt(mt().mark((function e(t){var n,r,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Xl(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xl(e){if(ia(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Zl=function(e){_n(n,e);var t=Tn(n);function n(){var e;return mn(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return kn(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Di(Sn(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(il);function ef(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:of(),postBody:null,tenantId:e.tenantId,error:Xi(e,"no-auth-event")}}function tf(e,t){return uf()._set(sf(e),t)}function nf(e){return rf.apply(this,arguments)}function rf(){return rf=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uf()._get(sf(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,uf()._remove(sf(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),rf.apply(this,arguments)}function af(e,t){var n,r,i=function(e){var t=cf(e),n=t.link?decodeURIComponent(t.link):void 0,r=cf(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return cf(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=cf(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Xi(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function of(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function uf(){return oa(Ss)}function sf(e){return Xa("authEvent",e.config.apiKey,e.name)}function cf(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=bt(t=n)||ir(t)||xt(t)||_t();r[0];return Xn(r.slice(1).join("?"))}var lf=function(){function e(){mn(this,e),this._redirectPersistence=Es,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=el,this._overrideRedirectResult=qc}return kn(e,[{key:"_initialize",value:function(){var e=kt(mt().mark((function e(t){var n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Zl(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Yi(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=kt(mt().mark((function e(t,n,r,i){var a,o,u,s;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $l(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Fc.clear(),e.next=10,this._originValidation(t);case 10:return o=ef(t,r,i),e.next=13,tf(t,o);case 13:return e.next=15,ql(t,o,n);case 15:return u=e.sent,e.next=18,Wl(u);case 18:return s=e.sent,e.abrupt("return",Hl(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Gl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=zl(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(kt(mt().mark((function n(){return mt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,nf(e);case 2:t.onEvent(hf());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=kt(mt().mark((function n(r){var i,a;return mt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,nf(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=af(i,r.url)),t.onEvent(a||hf());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");zl().handleOpenURL=function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),ff=lf;function hf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Xi("no-auth-event")}}function df(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function pf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();return!("file:"!==df()&&"ionic:"!==df()&&"capacitor:"!==df()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function vf(){return zn()&&11===(null===document||void 0===document?void 0:document.documentMode)}function yf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();return/Edge\/\d+/.test(e)}function mf(){try{var e=self.localStorage,t=Ns();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn();return vf()||yf(e)}()||qn()}catch(n){return gf()&&qn()}return!1}function gf(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function kf(){return("http:"===df()||"https:"===df()||Vn()||pf())&&!(Bn()||jn())&&mf()&&!gf()}function bf(){return pf()&&"undefined"!==typeof document}function wf(){return xf.apply(this,arguments)}function xf(){return(xf=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bf()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _f={LOCAL:"local",NONE:"none",SESSION:"session"},Sf=na,If="persistence";function Ef(e,t){Sf(Object.values(_f).includes(t),e,"invalid-persistence-type"),Bn()?Sf(t!==_f.SESSION,e,"unsupported-persistence-type"):jn()?Sf(t===_f.NONE,e,"unsupported-persistence-type"):gf()?Sf(t===_f.NONE||t===_f.LOCAL&&qn(),e,"unsupported-persistence-type"):Sf(t===_f.NONE||mf(),e,"unsupported-persistence-type")}function Tf(e){return Cf.apply(this,arguments)}function Cf(){return Cf=kt(mt().mark((function e(t){var n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Nf(),r=Xa(If,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Cf.apply(this,arguments)}function Nf(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Af=na,Df=function(){function e(){mn(this,e),this.browserResolver=oa(Rl),this.cordovaResolver=oa(ff),this.underlyingResolver=null,this._redirectPersistence=Es,this._completeRedirectFn=el,this._overrideRedirectResult=qc}return kn(e,[{key:"_initialize",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=kt(mt().mark((function e(t,n,r,i){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=kt(mt().mark((function e(t,n,r,i){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return bf()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Af(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=kt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wf();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Of(e){return e.unwrap()}function Pf(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Uf(e,function(e,t){var n,r=rr(e),i=t;return na(t.customData.operationType,r,"argument-error"),na(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ys._fromError(r,i)}(e,t));else if(r){var i=Rf(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Rf(e){var t=(e instanceof Kn?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Kn)&&"temporaryProof"in t&&"phoneNumber"in t)return xc.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Fi)return null;switch(r){case Mi:n=uu;break;case Ri:n=ou;break;case Li:n=su;break;case Ui:n=fu;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?cu._create(r,u):Ho._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new au(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Kn?n.credentialFromError(e):n.credentialFromResult(e)}function Lf(e,t){return t.catch((function(t){throw t instanceof Kn&&Pf(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Rf(t)),additionalUserInfo:ps(e),user:jf.getOrCreate(r)}}))}function Mf(e,t){return Ff.apply(this,arguments)}function Ff(){return Ff=kt(mt().mark((function e(t,n){var r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Lf(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Ff.apply(this,arguments)}var Uf=function(){function e(t,n){mn(this,e),this.resolver=n,this.auth=t.wrapped()}return kn(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Lf(Of(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),jf=function(){function e(t){mn(this,e),this._delegate=t,this.multiFactor=function(e){var t=rr(e);return bs.has(t)||bs.set(t,ks._fromUser(t)),bs.get(t)}(t)}return kn(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lf(this.auth,Ou(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mf(this.auth,yc(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lf(this.auth,Rc(this._delegate,t,Df)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tf(yo(this.auth));case 2:return e.abrupt("return",Jc(this._delegate,t,Df));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lf(this.auth,Ru(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Mf(this.auth,function(e,t,n){return gc.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Lf(this.auth,function(e,t,n){return Pc.apply(this,arguments)}(this._delegate,e,Df))}},{key:"reauthenticateWithRedirect",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tf(yo(this.auth));case 2:return e.abrupt("return",Qc(this._delegate,t,Df));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ts.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bu(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return os(rr(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return os(rr(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return wc.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return as.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ns.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();jf.USER_MAP=new WeakMap;var Vf=na,Bf=function(){function e(t,n){if(mn(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Vf(r,"invalid-api-key",{appName:t.name}),Vf(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Df:void 0;this._delegate=n.initialize({options:{persistence:qf(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Wi),this.linkUnderlyingAuth()}return kn(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?jf.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){go(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Ku.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Gu(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return qu.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lf(this._delegate,Qu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return es.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=tu.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=kt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vf(kf(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Xc(this._delegate,Df);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Lf(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){yo(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=zf(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=zf(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ju.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return zu.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=kt(mt().mark((function e(t){var n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ef(this._delegate,t),e.t0=t,e.next=e.t0===_f.SESSION?4:e.t0===_f.LOCAL?6:e.t0===_f.NONE?11:13;break;case 4:return n=Es,e.abrupt("break",14);case 6:return e.next=8,oa($s)._isAvailable();case 8:return r=e.sent,n=r?$s:Ss,e.abrupt("break",14);case 11:return n=Ya,e.abrupt("break",14);case 13:return e.abrupt("return",Yi("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Lf(this._delegate,function(e){return yu.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Lf(this._delegate,Au(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Lf(this._delegate,function(e,t){return Uu.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Lf(this._delegate,function(e,t,n){return Au(rr(e),nu.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Lf(this._delegate,function(e,t,n){return Yu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Mf(this._delegate,function(e,t,n){return vc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vf(kf(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Lf(this._delegate,Dc(this._delegate,t,Df)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vf(kf(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Tf(this._delegate);case 3:return e.abrupt("return",Wc(this._delegate,t,Df));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Hu.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function zf(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&jf.getOrCreate(e))},error:t,complete:n}}function qf(e,t){var n=function(e,t){var n=Nf();if(!n)return[];var r=Xa(If,e,t);switch(n.getItem(r)){case _f.NONE:return[Ya];case _f.LOCAL:return[$s,Es];case _f.SESSION:return[Es];default:return[]}}(e,t);if("undefined"===typeof self||n.includes($s)||n.push($s),"undefined"!==typeof window)for(var r=0,i=[Ss,Es];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Ya)||n.push(Ya),n}Bf.Persistence=_f;var Kf=function(){function e(){mn(this,e),this.providerId="phone",this._delegate=new xc(Of(Ni.auth()))}return kn(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return xc.credential(e,t)}}]),e}();Kf.PHONE_SIGN_IN_METHOD=xc.PHONE_SIGN_IN_METHOD,Kf.PROVIDER_ID=xc.PROVIDER_ID;var Gf=na,Wf=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ni.app();mn(this,e),Gf(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new hc(t,n,i.auth()),this.type=this._delegate.type}return kn(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new or("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Bf(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ji,PASSWORD_RESET:Vi,RECOVER_EMAIL:Bi,REVERT_SECOND_FACTOR_ADDITION:zi,VERIFY_AND_CHANGE_EMAIL:qi,VERIFY_EMAIL:Ki}},EmailAuthProvider:nu,FacebookAuthProvider:ou,GithubAuthProvider:su,GoogleAuthProvider:uu,OAuthProvider:au,SAMLAuthProvider:lu,PhoneAuthProvider:Kf,PhoneMultiFactorGenerator:Fl,RecaptchaVerifier:Wf,TwitterAuthProvider:fu,Auth:Bf,AuthCredential:wo,Error:Kn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.16")}(Ni);var Hf,Qf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},$f={},Jf=Jf||{},Yf=Qf||self;function Xf(){}function Zf(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function eh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var th="closure_uid_"+(1e9*Math.random()>>>0),nh=0;function rh(e,t,n){return e.call.apply(e.bind,arguments)}function ih(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ah(e,t,n){return(ah=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rh:ih).apply(null,arguments)}function oh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function uh(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function sh(){this.s=this.s,this.o=this.o}var ch={};sh.prototype.s=!1,sh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,th)&&e[th]||(e[th]=++nh)}(this);delete ch[e]}},sh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var lh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},fh=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function hh(e){return Array.prototype.concat.apply([],arguments)}function dh(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ph(e){return/^[\s\xa0]*$/.test(e)}var vh,yh=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function mh(e,t){return-1!=e.indexOf(t)}function gh(e,t){return e<t?-1:e>t?1:0}e:{var kh=Yf.navigator;if(kh){var bh=kh.userAgent;if(bh){vh=bh;break e}}vh=""}function wh(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function xh(e){var t={};for(var n in e)t[n]=e[n];return t}var _h="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sh(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<_h.length;a++)n=_h[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ih(e){return Ih[" "](e),e}Ih[" "]=Xf;var Eh,Th=mh(vh,"Opera"),Ch=mh(vh,"Trident")||mh(vh,"MSIE"),Nh=mh(vh,"Edge"),Ah=Nh||Ch,Dh=mh(vh,"Gecko")&&!(mh(vh.toLowerCase(),"webkit")&&!mh(vh,"Edge"))&&!(mh(vh,"Trident")||mh(vh,"MSIE"))&&!mh(vh,"Edge"),Oh=mh(vh.toLowerCase(),"webkit")&&!mh(vh,"Edge");function Ph(){var e=Yf.document;return e?e.documentMode:void 0}e:{var Rh="",Lh=function(){var e=vh;return Dh?/rv:([^\);]+)(\)|;)/.exec(e):Nh?/Edge\/([\d\.]+)/.exec(e):Ch?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Oh?/WebKit\/(\S+)/.exec(e):Th?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Lh&&(Rh=Lh?Lh[1]:""),Ch){var Mh=Ph();if(null!=Mh&&Mh>parseFloat(Rh)){Eh=String(Mh);break e}}Eh=Rh}var Fh,Uh={};function jh(){return function(e){var t=Uh;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=yh(String(Eh)).split("."),n=yh("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=gh(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||gh(0==a[2].length,0==o[2].length)||gh(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Yf.document&&Ch){var Vh=Ph();Fh=Vh||(parseInt(Eh,10)||void 0)}else Fh=void 0;var Bh=Fh,zh=function(){if(!Yf.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Yf.addEventListener("test",Xf,t),Yf.removeEventListener("test",Xf,t)}catch(P){}return e}();function qh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Kh(e,t){if(qh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Dh){e:{try{Ih(t.nodeName);var i=!0;break e}catch(O){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Gh[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Kh.Z.h.call(this)}}qh.prototype.h=function(){this.defaultPrevented=!0},uh(Kh,qh);var Gh={2:"touch",3:"pen",4:"mouse"};Kh.prototype.h=function(){Kh.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Wh="closure_listenable_"+(1e6*Math.random()|0),Hh=0;function Qh(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Hh,this.ca=this.fa=!1}function $h(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Jh(e){this.src=e,this.g={},this.h=0}function Yh(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=lh(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&($h(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Xh(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Jh.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Xh(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Qh(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Zh="closure_lm_"+(1e6*Math.random()|0),ed={};function td(e,t,n,r,i){if(r&&r.once)return rd(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)td(e,t[a],n,r,i);return null}return n=ld(n),e&&e[Wh]?e.N(t,n,eh(r)?!!r.capture:!!r,i):nd(e,t,n,!1,r,i)}function nd(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=eh(i)?!!i.capture:!!i,u=sd(e);if(u||(e[Zh]=u=new Jh(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ud;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)zh||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(od(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function rd(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)rd(e,t[a],n,r,i);return null}return n=ld(n),e&&e[Wh]?e.O(t,n,eh(r)?!!r.capture:!!r,i):nd(e,t,n,!0,r,i)}function id(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)id(e,t[a],n,r,i);else r=eh(r)?!!r.capture:!!r,n=ld(n),e&&e[Wh]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Xh(a=e.g[t],n,r,i))&&($h(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=sd(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Xh(t,n,r,i)),(n=-1<e?t[e]:null)&&ad(n))}function ad(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Wh])Yh(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(od(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=sd(t))?(Yh(n,e),0==n.h&&(n.src=null,t[Zh]=null)):$h(e)}}}function od(e){return e in ed?ed[e]:ed[e]="on"+e}function ud(e,t){if(e.ca)e=!0;else{t=new Kh(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&ad(e),e=n.call(r,t)}return e}function sd(e){return(e=e[Zh])instanceof Jh?e:null}var cd="__closure_events_fn_"+(1e9*Math.random()>>>0);function ld(e){return"function"===typeof e?e:(e[cd]||(e[cd]=function(t){return e.handleEvent(t)}),e[cd])}function fd(){sh.call(this),this.i=new Jh(this),this.P=this,this.I=null}function hd(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new qh(t,e);else if(t instanceof qh)t.target=t.target||e;else{var i=t;Sh(t=new qh(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=dd(o,r,!0,t)&&i}if(i=dd(o=t.g=e,r,!0,t)&&i,i=dd(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=dd(o=t.g=n[a],r,!1,t)&&i}function dd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Yh(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}uh(fd,sh),fd.prototype[Wh]=!0,fd.prototype.removeEventListener=function(e,t,n,r){id(this,e,t,n,r)},fd.prototype.M=function(){if(fd.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$h(n[r]);delete t.g[e],t.h--}}this.I=null},fd.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},fd.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var pd=Yf.JSON.stringify;function vd(){var e=_d,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var yd,md=function(){function e(){mn(this,e),this.h=this.g=null}return kn(e,[{key:"add",value:function(e,t){var n=gd.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),gd=new(function(){function e(t,n){mn(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return kn(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new kd}),(function(e){return e.reset()})),kd=function(){function e(){mn(this,e),this.next=this.g=this.h=null}return kn(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function bd(e){Yf.setTimeout((function(){throw e}),0)}function wd(e,t){yd||function(){var e=Yf.Promise.resolve(void 0);yd=function(){e.then(Sd)}}(),xd||(yd(),xd=!0),_d.add(e,t)}var xd=!1,_d=new md;function Sd(){for(var e;e=vd();){try{e.h.call(e.g)}catch(P){bd(P)}var t=gd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}xd=!1}function Id(e,t){fd.call(this),this.h=e||1,this.g=t||Yf,this.j=ah(this.kb,this),this.l=Date.now()}function Ed(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Td(e,t,n){if("function"===typeof e)n&&(e=ah(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ah(e.handleEvent,e)}return 2147483647<Number(t)?-1:Yf.setTimeout(e,t||0)}function Cd(e){e.g=Td((function(){e.g=null,e.i&&(e.i=!1,Cd(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}uh(Id,fd),(Hf=Id.prototype).da=!1,Hf.S=null,Hf.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),hd(this,"tick"),this.da&&(Ed(this),this.start()))}},Hf.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Hf.M=function(){Id.Z.M.call(this),Ed(this),delete this.g};var Nd=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return kn(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Cd(this)}},{key:"M",value:function(){Di(Sn(n.prototype),"M",this).call(this),this.g&&(Yf.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(sh);function Ad(e){sh.call(this),this.h=e,this.g={}}uh(Ad,sh);var Dd=[];function Od(e,t,n,r){Array.isArray(n)||(n&&(Dd[0]=n.toString()),n=Dd);for(var i=0;i<n.length;i++){var a=td(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Pd(e){wh(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ad(e)}),e),e.g={}}function Rd(){this.g=!0}function Ld(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return pd(n)}catch(I){return t}}(e,n)+(r?" "+r:"")}))}Ad.prototype.M=function(){Ad.Z.M.call(this),Pd(this)},Ad.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rd.prototype.Aa=function(){this.g=!1},Rd.prototype.info=function(){};var Md={},Fd=null;function Ud(){return Fd=Fd||new fd}function jd(e){qh.call(this,Md.Ma,e)}function Vd(e){var t=Ud();hd(t,new jd(t,e))}function Bd(e,t){qh.call(this,Md.STAT_EVENT,e),this.stat=t}function zd(e){var t=Ud();hd(t,new Bd(t,e))}function qd(e,t){qh.call(this,Md.Na,e),this.size=t}function Kd(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Yf.setTimeout((function(){e()}),t)}Md.Ma="serverreachability",uh(jd,qh),Md.STAT_EVENT="statevent",uh(Bd,qh),Md.Na="timingevent",uh(qd,qh);var Gd={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Wd={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Hd(){}function Qd(e){return e.h||(e.h=e.i())}function $d(){}Hd.prototype.h=null;var Jd,Yd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Xd(){qh.call(this,"d")}function Zd(){qh.call(this,"c")}function ep(){}function tp(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ad(this),this.P=rp,e=Ah?125:void 0,this.W=new Id(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new np}function np(){this.i=null,this.g="",this.h=!1}uh(Xd,qh),uh(Zd,qh),uh(ep,Hd),ep.prototype.g=function(){return new XMLHttpRequest},ep.prototype.i=function(){return{}},Jd=new ep;var rp=45e3,ip={},ap={};function op(e,t,n){e.K=1,e.v=Np(_p(t)),e.s=n,e.U=!0,up(e,null)}function up(e,t){e.F=Date.now(),fp(e),e.A=_p(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),zp(n.h,"t",r),e.C=0,n=e.l.H,e.h=new np,e.g=qv(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Nd(ah(e.Ia,e,e.g),e.O)),Od(e.V,e.g,"readystatechange",e.gb),t=e.H?xh(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Vd(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function sp(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function cp(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=lp(e,n))==ap){4==t&&(e.o=4,zd(14),i=!1),Ld(e.j,e.m,null,"[Incomplete Response]");break}if(r==ip){e.o=4,zd(15),Ld(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ld(e.j,e.m,r,null),yp(e,r)}sp(e)&&r!=ap&&r!=ip&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,zd(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Lv(t),t.L=!0,zd(11))):(Ld(e.j,e.m,n,"[Invalid Chunked Response]"),vp(e),pp(e))}function lp(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ap:(n=Number(t.substring(n,r)),isNaN(n)?ip:(r+=1)+n>t.length?ap:(t=t.substr(r,n),e.C=r+n,t))}function fp(e){e.Y=Date.now()+e.P,hp(e,e.P)}function hp(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Kd(ah(e.eb,e),t)}function dp(e){e.B&&(Yf.clearTimeout(e.B),e.B=null)}function pp(e){0==e.l.G||e.I||Uv(e.l,e)}function vp(e){dp(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ed(e.W),Pd(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function yp(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||$p(n.i,e)))if(n.I=e.N,!e.J&&$p(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Fv(n),Ev(n)}Rv(n),zd(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Kd(ah(n.ab,n),6e3));if(1>=Qp(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Vv(n,11)}else if((e.J||n.g==e)&&Fv(n),!ph(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(mh(l,"spdy")||mh(l,"quic")||mh(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Jp(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Cp(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=zv(r,r.H?r.la:null,r.W),d.J){Yp(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(dp(p),fp(p)),r.g=d}else Pv(r);0<n.l.length&&Nv(n)}else"stop"!=a[0]&&"close"!=a[0]||Vv(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Vv(n,7):Iv(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Vd(4)}catch(a){}}function mp(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Zf(e)||"string"===typeof e)fh(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Zf(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Zf(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function gp(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof gp)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function kp(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];bp(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)bp(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function bp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Hf=tp.prototype).setTimeout=function(e){this.P=e},Hf.gb=function(e){e=e.target;var t=this.L;t&&3==bv(e)?t.l():this.Ia(e)},Hf.Ia=function(e){try{if(e==this.g)e:{var t=bv(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Ah||this.g&&(this.h.h||this.g.ga()||wv(this.g)))){this.I||4!=t||7==n||Vd(8==n||0>=r?3:2),dp(this);var i=this.g.ba();this.N=i;t:if(sp(this)){var a=wv(this.g);e="";var o=a.length,u=4==bv(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){vp(this),pp(this);var s="";break t}this.h.i=new Yf.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ph(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,zd(12),vp(this),pp(this);break e}Ld(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,yp(this,i)}this.U?(cp(this,t,s),Ah&&this.i&&3==t&&(Od(this.V,this.W,"tick",this.fb),this.W.start())):(Ld(this.j,this.m,s,null),yp(this,s)),4==t&&vp(this),this.i&&!this.I&&(4==t?Uv(this.l,this):(this.i=!1,fp(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,zd(12)):(this.o=0,zd(13)),vp(this),pp(this)}}}catch(t){}},Hf.fb=function(){if(this.g){var e=bv(this.g),t=this.g.ga();this.C<t.length&&(dp(this),cp(this,e,t),this.i&&4!=e&&fp(this))}},Hf.cancel=function(){this.I=!0,vp(this)},Hf.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Vd(3),zd(17)),vp(this),this.o=2,pp(this)):hp(this,this.Y-e)},(Hf=gp.prototype).R=function(){kp(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Hf.T=function(){return kp(this),this.g.concat()},Hf.get=function(e,t){return bp(this.h,e)?this.h[e]:t},Hf.set=function(e,t){bp(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Hf.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var wp=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xp(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof xp){this.g=void 0!==t?t:e.g,Sp(this,e.j),this.s=e.s,Ip(this,e.i),Ep(this,e.m),this.l=e.l,t=e.h;var n=new Up;n.i=t.i,t.g&&(n.g=new gp(t.g),n.h=t.h),Tp(this,n),this.o=e.o}else e&&(n=String(e).match(wp))?(this.g=!!t,Sp(this,n[1]||"",!0),this.s=Ap(n[2]||""),Ip(this,n[3]||"",!0),Ep(this,n[4]),this.l=Ap(n[5]||"",!0),Tp(this,n[6]||"",!0),this.o=Ap(n[7]||"")):(this.g=!!t,this.h=new Up(null,this.g))}function _p(e){return new xp(e)}function Sp(e,t,n){e.j=n?Ap(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ip(e,t,n){e.i=n?Ap(t,!0):t}function Ep(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Tp(e,t,n){t instanceof Up?(e.h=t,function(e,t){t&&!e.j&&(jp(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Vp(this,t),zp(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Dp(t,Mp)),e.h=new Up(t,e.g))}function Cp(e,t,n){e.h.set(t,n)}function Np(e){return Cp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ap(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Dp(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Op),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Op(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}xp.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Dp(t,Pp,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Dp(t,Pp,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Dp(n,"/"==n.charAt(0)?Lp:Rp,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Dp(n,Fp)),e.join("")};var Pp=/[#\/\?@]/g,Rp=/[#\?:]/g,Lp=/[#\?]/g,Mp=/[#\?@]/g,Fp=/#/g;function Up(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function jp(e){e.g||(e.g=new gp,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Vp(e,t){jp(e),t=qp(e,t),bp(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,bp((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&kp(e)))}function Bp(e,t){return jp(e),t=qp(e,t),bp(e.g.h,t)}function zp(e,t,n){Vp(e,t),0<n.length&&(e.i=null,e.g.set(qp(e,t),dh(n)),e.h+=n.length)}function qp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Hf=Up.prototype).add=function(e,t){jp(this),this.i=null,e=qp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Hf.forEach=function(e,t){jp(this),this.g.forEach((function(n,r){fh(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Hf.T=function(){jp(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Hf.R=function(e){jp(this);var t=[];if("string"===typeof e)Bp(this,e)&&(t=hh(t,this.g.get(qp(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=hh(t,e[n])}return t},Hf.set=function(e,t){return jp(this),this.i=null,Bp(this,e=qp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Hf.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Hf.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Kp=kn((function e(t,n){mn(this,e),this.h=t,this.g=n}));function Gp(e){this.l=e||Wp,Yf.PerformanceNavigationTiming?e=0<(e=Yf.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Yf.g&&Yf.g.Ea&&Yf.g.Ea()&&Yf.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Wp=10;function Hp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qp(e){return e.h?1:e.g?e.g.size:0}function $p(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Jp(e,t){e.g?e.g.add(t):e.h=t}function Yp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xp(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=bn(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return dh(e.i)}function Zp(){}function ev(){this.g=new Zp}function tv(e,t,n){var r=n||"";try{mp(e,(function(e,n){var i=e;eh(e)&&(i=pd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function nv(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(O){}}function rv(e){this.l=e.$b||null,this.j=e.ib||!1}function iv(e,t){fd.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=av,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gp.prototype.cancel=function(){if(this.i=Xp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=bn(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Zp.prototype.stringify=function(e){return Yf.JSON.stringify(e,void 0)},Zp.prototype.parse=function(e){return Yf.JSON.parse(e,void 0)},uh(rv,Hd),rv.prototype.g=function(){return new iv(this.l,this.j)},rv.prototype.i=function(e){return function(){return e}}({}),uh(iv,fd);var av=0;function ov(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function uv(e){e.readyState=4,e.l=null,e.j=null,e.A=null,sv(e)}function sv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Hf=iv.prototype).open=function(e,t){if(this.readyState!=av)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,sv(this)},Hf.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Yf).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Hf.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,uv(this)),this.readyState=av},Hf.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,sv(this)),this.g&&(this.readyState=3,sv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Yf.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ov(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Hf.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?uv(this):sv(this),3==this.readyState&&ov(this)}},Hf.Ua=function(e){this.g&&(this.response=this.responseText=e,uv(this))},Hf.Ta=function(e){this.g&&(this.response=e,uv(this))},Hf.ha=function(){this.g&&uv(this)},Hf.setRequestHeader=function(e,t){this.v.append(e,t)},Hf.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Hf.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(iv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var cv=Yf.JSON.parse;function lv(e){fd.call(this),this.headers=new gp,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=fv,this.K=this.L=!1}uh(lv,fd);var fv="",hv=/^https?$/i,dv=["POST","PUT"];function pv(e){return"content-type"==e.toLowerCase()}function vv(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,yv(e),gv(e)}function yv(e){e.D||(e.D=!0,hd(e,"complete"),hd(e,"error"))}function mv(e){if(e.h&&"undefined"!=typeof Jf&&(!e.C[1]||4!=bv(e)||2!=e.ba()))if(e.v&&4==bv(e))Td(e.Fa,0,e);else if(hd(e,"readystatechange"),4==bv(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(wp)[1]||null;if(!a&&Yf.self&&Yf.self.location){var o=Yf.self.location.protocol;a=o.substr(0,o.length-1)}i=!hv.test(a?a.toLowerCase():"")}t=i}if(t)hd(e,"complete"),hd(e,"success");else{e.m=6;try{var u=2<bv(e)?e.g.statusText:""}catch(A){u=""}e.j=u+" ["+e.ba()+"]",yv(e)}}finally{gv(e)}}}function gv(e,t){if(e.g){kv(e);var n=e.g,r=e.C[0]?Xf:null;e.g=null,e.C=null,t||hd(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function kv(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Yf.clearTimeout(e.A),e.A=null)}function bv(e){return e.g?e.g.readyState:0}function wv(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case fv:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(B){return null}}function xv(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return wh(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Cp(e,t,n))}function _v(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Sv(e){this.za=0,this.l=[],this.h=new Rd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=_v("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=_v("baseRetryDelayMs",5e3,e),this.$a=_v("retryDelaySeedMs",1e4,e),this.Ya=_v("forwardChannelMaxRetries",2,e),this.ra=_v("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Gp(e&&e.concurrentRequestLimit),this.Ca=new ev,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Iv(e){if(Tv(e),3==e.G){var t=e.V++,n=_p(e.F);Cp(n,"SID",e.J),Cp(n,"RID",t),Cp(n,"TYPE","terminate"),Dv(e,n),(t=new tp(e,e.h,t,void 0)).K=2,t.v=Np(_p(n)),n=!1,Yf.navigator&&Yf.navigator.sendBeacon&&(n=Yf.navigator.sendBeacon(t.v.toString(),"")),!n&&Yf.Image&&((new Image).src=t.v,n=!0),n||(t.g=qv(t.l,null),t.g.ea(t.v)),t.F=Date.now(),fp(t)}Bv(e)}function Ev(e){e.g&&(Lv(e),e.g.cancel(),e.g=null)}function Tv(e){Ev(e),e.u&&(Yf.clearTimeout(e.u),e.u=null),Fv(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Yf.clearTimeout(e.m),e.m=null)}function Cv(e,t){e.l.push(new Kp(e.Za++,t)),3==e.G&&Nv(e)}function Nv(e){Hp(e.i)||e.m||(e.m=!0,wd(e.Ha,e),e.C=0)}function Av(e,t){var n;n=t?t.m:e.V++;var r=_p(e.F);Cp(r,"SID",e.J),Cp(r,"RID",n),Cp(r,"AID",e.U),Dv(e,r),e.o&&e.s&&xv(r,e.o,e.s),n=new tp(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Ov(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Jp(e.i,n),op(n,r,t)}function Dv(e,t){e.j&&mp({},(function(e,n){Cp(t,n,e)}))}function Ov(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ah(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{tv(l,o,"req"+c+"_")}catch(ue){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Pv(e){e.g||e.u||(e.Y=1,wd(e.Ga,e),e.A=0)}function Rv(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Kd(ah(e.Ga,e),jv(e,e.A)),e.A++,!0)}function Lv(e){null!=e.B&&(Yf.clearTimeout(e.B),e.B=null)}function Mv(e){e.g=new tp(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=_p(e.oa);Cp(t,"RID","rpc"),Cp(t,"SID",e.J),Cp(t,"CI",e.N?"0":"1"),Cp(t,"AID",e.U),Dv(e,t),Cp(t,"TYPE","xmlhttp"),e.o&&e.s&&xv(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Np(_p(t)),n.s=null,n.U=!0,up(n,e)}function Fv(e){null!=e.v&&(Yf.clearTimeout(e.v),e.v=null)}function Uv(e,t){var n=null;if(e.g==t){Fv(e),Lv(e),e.g=null;var r=2}else{if(!$p(e.i,t))return;n=t.D,Yp(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;hd(r=Ud(),new qd(r,n,t,i)),Nv(e)}else Pv(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Qp(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Kd(ah(e.Ha,e,t),jv(e,e.C)),e.C++,!0))}(e,t)||2==r&&Rv(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Vv(e,5);break;case 4:Vv(e,10);break;case 3:Vv(e,6);break;default:Vv(e,2)}}function jv(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Vv(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ah(e.jb,e);n||(n=new xp("//www.google.com/images/cleardot.gif"),Yf.location&&"http"==Yf.location.protocol||Sp(n,"https"),Np(n)),function(e,t){var n=new Rd;if(Yf.Image){var r=new Image;r.onload=oh(nv,n,r,"TestLoadImage: loaded",!0,t),r.onerror=oh(nv,n,r,"TestLoadImage: error",!1,t),r.onabort=oh(nv,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=oh(nv,n,r,"TestLoadImage: timeout",!1,t),Yf.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else zd(2);e.G=0,e.j&&e.j.va(t),Bv(e),Tv(e)}function Bv(e){e.G=0,e.I=-1,e.j&&(0==Xp(e.i).length&&0==e.l.length||(e.i.i.length=0,dh(e.l),e.l.length=0),e.j.ua())}function zv(e,t,n){var r=function(e){return e instanceof xp?_p(e):new xp(e,void 0)}(n);if(""!=r.i)t&&Ip(r,t+"."+r.i),Ep(r,r.m);else{var i=Yf.location;r=function(e,t,n,r){var i=new xp(null,void 0);return e&&Sp(i,e),t&&Ip(i,t),n&&Ep(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&wh(e.aa,(function(e,t){Cp(r,t,e)})),t=e.D,n=e.sa,t&&n&&Cp(r,t,n),Cp(r,"VER",e.ma),Dv(e,r),r}function qv(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new lv(new rv({ib:!0})):new lv(e.qa)).L=e.H,t}function Kv(){}function Gv(){if(Ch&&!(10<=Number(Bh)))throw Error("Environmental error: no available transport.")}function Wv(e,t){fd.call(this),this.g=new Sv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ph(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ph(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new $v(this)}function Hv(e){Xd.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Qv(){Zd.call(this),this.status=1}function $v(e){this.g=e}(Hf=lv.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Jd.g(),this.C=this.u?Qd(this.u):Qd(Jd),this.g.onreadystatechange=ah(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(O){return void vv(this,O)}e=n||"";var i=new gp(this.headers);r&&mp(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=pv,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Yf.FormData&&e instanceof Yf.FormData,!(0<=lh(dv,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kv(this),0<this.B&&((this.K=function(e){return Ch&&jh()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ah(this.pa,this)):this.A=Td(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(O){vv(this,O)}},Hf.pa=function(){"undefined"!=typeof Jf&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hd(this,"timeout"),this.abort(8))},Hf.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,hd(this,"complete"),hd(this,"abort"),gv(this))},Hf.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gv(this,!0)),lv.Z.M.call(this)},Hf.Fa=function(){this.s||(this.F||this.v||this.l?mv(this):this.cb())},Hf.cb=function(){mv(this)},Hf.ba=function(){try{return 2<bv(this)?this.g.status:-1}catch(D){return-1}},Hf.ga=function(){try{return this.g?this.g.responseText:""}catch(D){return""}},Hf.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),cv(t)}},Hf.Da=function(){return this.m},Hf.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Hf=Sv.prototype).ma=8,Hf.G=1,Hf.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(B){}},Hf.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new tp(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Sh(n=xh(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ov(this,t,r),Cp(i=_p(this.F),"RID",e),Cp(i,"CVER",22),this.D&&Cp(i,"X-HTTP-Session-Id",this.D),Dv(this,i),this.o&&n&&xv(i,this.o,n),Jp(this.i,t),this.Ra&&Cp(i,"TYPE","init"),this.ja?(Cp(i,"$req",r),Cp(i,"SID","null"),t.$=!0,op(t,i,null)):op(t,i,r),this.G=2}}else 3==this.G&&(e?Av(this,e):0==this.l.length||Hp(this.i)||Av(this))},Hf.Ga=function(){if(this.u=null,Mv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Kd(ah(this.bb,this),e)}},Hf.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,zd(10),Ev(this),Mv(this))},Hf.ab=function(){null!=this.v&&(this.v=null,Ev(this),Rv(this),zd(19))},Hf.jb=function(e){e?(this.h.info("Successfully pinged google.com"),zd(2)):(this.h.info("Failed to ping google.com"),zd(1))},(Hf=Kv.prototype).xa=function(){},Hf.wa=function(){},Hf.va=function(){},Hf.ua=function(){},Hf.Oa=function(){},Gv.prototype.g=function(e,t){return new Wv(e,t)},uh(Wv,fd),Wv.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),wd(ah(e.hb,e,t))),zd(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=zv(e,null,e.W),Nv(e)},Wv.prototype.close=function(){Iv(this.g)},Wv.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Cv(this.g,t)}else this.v?((t={}).__data__=pd(e),Cv(this.g,t)):Cv(this.g,e)},Wv.prototype.M=function(){this.g.j=null,delete this.j,Iv(this.g),delete this.g,Wv.Z.M.call(this)},uh(Hv,Xd),uh(Qv,Zd),uh($v,Kv),$v.prototype.xa=function(){hd(this.g,"a")},$v.prototype.wa=function(e){hd(this.g,new Hv(e))},$v.prototype.va=function(e){hd(this.g,new Qv(e))},$v.prototype.ua=function(){hd(this.g,"b")},Gv.prototype.createWebChannel=Gv.prototype.g,Wv.prototype.send=Wv.prototype.u,Wv.prototype.open=Wv.prototype.m,Wv.prototype.close=Wv.prototype.close,Gd.NO_ERROR=0,Gd.TIMEOUT=8,Gd.HTTP_ERROR=6,Wd.COMPLETE="complete",$d.EventType=Yd,Yd.OPEN="a",Yd.CLOSE="b",Yd.ERROR="c",Yd.MESSAGE="d",fd.prototype.listen=fd.prototype.N,lv.prototype.listenOnce=lv.prototype.O,lv.prototype.getLastError=lv.prototype.La,lv.prototype.getLastErrorCode=lv.prototype.Da,lv.prototype.getStatus=lv.prototype.ba,lv.prototype.getResponseJson=lv.prototype.Qa,lv.prototype.getResponseText=lv.prototype.ga,lv.prototype.send=lv.prototype.ea;var Jv=$f.createWebChannelTransport=function(){return new Gv},Yv=$f.getStatEventTarget=function(){return Ud()},Xv=$f.ErrorCode=Gd,Zv=$f.EventType=Wd,ey=$f.Event=Md,ty=$f.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ny=$f.FetchXmlHttpFactory=rv,ry=$f.WebChannel=$d,iy=$f.XhrIo=lv,ay="@firebase/firestore",oy=function(){function e(t){mn(this,e),this.uid=t}return kn(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();oy.UNAUTHENTICATED=new oy(null),oy.GOOGLE_CREDENTIALS=new oy("google-credentials-uid"),oy.FIRST_PARTY=new oy("first-party-uid"),oy.MOCK_USER=new oy("mock-user");var uy="9.8.3",sy=new mr("@firebase/firestore");function cy(){return sy.logLevel}function ly(e){if(sy.logLevel<=lr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dy);sy.debug.apply(sy,["Firestore (".concat(uy,"): ").concat(e)].concat(ar(i)))}}function fy(e){if(sy.logLevel<=lr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dy);sy.error.apply(sy,["Firestore (".concat(uy,"): ").concat(e)].concat(ar(i)))}}function hy(e){if(sy.logLevel<=lr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dy);sy.warn.apply(sy,["Firestore (".concat(uy,"): ").concat(e)].concat(ar(i)))}}function dy(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function py(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(uy,") INTERNAL ASSERTION FAILED: ")+e;throw fy(t),new Error(t)}function vy(e,t){e||py()}function yy(e,t){return e}var my={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},gy=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return kn(n)}(Kn),ky=kn((function e(){var t=this;mn(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),by=kn((function e(t,n){mn(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),wy=function(){function e(){mn(this,e)}return kn(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(oy.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),xy=function(){function e(t){mn(this,e),this.token=t,this.changeListener=null}return kn(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),_y=function(){function e(t){mn(this,e),this.t=t,this.currentUser=oy.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return kn(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ky;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ky,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){ly("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(ly("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ky)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ly("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(vy("string"==typeof n.accessToken),new by(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return vy(null===e||"string"==typeof e),new oy(e)}}]),e}(),Sy=kn((function e(t,n,r){mn(this,e),this.type="FirstParty",this.user=oy.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Iy=function(){function e(t,n,r){mn(this,e),this.h=t,this.l=n,this.m=r}return kn(e,[{key:"getToken",value:function(){return Promise.resolve(new Sy(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(oy.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ey=kn((function e(t){mn(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ty=function(){function e(t){mn(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return kn(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ly("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,ly("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ly("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):ly("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(vy("string"==typeof t.token),e.p=t.token,new Ey(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Cy(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ny=function(){function e(){mn(this,e)}return kn(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Cy(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ay(e,t){return e<t?-1:e>t?1:0}function Dy(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Oy(e){return e+"\0"}var Py=function(){function e(t,n){if(mn(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new gy(my.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new gy(my.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new gy(my.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new gy(my.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return kn(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ay(this.nanoseconds,e.nanoseconds):Ay(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ry=function(){function e(t){mn(this,e),this.timestamp=t}return kn(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Py(0,0))}},{key:"max",value:function(){return new e(new Py(253402300799,999999999))}}]),e}(),Ly=function(){function e(t,n,r){mn(this,e),void 0===n?n=0:n>t.length&&py(),void 0===r?r=t.length-n:r>t.length-n&&py(),this.segments=t,this.offset=n,this.len=r}return kn(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),My=function(e){_n(n,e);var t=Tn(n);function n(){return mn(this,n),t.apply(this,arguments)}return kn(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new gy(my.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ar(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ly),Fy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Uy=function(e){_n(n,e);var t=Tn(n);function n(){return mn(this,n),t.apply(this,arguments)}return kn(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Fy.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new gy(my.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new gy(my.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new gy(my.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new gy(my.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ly),jy=function(){function e(t){mn(this,e),this.path=t}return kn(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===My.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(My.fromString(t))}},{key:"fromName",value:function(t){return new e(My.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(My.emptyPath())}},{key:"comparator",value:function(e,t){return My.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new My(t.slice()))}}]),e}(),Vy=kn((function e(t,n,r,i){mn(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function By(e){return e.fields.find((function(e){return 2===e.kind}))}function zy(e){return e.fields.filter((function(e){return 2!==e.kind}))}Vy.UNKNOWN_ID=-1;var qy=kn((function e(t,n){mn(this,e),this.fieldPath=t,this.kind=n})),Ky=function(){function e(t,n){mn(this,e),this.sequenceNumber=t,this.offset=n}return kn(e,null,[{key:"empty",value:function(){return new e(0,Hy.min())}}]),e}();function Gy(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ry.fromTimestamp(1e9===r?new Py(n+1,0):new Py(n,r));return new Hy(i,jy.empty(),t)}function Wy(e){return new Hy(e.readTime,e.key,-1)}var Hy=function(){function e(t,n,r){mn(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return kn(e,null,[{key:"min",value:function(){return new e(Ry.min(),jy.empty(),-1)}},{key:"max",value:function(){return new e(Ry.max(),jy.empty(),-1)}}]),e}();function Qy(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=jy.comparator(e.documentKey,t.documentKey))?n:Ay(e.largestBatchId,t.largestBatchId)}var $y="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jy=function(){function e(){mn(this,e),this.onCommittedListeners=[]}return kn(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Yy(e){return Xy.apply(this,arguments)}function Xy(){return Xy=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===my.FAILED_PRECONDITION&&t.message===$y){e.next=2;break}throw t;case 2:ly("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Xy.apply(this,arguments)}var Zy=function(){function e(t){var n=this;mn(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return kn(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&py(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=bn(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),em=function(){function e(t,n){var r=this;mn(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new ky,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new rm(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=sm(e.target.error);r.T.reject(new rm(t,n))}}return kn(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(ly("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new am(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new rm(n,t)}}}]),e}(),tm=function(){function e(t,n,r){mn(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(Fn())&&fy("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return kn(e,[{key:"k",value:function(){var e=kt(mt().mark((function e(t){var n=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ly("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new rm(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new gy(my.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new gy(my.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new rm(t,n))},i.onupgradeneeded=function(e){ly("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.O(t,i.transaction,e.oldVersion,n.version).next((function(){ly("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.M&&(this.db.onversionchange=function(e){return n.M(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.M=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=kt(mt().mark((function e(t,n,r,i){var a,o,u,s,c=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(mt().mark((function e(){var n,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.k(t);case 2:return c.db=e.sent,n=em.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),Zy.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,ly("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ly("SimpleDb","Removing database:",e),om(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!qn())return!1;if(e.S())return!0;var t=Fn(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,React_App_Stripe_Key:"pk_test_51LDOrbSGySChMEHWYTgQPECgOu6anyrcwTNm3UVJ5tJIGn5eDEOFODsFKnNJHsj4T3dDtyfEDtsfr0zGVoA4RL8r00xG1ZQV7R"})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),nm=function(){function e(t){mn(this,e),this.$=t,this.B=!1,this.L=null}return kn(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return om(this.$.delete())}}]),e}(),rm=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this,my.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return kn(n)}(gy);function im(e){return"IndexedDbTransactionError"===e.name}var am=function(){function e(t){mn(this,e),this.store=t}return kn(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ly("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ly("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),om(n)}},{key:"add",value:function(e){return ly("SimpleDb","ADD",this.store.name,e,e),om(this.store.add(e))}},{key:"get",value:function(e){var t=this;return om(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ly("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ly("SimpleDb","DELETE",this.store.name,e),om(this.store.delete(e))}},{key:"count",value:function(){return ly("SimpleDb","COUNT",this.store.name),om(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Zy((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Zy((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){ly("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new Zy((function(n,r){t.onerror=function(e){var t=sm(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new Zy((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new nm(i),o=t(i.primaryKey,i.value,a);if(o instanceof Zy){var u=o.catch((function(e){return a.done(),Zy.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Zy.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function om(e){return new Zy((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=sm(e.target.error);n(t)}}))}var um=!1;function sm(e){var t=tm.v(Fn());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new gy("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return um||(um=!0,setTimeout((function(){throw r}),0)),r}}return e}var cm=function(){function e(t,n){mn(this,e),this.asyncQueue=t,this.X=n,this.task=null}return kn(e,[{key:"start",value:function(){}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;ly("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=ly,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!im(e.t4)){e.next=17;break}ly("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Yy(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),lm=function(){function e(t,n){mn(this,e),this.localStore=t,this.persistence=n}return kn(e,[{key:"tt",value:function(){var e=kt(mt().mark((function e(){var t,n=this,r=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Zy.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return ly("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return ly("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Wy(t);Qy(r,n)>0&&(n=r)})),new Hy(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),fm=function(){function e(t,n){var r=this;mn(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return kn(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function hm(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function dm(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function pm(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}fm.ot=-1;var vm=function(){function e(t,n){mn(this,e),this.comparator=t,this.root=n||mm.EMPTY}return kn(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,mm.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,mm.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ym(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ym(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ym(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ym(this.root,e,this.comparator,!0)}}]),e}(),ym=function(){function e(t,n,r,i){mn(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return kn(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),mm=function(){function e(t,n,r,i,a){mn(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return kn(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw py();if(this.right.isRed())throw py();var e=this.left.check();if(e!==this.right.check())throw py();return e+(this.isRed()?0:1)}}]),e}();mm.EMPTY=null,mm.RED=!0,mm.BLACK=!1,mm.EMPTY=new(function(){function e(){mn(this,e),this.size=0}return kn(e,[{key:"key",get:function(){throw py()}},{key:"value",get:function(){throw py()}},{key:"color",get:function(){throw py()}},{key:"left",get:function(){throw py()}},{key:"right",get:function(){throw py()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new mm(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var gm=function(){function e(t){mn(this,e),this.comparator=t,this.data=new vm(this.comparator)}return kn(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new km(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new km(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),km=function(){function e(t){mn(this,e),this.iter=t}return kn(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function bm(e){return e.hasNext()?e.getNext():void 0}var wm=function(){function e(t){mn(this,e),this.fields=t,t.sort(Uy.comparator)}return kn(e,[{key:"unionWith",value:function(t){var n,r=new gm(Uy.comparator),i=bn(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=bn(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=bn(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Dy(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var xm=function(e){function t(e){mn(this,t),this.binaryString=e}return kn(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ay(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();xm.EMPTY_BYTE_STRING=new xm("");var _m=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sm(e){if(vy(!!e),"string"==typeof e){var t=0,n=_m.exec(e);if(vy(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Im(e.seconds),nanos:Im(e.nanos)}}function Im(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Em(e){return"string"==typeof e?xm.fromBase64String(e):xm.fromUint8Array(e)}function Tm(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Cm(e){var t=e.mapValue.fields.__previous_value__;return Tm(t)?Cm(t):t}function Nm(e){var t=Sm(e.mapValue.fields.__local_write_time__.timestampValue);return new Py(t.seconds,t.nanos)}var Am=kn((function e(t,n,r,i,a,o,u,s){mn(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Dm=function(){function e(t,n){mn(this,e),this.projectId=t,this.database=n||"(default)"}return kn(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Om(e){return null==e}function Pm(e){return 0===e&&1/e==-1/0}function Rm(e){return"number"==typeof e&&Number.isInteger(e)&&!Pm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Lm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Mm={nullValue:"NULL_VALUE"};function Fm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tm(e)?4:Ym(e)?9007199254740991:10:py()}function Um(e,t){if(e===t)return!0;var n=Fm(e);if(n!==Fm(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Nm(e).isEqual(Nm(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Sm(e.timestampValue),r=Sm(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Em(e.bytesValue).isEqual(Em(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Im(e.geoPointValue.latitude)===Im(t.geoPointValue.latitude)&&Im(e.geoPointValue.longitude)===Im(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Im(e.integerValue)===Im(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Im(e.doubleValue),r=Im(t.doubleValue);return n===r?Pm(n)===Pm(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Dy(e.arrayValue.values||[],t.arrayValue.values||[],Um);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(hm(n)!==hm(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Um(n[i],r[i])))return!1;return!0}(e,t);default:return py()}}function jm(e,t){return void 0!==(e.values||[]).find((function(e){return Um(e,t)}))}function Vm(e,t){if(e===t)return 0;var n=Fm(e),r=Fm(t);if(n!==r)return Ay(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ay(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Im(e.integerValue||e.doubleValue),r=Im(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Bm(e.timestampValue,t.timestampValue);case 4:return Bm(Nm(e),Nm(t));case 5:return Ay(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Em(e),r=Em(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ay(n[i],r[i]);if(0!==a)return a}return Ay(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ay(Im(e.latitude),Im(t.latitude));return 0!==n?n:Ay(Im(e.longitude),Im(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Vm(n[i],r[i]);if(a)return a}return Ay(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Lm.mapValue&&t===Lm.mapValue)return 0;if(e===Lm.mapValue)return 1;if(t===Lm.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Ay(r[o],a[o]);if(0!==u)return u;var s=Vm(n[r[o]],i[a[o]]);if(0!==s)return s}return Ay(r.length,a.length)}(e.mapValue,t.mapValue);default:throw py()}}function Bm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ay(e,t);var n=Sm(e),r=Sm(t),i=Ay(n.seconds,r.seconds);return 0!==i?i:Ay(n.nanos,r.nanos)}function zm(e){return qm(e)}function qm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Sm(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Em(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,jy.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=bn(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=qm(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=bn(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(qm(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):py();var t,n}function Km(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Gm(e){return!!e&&"integerValue"in e}function Wm(e){return!!e&&"arrayValue"in e}function Hm(e){return!!e&&"nullValue"in e}function Qm(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function $m(e){return!!e&&"mapValue"in e}function Jm(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return dm(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Jm(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Jm(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Ym(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Xm(e){return"nullValue"in e?Mm:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Km(Dm.empty(),jy.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:py()}function Zm(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Km(Dm.empty(),jy.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Lm:py()}function eg(e,t){var n=Vm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function tg(e,t){var n=Vm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var ng=function(){function e(t){mn(this,e),this.value=t}return kn(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!$m(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jm(t)}},{key:"setAll",value:function(e){var t=this,n=Uy.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Jm(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());$m(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Um(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];$m(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){dm(t,(function(t,n){return e[t]=n}));var r,i=bn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Jm(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function rg(e){var t=[];return dm(e.fields,(function(e,n){var r=new Uy([e]);if($m(n)){var i=rg(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=bn(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new wm(t)}var ig=function(){function e(t,n,r,i,a,o){mn(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return kn(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ng.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ng.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Ry.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ry.min(),Ry.min(),ng.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Ry.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ry.min(),ng.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ry.min(),ng.empty(),2)}}]),e}(),ag=kn((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;mn(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function og(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new ag(e,t,n,r,i,a,o)}function ug(e){var t=yy(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+zm(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Om(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return zm(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return zm(e)})).join(",")),t.ut=n}return t.ut}function sg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Sg(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Um(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Eg(e.startAt,t.startAt)&&Eg(e.endAt,t.endAt)}function cg(e){return jy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function lg(e,t){return e.filters.filter((function(e){return e instanceof dg&&e.field.isEqual(t)}))}function fg(e,t,n){var r,i=Mm,a=!0,o=bn(lg(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Mm,c=!0;switch(u.op){case"<":case"<=":s=Xm(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Mm}eg({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];eg({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function hg(e,t,n){var r,i=Lm,a=!0,o=bn(lg(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Lm,c=!0;switch(u.op){case">=":case">":s=Zm(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Lm}tg({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];tg({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var dg=function(e){_n(n,e);var t=Tn(n);function n(e,r,i){var a;return mn(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return kn(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Vm(t,this.value)):null!==t&&Fm(this.value)===Fm(t)&&this.at(Vm(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return py()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new pg(e,t,r):"array-contains"===t?new gg(e,r):"in"===t?new kg(e,r):"not-in"===t?new bg(e,r):"array-contains-any"===t?new wg(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new vg(e,n):new yg(e,n)}}]),n}(function(){return kn((function e(){mn(this,e)}))}()),pg=function(e){_n(n,e);var t=Tn(n);function n(e,r,i){var a;return mn(this,n),(a=t.call(this,e,r,i)).key=jy.fromName(i.referenceValue),a}return kn(n,[{key:"matches",value:function(e){var t=jy.comparator(e.key,this.key);return this.at(t)}}]),n}(dg),vg=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this,e,"in",r)).keys=mg("in",r),i}return kn(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(dg),yg=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this,e,"not-in",r)).keys=mg("not-in",r),i}return kn(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(dg);function mg(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return jy.fromName(e.referenceValue)}))}var gg=function(e){_n(n,e);var t=Tn(n);function n(e,r){return mn(this,n),t.call(this,e,"array-contains",r)}return kn(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Wm(t)&&jm(t.arrayValue,this.value)}}]),n}(dg),kg=function(e){_n(n,e);var t=Tn(n);function n(e,r){return mn(this,n),t.call(this,e,"in",r)}return kn(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&jm(this.value.arrayValue,t)}}]),n}(dg),bg=function(e){_n(n,e);var t=Tn(n);function n(e,r){return mn(this,n),t.call(this,e,"not-in",r)}return kn(n,[{key:"matches",value:function(e){if(jm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!jm(this.value.arrayValue,t)}}]),n}(dg),wg=function(e){_n(n,e);var t=Tn(n);function n(e,r){return mn(this,n),t.call(this,e,"array-contains-any",r)}return kn(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Wm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return jm(t.value.arrayValue,e)}))}}]),n}(dg),xg=kn((function e(t,n){mn(this,e),this.position=t,this.inclusive=n})),_g=kn((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";mn(this,e),this.field=t,this.dir=n}));function Sg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ig(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?jy.comparator(jy.fromName(o.referenceValue),n.key):Vm(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Eg(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Um(e.position[n],t.position[n]))return!1;return!0}var Tg=kn((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;mn(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function Cg(e,t,n,r,i,a,o,u){return new Tg(e,t,n,r,i,a,o,u)}function Ng(e){return new Tg(e)}function Ag(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Dg(e){var t,n=bn(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Og(e){return null!==e.collectionGroup}function Pg(e){var t=yy(e);if(null===t.lt){t.lt=[];var n=Dg(t),r=Ag(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new _g(n)),t.lt.push(new _g(Uy.keyField(),"asc"));else{var i,a=!1,o=bn(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new _g(Uy.keyField(),s))}}}return t.lt}function Rg(e){var t=yy(e);if(!t.ft)if("F"===t.limitType)t.ft=og(t.path,t.collectionGroup,Pg(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=bn(Pg(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new _g(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new xg(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new xg(t.startAt.position,t.startAt.inclusive):null;t.ft=og(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function Lg(e,t,n){return new Tg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Mg(e,t){return sg(Rg(e),Rg(t))&&e.limitType===t.limitType}function Fg(e){return"".concat(ug(Rg(e)),"|lt:").concat(e.limitType)}function Ug(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(zm(t.value));var t})).join(", "),"]")),Om(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return zm(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return zm(e)})).join(",")),"Target(".concat(t,")")}(Rg(e)),"; limitType=").concat(e.limitType,")")}function jg(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):jy.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=bn(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=bn(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Ig(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Pg(e),t))&&!(e.endAt&&!function(e,t,n){var r=Ig(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Pg(e),t))}(e,t)}function Vg(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Bg(e){return function(t,n){var r,i=!1,a=bn(Pg(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=zg(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function zg(e,t,n){var r=e.field.isKeyField()?jy.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Vm(r,i):py()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return py()}}function qg(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pm(t)?"-0":t}}function Kg(e){return{integerValue:""+e}}function Gg(e,t){return Rm(t)?Kg(t):qg(e,t)}var Wg=kn((function e(){mn(this,e),this._=void 0}));function Hg(e,t,n){return e instanceof Jg?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Yg?Xg(e,t):e instanceof Zg?ek(e,t):function(e,t){var n=$g(e,t),r=nk(n)+nk(e._t);return Gm(n)&&Gm(e._t)?Kg(r):qg(e.wt,r)}(e,t)}function Qg(e,t,n){return e instanceof Yg?Xg(e,t):e instanceof Zg?ek(e,t):n}function $g(e,t){return e instanceof tk?Gm(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Jg=function(e){_n(n,e);var t=Tn(n);function n(){return mn(this,n),t.apply(this,arguments)}return kn(n)}(Wg),Yg=function(e){_n(n,e);var t=Tn(n);function n(e){var r;return mn(this,n),(r=t.call(this)).elements=e,r}return kn(n)}(Wg);function Xg(e,t){var n,r=rk(t),i=bn(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Um(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Zg=function(e){_n(n,e);var t=Tn(n);function n(e){var r;return mn(this,n),(r=t.call(this)).elements=e,r}return kn(n)}(Wg);function ek(e,t){var n,r=rk(t),i=bn(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Um(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var tk=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this)).wt=e,i._t=r,i}return kn(n)}(Wg);function nk(e){return Im(e.integerValue||e.doubleValue)}function rk(e){return Wm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var ik=kn((function e(t,n){mn(this,e),this.field=t,this.transform=n}));var ak=kn((function e(t,n){mn(this,e),this.version=t,this.transformResults=n})),ok=function(){function e(t,n){mn(this,e),this.updateTime=t,this.exists=n}return kn(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function uk(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var sk=kn((function e(){mn(this,e)}));function ck(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new wk(e.key,ok.none()):new pk(e.key,e.data,ok.none());var n,r=e.data,i=ng.empty(),a=new gm(Uy.comparator),o=bn(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new vk(e.key,i,new wm(a.toArray()),ok.none())}function lk(e,t,n){e instanceof pk?function(e,t,n){var r=e.value.clone(),i=mk(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof vk?function(e,t,n){if(uk(e.precondition,t)){var r=mk(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(yk(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function fk(e,t,n,r){return e instanceof pk?function(e,t,n,r){if(!uk(e.precondition,t))return n;var i=e.value.clone(),a=gk(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof vk?function(e,t,n,r){if(!uk(e.precondition,t))return n;var i=gk(e.fieldTransforms,r,t),a=t.data;return a.setAll(yk(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return uk(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function hk(e,t){var n,r=null,i=bn(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=$g(a.transform,o||null);null!=u&&(null===r&&(r=ng.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function dk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Dy(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Yg&&t instanceof Yg||e instanceof Zg&&t instanceof Zg?Dy(e.elements,t.elements,Um):e instanceof tk&&t instanceof tk?Um(e._t,t._t):e instanceof Jg&&t instanceof Jg}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var pk=function(e){_n(n,e);var t=Tn(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return mn(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return kn(n,[{key:"getFieldMask",value:function(){return null}}]),n}(sk),vk=function(e){_n(n,e);var t=Tn(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return mn(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return kn(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(sk);function yk(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function mk(e,t,n){var r=new Map;vy(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Qg(o,u,n[i]))}return r}function gk(e,t,n){var r,i=new Map,a=bn(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Hg(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var kk,bk,wk=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return kn(n,[{key:"getFieldMask",value:function(){return null}}]),n}(sk),xk=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return kn(n,[{key:"getFieldMask",value:function(){return null}}]),n}(sk),_k=kn((function e(t){mn(this,e),this.count=t}));function Sk(e){switch(e){default:return py();case my.CANCELLED:case my.UNKNOWN:case my.DEADLINE_EXCEEDED:case my.RESOURCE_EXHAUSTED:case my.INTERNAL:case my.UNAVAILABLE:case my.UNAUTHENTICATED:return!1;case my.INVALID_ARGUMENT:case my.NOT_FOUND:case my.ALREADY_EXISTS:case my.PERMISSION_DENIED:case my.FAILED_PRECONDITION:case my.ABORTED:case my.OUT_OF_RANGE:case my.UNIMPLEMENTED:case my.DATA_LOSS:return!0}}function Ik(e){if(void 0===e)return fy("GRPC error has no .code"),my.UNKNOWN;switch(e){case kk.OK:return my.OK;case kk.CANCELLED:return my.CANCELLED;case kk.UNKNOWN:return my.UNKNOWN;case kk.DEADLINE_EXCEEDED:return my.DEADLINE_EXCEEDED;case kk.RESOURCE_EXHAUSTED:return my.RESOURCE_EXHAUSTED;case kk.INTERNAL:return my.INTERNAL;case kk.UNAVAILABLE:return my.UNAVAILABLE;case kk.UNAUTHENTICATED:return my.UNAUTHENTICATED;case kk.INVALID_ARGUMENT:return my.INVALID_ARGUMENT;case kk.NOT_FOUND:return my.NOT_FOUND;case kk.ALREADY_EXISTS:return my.ALREADY_EXISTS;case kk.PERMISSION_DENIED:return my.PERMISSION_DENIED;case kk.FAILED_PRECONDITION:return my.FAILED_PRECONDITION;case kk.ABORTED:return my.ABORTED;case kk.OUT_OF_RANGE:return my.OUT_OF_RANGE;case kk.UNIMPLEMENTED:return my.UNIMPLEMENTED;case kk.DATA_LOSS:return my.DATA_LOSS;default:return py()}}(bk=kk||(kk={}))[bk.OK=0]="OK",bk[bk.CANCELLED=1]="CANCELLED",bk[bk.UNKNOWN=2]="UNKNOWN",bk[bk.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bk[bk.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bk[bk.NOT_FOUND=5]="NOT_FOUND",bk[bk.ALREADY_EXISTS=6]="ALREADY_EXISTS",bk[bk.PERMISSION_DENIED=7]="PERMISSION_DENIED",bk[bk.UNAUTHENTICATED=16]="UNAUTHENTICATED",bk[bk.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bk[bk.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bk[bk.ABORTED=10]="ABORTED",bk[bk.OUT_OF_RANGE=11]="OUT_OF_RANGE",bk[bk.UNIMPLEMENTED=12]="UNIMPLEMENTED",bk[bk.INTERNAL=13]="INTERNAL",bk[bk.UNAVAILABLE=14]="UNAVAILABLE",bk[bk.DATA_LOSS=15]="DATA_LOSS";var Ek=function(){function e(t,n){mn(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return kn(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=bn(n);try{for(i.s();!(r=i.n()).done;){var a=St(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){dm(this.inner,(function(t,n){var r,i=bn(n);try{for(i.s();!(r=i.n()).done;){var a=St(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return pm(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Tk=new vm(jy.comparator);function Ck(){return Tk}var Nk=new vm(jy.comparator);function Ak(){for(var e=Nk,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Dk(e){var t=Nk;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Ok(){return Rk()}function Pk(){return Rk()}function Rk(){return new Ek((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Lk=new vm(jy.comparator),Mk=new gm(jy.comparator);function Fk(){for(var e=Mk,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Uk=new gm(Ay);function jk(){return Uk}var Vk=function(){function e(t,n,r,i,a){mn(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return kn(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Bk.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ry.min(),r,jk(),Ck(),Fk())}}]),e}(),Bk=function(){function e(t,n,r,i,a){mn(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return kn(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(xm.EMPTY_BYTE_STRING,n,Fk(),Fk(),Fk())}}]),e}(),zk=kn((function e(t,n,r,i){mn(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),qk=kn((function e(t,n){mn(this,e),this.targetId=t,this.It=n})),Kk=kn((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xm.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;mn(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Gk=function(){function e(){mn(this,e),this.Tt=0,this.Et=Qk(),this.At=xm.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return kn(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=Fk(),t=Fk(),n=Fk();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:py()}})),new Bk(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=Qk()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),Wk=function(){function e(t){mn(this,e),this.Mt=t,this.Ft=new Map,this.$t=Ck(),this.Bt=Hk(),this.Lt=new gm(Ay)}return kn(e,[{key:"Ut",value:function(e){var t,n=bn(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=bn(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:py()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(cg(i))if(0===n){var a=new jy(i.path);this.Kt(t,a,ig.newNoDocument(a,Ry.min()))}else vy(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&cg(a.target)){var o=new jy(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,ig.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=Fk();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new Vk(e,n,this.Lt,this.$t,r);return this.$t=Ck(),this.Bt=Hk(),this.Lt=new gm(Ay),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new Gk,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new gm(Ay),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||ly("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new Gk),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Hk(){return new vm(jy.comparator)}function Qk(){return new vm(jy.comparator)}var $k={asc:"ASCENDING",desc:"DESCENDING"},Jk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yk=kn((function e(t,n){mn(this,e),this.databaseId=t,this.dt=n}));function Xk(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Zk(e,t){return e.dt?t.toBase64():t.toUint8Array()}function eb(e,t){return Xk(e,t.toTimestamp())}function tb(e){return vy(!!e),Ry.fromTimestamp(function(e){var t=Sm(e);return new Py(t.seconds,t.nanos)}(e))}function nb(e,t){return function(e){return new My(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function rb(e){var t=My.fromString(e);return vy(Eb(t)),t}function ib(e,t){return nb(e.databaseId,t.path)}function ab(e,t){var n=rb(t);if(n.get(1)!==e.databaseId.projectId)throw new gy(my.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new gy(my.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new jy(cb(n))}function ob(e,t){return nb(e.databaseId,t)}function ub(e){var t=rb(e);return 4===t.length?My.emptyPath():cb(t)}function sb(e){return new My(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function cb(e){return vy(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function lb(e,t,n){return{name:ib(e,t),fields:n.value.mapValue.fields}}function fb(e,t,n){var r=ab(e,t.name),i=tb(t.updateTime),a=new ng({mapValue:{fields:t.fields}}),o=ig.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function hb(e,t){return"found"in t?function(e,t){vy(!!t.found),t.found.name,t.found.updateTime;var n=ab(e,t.found.name),r=tb(t.found.updateTime),i=new ng({mapValue:{fields:t.found.fields}});return ig.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){vy(!!t.missing),vy(!!t.readTime);var n=ab(e,t.missing),r=tb(t.readTime);return ig.newNoDocument(n,r)}(e,t):py()}function db(e,t){var n;if(t instanceof pk)n={update:lb(e,t.key,t.value)};else if(t instanceof wk)n={delete:ib(e,t.key)};else if(t instanceof vk)n={update:lb(e,t.key,t.data),updateMask:Ib(t.fieldMask)};else{if(!(t instanceof xk))return py();n={verify:ib(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Jg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Yg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Zg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof tk)return{fieldPath:t.field.canonicalString(),increment:n._t};throw py()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:eb(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:py()}(e,t.precondition)),n}function pb(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ok.updateTime(tb(e.updateTime)):void 0!==e.exists?ok.exists(e.exists):ok.none()}(t.currentDocument):ok.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)vy("REQUEST_TIME"===t.setToServerValue),n=new Jg;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Yg(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Zg(i)}else"increment"in t?n=new tk(e,t.increment):py();var a=Uy.fromServerFormat(t.fieldPath);return new ik(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=ab(e,t.update.name),a=new ng({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new wm(t.map((function(e){return Uy.fromServerFormat(e)})))}(t.updateMask);return new vk(i,a,o,n,r)}return new pk(i,a,n,r)}if(t.delete){var u=ab(e,t.delete);return new wk(u,n)}if(t.verify){var s=ab(e,t.verify);return new xk(s,n)}return py()}function vb(e,t){return{documents:[ob(e,t.path)]}}function yb(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ob(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ob(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Qm(e.value))return{unaryFilter:{field:wb(e.field),op:"IS_NAN"}};if(Hm(e.value))return{unaryFilter:{field:wb(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Qm(e.value))return{unaryFilter:{field:wb(e.field),op:"IS_NOT_NAN"}};if(Hm(e.value))return{unaryFilter:{field:wb(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wb(e.field),op:bb(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:wb(e.field),direction:kb(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||Om(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function mb(e){var t=ub(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){vy(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=gb(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new _g(xb(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Om(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new xg(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new xg(n,t)}(n.endAt)),Cg(t,i,u,o,s,"F",c,l)}function gb(e){return e?void 0!==e.unaryFilter?[Sb(e)]:void 0!==e.fieldFilter?[_b(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return gb(e)})).reduce((function(e,t){return e.concat(t)})):py():[]}function kb(e){return $k[e]}function bb(e){return Jk[e]}function wb(e){return{fieldPath:e.canonicalString()}}function xb(e){return Uy.fromServerFormat(e.fieldPath)}function _b(e){return dg.create(xb(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return py()}}(e.fieldFilter.op),e.fieldFilter.value)}function Sb(e){switch(e.unaryFilter.op){case"IS_NAN":var t=xb(e.unaryFilter.field);return dg.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=xb(e.unaryFilter.field);return dg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=xb(e.unaryFilter.field);return dg.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=xb(e.unaryFilter.field);return dg.create(i,"!=",{nullValue:"NULL_VALUE"});default:return py()}}function Ib(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Eb(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Tb(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Nb(t)),t=Cb(e.get(n),t);return Nb(t)}function Cb(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Nb(e){return e+"\x01\x01"}function Ab(e){var t=e.length;if(vy(t>=2),2===t)return vy("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),My.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&py(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:py()}a=o+2}return new My(r)}var Db=["userId","batchId"];function Ob(e,t){return[e,Tb(t)]}function Pb(e,t,n){return[e,Tb(t),n]}var Rb={},Lb=["prefixPath","collectionGroup","readTime","documentId"],Mb=["prefixPath","collectionGroup","documentId"],Fb=["collectionGroup","readTime","prefixPath","documentId"],Ub=["canonicalId","targetId"],jb=["targetId","path"],Vb=["path","targetId"],Bb=["collectionId","parent"],zb=["indexId","uid"],qb=["uid","sequenceNumber"],Kb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Gb=["indexId","uid","orderedDocumentKey"],Wb=["userId","collectionPath","documentId"],Hb=["userId","collectionPath","largestBatchId"],Qb=["userId","collectionGroup","largestBatchId"],$b=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Jb=[].concat(ar($b),["documentOverlays"]),Yb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xb=Yb,Zb=[].concat(Xb,["indexConfiguration","indexState","indexEntries"]),ew=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return kn(n)}(Jy);function tw(e,t){var n=yy(e);return tm.N(n.ee,t)}var nw=function(){function e(t,n,r,i){mn(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return kn(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&lk(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=bn(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=fk(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=bn(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=fk(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Pk();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=ck(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Ry.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Fk())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Dy(this.mutations,e.mutations,(function(e,t){return dk(e,t)}))&&Dy(this.baseMutations,e.baseMutations,(function(e,t){return dk(e,t)}))}}]),e}(),rw=function(){function e(t,n,r,i){mn(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return kn(e,null,[{key:"from",value:function(t,n,r){vy(t.mutations.length===r.length);for(var i=Lk,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),iw=function(){function e(t,n){mn(this,e),this.largestBatchId=t,this.mutation=n}return kn(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),aw=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ry.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ry.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:xm.EMPTY_BYTE_STRING;mn(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return kn(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),ow=kn((function e(t){mn(this,e),this.ne=t}));function uw(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:sw(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ib(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Xk(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:cw(t.version)};else{if(!t.isUnknownDocument())return py();r.unknownDocument={path:n.path.toArray(),version:cw(t.version)}}return r}function sw(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function cw(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function lw(e){var t=new Py(e.seconds,e.nanoseconds);return Ry.fromTimestamp(t)}function fw(e,t){for(var n=(t.baseMutations||[]).map((function(t){return pb(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return pb(e.ne,t)})),u=Py.fromMillis(t.localWriteTimeMs);return new nw(t.batchId,u,n,o)}function hw(e){var t,n,r=lw(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?lw(e.lastLimboFreeSnapshotVersion):Ry.min();return void 0!==e.query.documents?(vy(1===(n=e.query).documents.length),t=Rg(Ng(ub(n.documents[0])))):t=function(e){return Rg(mb(e))}(e.query),new aw(t,e.targetId,0,e.lastListenSequenceNumber,r,i,xm.fromBase64String(e.resumeToken))}function dw(e,t){var n,r=cw(t.snapshotVersion),i=cw(t.lastLimboFreeSnapshotVersion);n=cg(t.target)?vb(e.ne,t.target):yb(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ug(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function pw(e){var t=mb({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Lg(t,t.limit,"L"):t}function vw(e,t){return new iw(t.largestBatchId,pb(e.ne,t.overlayMutation))}function yw(e,t){var n=t.path.lastSegment();return[e,Tb(t.path.popLast()),n]}function mw(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:cw(r.readTime),documentKey:Tb(r.documentKey.path),largestBatchId:r.largestBatchId}}var gw=function(){function e(){mn(this,e)}return kn(e,[{key:"getBundleMetadata",value:function(e,t){return kw(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:lw(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return kw(e).put({bundleId:(n=t).id,createTime:cw(tb(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return bw(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:pw(t.bundledQuery),readTime:lw(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return bw(e).put(function(e){return{name:e.name,readTime:cw(tb(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function kw(e){return tw(e,"bundles")}function bw(e){return tw(e,"namedQueries")}var ww=function(){function e(t,n){mn(this,e),this.wt=t,this.userId=n}return kn(e,[{key:"getOverlay",value:function(e,t){var n=this;return xw(e).get(yw(this.userId,t)).next((function(e){return e?vw(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ok();return Zy.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new iw(t,a);i.push(r.ie(e,o))})),Zy.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Tb(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(xw(e).W("collectionPathOverlayIndex",i))})),Zy.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Ok(),a=Tb(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return xw(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=bn(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=vw(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Ok(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xw(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=vw(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return xw(e).put(function(e,t,n){var r=St(yw(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:db(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function xw(e){return tw(e,"documentOverlays")}var _w=function(){function e(){mn(this,e)}return kn(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Im(e.integerValue));else if("doubleValue"in e){var n=Im(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),Pm(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Em(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?Ym(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):py()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=bn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),jy.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function Sw(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Iw(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Sw(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}_w.ye=new _w;var Ew=function(){function e(){mn(this,e),this.buffer=new Uint8Array(1024),this.position=0}return kn(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=bn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=bn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=Iw(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=Iw(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Oe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Tw=function(){function e(t){mn(this,e),this.Me=t}return kn(e,[{key:"de",value:function(e){this.Me.pe(e)}},{key:"he",value:function(e){this.Me.be(e)}},{key:"ae",value:function(e){this.Me.ve(e)}},{key:"ue",value:function(){this.Me.Ce()}}]),e}(),Cw=function(){function e(t){mn(this,e),this.Me=t}return kn(e,[{key:"de",value:function(e){this.Me.Ee(e)}},{key:"he",value:function(e){this.Me.Pe(e)}},{key:"ae",value:function(e){this.Me.De(e)}},{key:"ue",value:function(){this.Me.Ne()}}]),e}(),Nw=function(){function e(){mn(this,e),this.Me=new Ew,this.Fe=new Tw(this.Me),this.$e=new Cw(this.Me)}return kn(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Oe",value:function(){return this.Me.Oe()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),Aw=function(){function e(t,n,r,i){mn(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return kn(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Dw(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Ow(e.arrayValue,t.arrayValue))?n:0!==(n=Ow(e.directionalValue,t.directionalValue))?n:jy.comparator(e.documentKey,t.documentKey)}function Ow(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Pw=function(){function e(t){mn(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=bn(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return kn(e,[{key:"Ge",value:function(e){var t=By(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=zy(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=bn(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Rw=function(){function e(){mn(this,e),this.ze=new Lw}return kn(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),Zy.resolve()}},{key:"getCollectionParents",value:function(e,t){return Zy.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Zy.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Zy.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Zy.resolve(null)}},{key:"getIndexType",value:function(e,t){return Zy.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Zy.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Zy.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Zy.resolve(Hy.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Zy.resolve(Hy.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Zy.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Zy.resolve()}}]),e}(),Lw=function(){function e(){mn(this,e),this.index={}}return kn(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new gm(My.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new gm(My.comparator)).toArray()}}]),e}(),Mw=new Uint8Array(0),Fw=function(){function e(t,n){mn(this,e),this.user=t,this.databaseId=n,this.He=new Lw,this.Je=new Ek((function(e){return ug(e)}),(function(e,t){return sg(e,t)})),this.uid=t.uid||""}return kn(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:Tb(i)};return Uw(e).put(a)}return Zy.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Oy(t),""],!1,!0);return Uw(e).K(r).next((function(e){var r,i=bn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Ab(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Vw(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Bw(e);return a.next((function(e){o.put(mw(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Vw(e),r=Bw(e),i=jw(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=jw(e),i=!0,a=new Map;return Zy.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Fk(),o=[];return Zy.forEach(a,(function(i,a){var u;ly("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(ug(t)));var s=function(e,t){var n=By(t);if(void 0===n)return null;var r,i=bn(lg(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=bn(zy(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=bn(lg(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=bn(zy(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?fg(e,o.fieldPath,e.startAt):hg(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new xg(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=bn(zy(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?hg(e,o.fieldPath,e.endAt):fg(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new xg(r,i)}(a,i),h=n.Ze(i,a,l),d=n.Ze(i,a,f),p=n.tn(i,a,c),v=n.en(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Zy.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=jy.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Zy.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.nn(t[s/c]):Mw,h=u.sn(e,f,n[s%c],r),d=u.rn(e,f,i[s%c],a),p=o.map((function(t){return u.sn(e,f,t,!0)}));l.push.apply(l,ar(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"sn",value:function(e,t,n,r){var i=new Aw(e,jy.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new Aw(e,jy.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new Pw(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=bn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Zy.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new gm(Uy.comparator),r=!1,i=bn(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=bn(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new Nw,i=bn(zy(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);_w.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Oe()}},{key:"nn",value:function(e){var t=new Nw;return _w.ye.re(e,t.Be(0)),t.Oe()}},{key:"un",value:function(e,t){var n=new Nw;return _w.ye.re(Km(this.databaseId,t),n.Be(function(e){var t=zy(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Oe()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Nw);var i,a=0,o=bn(zy(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=bn(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&Wm(c))r=this.an(r,s,c);else{var h=f.Be(s.kind);_w.ye.re(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Oe();return t}},{key:"an",value:function(e,t,n){var r,i=ar(e),a=[],o=bn(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=bn(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Nw;f.seed(l.Oe()),_w.ye.re(s,f.Be(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof dg&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Vw(e),i=Bw(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return Zy.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Ky(t.sequenceNumber,new Hy(lw(t.readTime),new jy(Ab(t.documentKey)),t.largestBatchId)):Ky.empty(),r=e.fields.map((function(e){var t=St(e,2),n=t[0],r=t[1];return new qy(Uy.fromServerFormat(n),r)}));return new Vy(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ay(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Vw(e),a=Bw(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Zy.forEach(t,(function(t){return a.put(mw(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Zy.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Zy.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Zy.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?Zy.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return jw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return jw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=jw(e),i=new gm(Dw);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new Aw(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new gm(Dw),r=this.on(t,e);if(null==r)return n;var i=By(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Wm(a)){var o,u=bn(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Aw(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Aw(t.indexId,e.key,Mw,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;ly("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=bm(a),s=bm(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=bm(o)):l?(i(u),u=bm(a)):(u=bm(a),s=bm(o))}}(r,i,Dw,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),Zy.waitFor(o)}},{key:"ln",value:function(e){var t=1;return Bw(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Dw(e,t)})).filter((function(e,t,n){return!t||0!==Dw(e,n[t-1])}));var r=[];r.push(e);var i,a=bn(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Dw(o,e),s=Dw(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Mw,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Mw,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(zw)}},{key:"getMinOffset",value:function(e,t){var n=this;return Zy.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||py()}))})).next(zw)}}]),e}();function Uw(e){return tw(e,"collectionParents")}function jw(e){return tw(e,"indexEntries")}function Vw(e){return tw(e,"indexConfiguration")}function Bw(e){return tw(e,"indexState")}function zw(e){vy(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Qy(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Hy(t.readTime,t.documentKey,n)}var qw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kw=function(){function e(t,n,r){mn(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return kn(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Gw(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){vy(1===u)})));var c,l=[],f=bn(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Pb(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Zy.waitFor(a).next((function(){return l}))}function Ww(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw py();t=e.noDocument}return JSON.stringify(t).length}Kw.DEFAULT_COLLECTION_PERCENTILE=10,Kw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kw.DEFAULT=new Kw(41943040,Kw.DEFAULT_COLLECTION_PERCENTILE,Kw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kw.DISABLED=new Kw(-1,0,0);var Hw=function(){function e(t,n,r,i){mn(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return kn(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $w(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Jw(e),o=$w(e);return o.add({}).next((function(u){vy("number"==typeof u);var s,c=new nw(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return db(e.ne,t)})),i=n.mutations.map((function(t){return db(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),f=[],h=new gm((function(e,t){return Ay(e.canonicalString(),t.canonicalString())})),d=bn(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Pb(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Rb))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),Zy.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return $w(e).get(t).next((function(e){return e?(vy(e.userId===n.userId),fw(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?Zy.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return $w(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(vy(t.batchId>=r),a=fw(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return $w(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $w(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return fw(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Ob(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Jw(e).J({range:i},(function(r,i,o){var u=St(r,3),s=u[0],c=u[1],l=u[2],f=Ab(c);if(s===n.userId&&t.path.isEqual(f))return $w(e).get(l).next((function(e){if(!e)throw py();vy(e.userId===n.userId),a.push(fw(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new gm(Ay),i=[];return t.forEach((function(t){var a=Ob(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Jw(e).J({range:o},(function(e,i,a){var o=St(e,3),u=o[0],s=o[1],c=o[2],l=Ab(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Zy.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Ob(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new gm(Ay);return Jw(e).J({range:o},(function(e,t,a){var o=St(e,3),s=o[0],c=o[1],l=o[2],f=Ab(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push($w(e).get(t).next((function(e){if(null===e)throw py();vy(e.userId===n.userId),r.push(fw(n.wt,e))})))})),Zy.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Gw(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),Zy.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Zy.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Jw(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Ab(e[1]);i.push(a)}else r.done()})).next((function(){vy(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Qw(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return Yw(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return vy(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Qw(e,t,n){var r=Ob(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Jw(e).J({range:a,H:!0},(function(e,n,r){var a=St(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function $w(e){return tw(e,"mutations")}function Jw(e){return tw(e,"documentMutations")}function Yw(e){return tw(e,"mutationQueues")}var Xw=function(){function e(t){mn(this,e),this.En=t}return kn(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),Zw=function(){function e(t,n){mn(this,e),this.referenceDelegate=t,this.wt=n}return kn(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new Xw(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return Ry.fromTimestamp(new Py(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return ex(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return vy(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return ex(e).J((function(o,u){var s=hw(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Zy.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return ex(e).J((function(e,n){var r=hw(n);t(r)}))}},{key:"bn",value:function(e){return tx(e).get("targetGlobalKey").next((function(e){return vy(null!==e),e}))}},{key:"Pn",value:function(e,t){return tx(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return ex(e).put(dw(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ug(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ex(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=hw(n);sg(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=nx(e);return t.forEach((function(t){var o=Tb(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Zy.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=nx(e);return Zy.forEach(t,(function(t){var a=Tb(t.path);return Zy.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=nx(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=nx(e),i=Fk();return r.J({range:n,H:!0},(function(e,t,n){var r=Ab(e[1]),a=new jy(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Tb(t.path),r=IDBKeyRange.bound([n],[Oy(n)],!1,!0),i=0;return nx(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=St(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return ex(e).get(t).next((function(e){return e?hw(e):null}))}}]),e}();function ex(e){return tw(e,"targets")}function tx(e){return tw(e,"targetGlobal")}function nx(e){return tw(e,"targetDocuments")}function rx(e,t){var n=St(e,2),r=n[0],i=n[1],a=St(t,2),o=a[0],u=a[1],s=Ay(r,o);return 0===s?Ay(i,u):s}var ix=function(){function e(t){mn(this,e),this.Sn=t,this.buffer=new gm(rx),this.Dn=0}return kn(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();rx(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),ax=function(){function e(t,n,r){mn(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return kn(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;ly("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!im(e.t0)){e.next=12;break}ly("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Yy(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),ox=function(){function e(t,n){mn(this,e),this.On=t,this.params=n}return kn(e,[{key:"calculateTargetCount",value:function(e,t){return this.On.Mn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Zy.resolve(fm.ot);var r=new ix(t);return this.On.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.On.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.On.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.On.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ly("LruGarbageCollector","Garbage collection skipped; disabled"),Zy.resolve(qw)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ly("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),qw):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.On.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ly("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),cy()<=lr.DEBUG&&ly("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Zy.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),ux=function(){function e(t,n){mn(this,e),this.db=t,this.garbageCollector=function(e,t){return new ox(e,t)}(this,n)}return kn(e,[{key:"Mn",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return sx(e,n)}},{key:"removeReference",value:function(e,t,n){return sx(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return sx(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return Yw(e).Y((function(r){return Qw(e,r,t).next((function(e){return e&&(n=!0),Zy.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Ry.min()),nx(e).delete([0,Tb(o.path)])}))}));i.push(s)}})).next((function(){return Zy.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return sx(e,t)}},{key:"Ln",value:function(e,t){var n,r=nx(e),i=fm.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=St(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==fm.ot&&t(new jy(Ab(n)),i),i=s,n=u):i=fm.ot})).next((function(){i!==fm.ot&&t(new jy(Ab(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function sx(e,t){return nx(e).put(function(e,t){return{targetId:0,path:Tb(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var cx=function(){function e(){mn(this,e),this.changes=new Ek((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return kn(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,ig.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Zy.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),lx=function(){function e(t){mn(this,e),this.wt=t}return kn(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return px(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return px(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],sw(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=ig.newInvalidDocument(t);return px(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(vx(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:ig.newInvalidDocument(t)};return px(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(vx(t))},(function(e,i){r={document:n.Kn(t,i),size:Ww(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Ck();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=Ck(),i=new vm(jy.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,Ww(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return Zy.resolve();var r=new gm(mx);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(vx(r.first()),vx(r.last())),a=r.getIterator(),o=a.getNext();return px(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=jy.fromSegments([].concat(ar(t.prefixPath),[t.collectionGroup,t.documentId]));o&&mx(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(vx(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),sw(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return px(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Ck(),i=bn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(jy.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Ck(),o=yx(t,n),u=yx(t,Hy.max());return px(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(jy.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new hx(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return dx(e).get("remoteDocumentGlobalKey").next((function(e){return vy(!!e),e}))}},{key:"qn",value:function(e,t){return dx(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=fb(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=jy.fromSegments(t.noDocument.path),i=lw(t.noDocument.readTime);n=ig.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return py();var a=jy.fromSegments(t.unknownDocument.path),o=lw(t.unknownDocument.version);n=ig.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Py(e[0],e[1]);return Ry.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(Ry.min()))return n}return ig.newInvalidDocument(e)}}]),e}();function fx(e){return new lx(e)}var hx=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new Ek((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return kn(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new gm((function(e,t){return Ay(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=uw(t.zn.wt,o);i=i.add(a.path.popLast());var c=Ww(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=uw(t.zn.wt,o.convertToNoDocument(Ry.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),Zy.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(cx);function dx(e){return tw(e,"remoteDocumentGlobal")}function px(e){return tw(e,"remoteDocumentsV14")}function vx(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function yx(e,t){var n=t.documentKey.path.toArray();return[e,sw(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function mx(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Ay(n[a],r[a]))return i;return(i=Ay(n.length,r.length))||((i=Ay(n[n.length-2],r[r.length-2]))||Ay(n[n.length-1],r[r.length-1]))}var gx=kn((function e(t,n){mn(this,e),this.overlayedDocument=t,this.mutatedFields=n})),kx=function(){function e(t,n,r,i){mn(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return kn(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&fk(r.mutation,e,wm.empty(),Py.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Fk()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fk(),i=Ok();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Ak();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Ok();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Fk())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Ck(),a=Rk(),o=Rk();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof vk)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),fk(o.mutation,t,o.mutation.getFieldMask(),Py.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new gx(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Rk(),i=new vm((function(e,t){return e-t})),a=Fk();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=bn(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||wm.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Fk()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Pk();c.forEach((function(e){if(!a.has(e)){var n=ck(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Zy.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return jy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Og(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Zy.resolve(Ok()),u=-1,s=a;return o.next((function(t){return Zy.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Zy.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Fk())})).next((function(e){return{batchId:u,changes:Dk(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new jy(t)).next((function(e){var t=Ak();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Ak();return this.indexManager.getCollectionParents(e,i).next((function(o){return Zy.forEach(o,(function(o){var u=function(e,t){return new Tg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,ig.newInvalidDocument(n)))}));var n=Ak();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&fk(a.mutation,i,wm.empty(),Py.now()),jg(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Zy.resolve(ig.newInvalidDocument(t))}}]),e}(),bx=function(){function e(t){mn(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return kn(e,[{key:"getBundleMetadata",value:function(e,t){return Zy.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:tb(n.createTime)}),Zy.resolve()}},{key:"getNamedQuery",value:function(e,t){return Zy.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:pw(e.bundledQuery),readTime:tb(e.readTime)}}(t)),Zy.resolve()}}]),e}(),wx=function(){function e(){mn(this,e),this.overlays=new vm(jy.comparator),this.Xn=new Map}return kn(e,[{key:"getOverlay",value:function(e,t){return Zy.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ok();return Zy.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),Zy.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),Zy.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Ok(),i=t.length+1,a=new jy(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Zy.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new vm((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Ok(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Ok(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Zy.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new iw(t,n));var a=this.Xn.get(t);void 0===a&&(a=Fk(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),xx=function(){function e(){mn(this,e),this.Zn=new gm(_x.ts),this.es=new gm(_x.ns)}return kn(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new _x(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new _x(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new jy(new My([])),r=new _x(n,e),i=new _x(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new jy(new My([])),n=new _x(t,e),r=new _x(t,e+1),i=Fk();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new _x(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),_x=function(){function e(t,n){mn(this,e),this.key=t,this.ls=n}return kn(e,null,[{key:"ts",value:function(e,t){return jy.comparator(e.key,t.key)||Ay(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Ay(e.ls,t.ls)||jy.comparator(e.key,t.key)}}]),e}(),Sx=function(){function e(t,n){mn(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new gm(_x.ts)}return kn(e,[{key:"checkEmpty",value:function(e){return Zy.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new nw(i,t,n,r);this.mutationQueue.push(a);var o,u=bn(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new _x(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Zy.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Zy.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return Zy.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Zy.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return Zy.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new _x(t,0),i=new _x(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),Zy.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new gm(Ay);return t.forEach((function(e){var t=new _x(e,0),i=new _x(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),Zy.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;jy.isDocumentKey(i)||(i=i.child(""));var a=new _x(new jy(i),0),o=new gm(Ay);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),Zy.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;vy(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return Zy.forEach(t.mutations,(function(i){var a=new _x(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new _x(t,0),r=this.ds.firstAfterOrEqual(n);return Zy.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Zy.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Ix=function(){function e(t){mn(this,e),this.ps=t,this.docs=new vm(jy.comparator),this.size=0}return kn(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Zy.resolve(n?n.document.mutableCopy():ig.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Ck();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():ig.newInvalidDocument(e))})),Zy.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Ck(),i=new jy(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Qy(Wy(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Zy.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){py()}},{key:"Is",value:function(e,t){return Zy.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Ex(this)}},{key:"getSize",value:function(e){return Zy.resolve(this.size)}}]),e}(),Ex=function(e){_n(n,e);var t=Tn(n);function n(e){var r;return mn(this,n),(r=t.call(this)).zn=e,r}return kn(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),Zy.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(cx),Tx=function(){function e(t){mn(this,e),this.persistence=t,this.Ts=new Ek((function(e){return ug(e)}),sg),this.lastRemoteSnapshotVersion=Ry.min(),this.highestTargetId=0,this.Es=0,this.As=new xx,this.targetCount=0,this.Rs=Xw.An()}return kn(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),Zy.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Zy.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Zy.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),Zy.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),Zy.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new Xw(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,Zy.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),Zy.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Zy.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Zy.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Zy.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return Zy.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),Zy.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Zy.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),Zy.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return Zy.resolve(n)}},{key:"containsKey",value:function(e,t){return Zy.resolve(this.As.containsKey(t))}}]),e}(),Cx=function(){function e(t,n){var r=this;mn(this,e),this.bs={},this.overlays={},this.Ps=new fm(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new Tx(this),this.indexManager=new Rw,this.remoteDocumentCache=new Ix((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new ow(n),this.Ds=new bx(this.wt)}return kn(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new wx,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new Sx(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;ly("MemoryPersistence","Starting transaction:",e);var i=new Nx(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return Zy.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Nx=function(e){_n(n,e);var t=Tn(n);function n(e){var r;return mn(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return kn(n)}(Jy),Ax=function(){function e(t){mn(this,e),this.persistence=t,this.ks=new xx,this.Os=null}return kn(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw py()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),Zy.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),Zy.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),Zy.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Zy.forEach(this.Fs,(function(r){var i=jy.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,Ry.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Zy.or([function(){return Zy.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}(),Dx=function(){function e(t){mn(this,e),this.wt=t}return kn(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new em("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Db,{unique:!0}),e.createObjectStore("documentMutations")}(e),Ox(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Zy.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Ox(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ry.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Db,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Zy.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Wb});t.createIndex("collectionPathOverlayIndex",Hb,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Qb,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Lb});t.createIndex("documentKeyIndex",Mb),t.createIndex("collectionGroupIndex",Fb)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:zb}).createIndex("sequenceNumberIndex",qb,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Kb}).createIndex("documentKeyIndex",Gb,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=Ww(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return Zy.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return Zy.forEach(r,(function(r){vy(r.userId===n.userId);var i=fw(t.wt,r);return Gw(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new My(n),o=function(e){return[0,Tb(e)]}(a);r.push(t.get(o).next((function(n){return n?Zy.resolve():function(n){return t.put({targetId:0,path:Tb(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Zy.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Bb});var n=t.store("collectionParents"),r=new Lw,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Tb(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new My(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=St(e,3),r=(n[0],n[1]),a=(n[2],Ab(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=hw(r),a=dw(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new jy(My.fromString(i.document.name).popFirst(5)):i.noDocument?jy.fromSegments(i.noDocument.path):i.unknownDocument?jy.fromSegments(i.unknownDocument.path):py()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Zy.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=fx(this.wt),a=new Cx(Ax.Ms,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Fk();fw(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Zy.forEach(r,(function(e,r){var o=new oy(r),u=ww.se(n.wt,o),s=a.getIndexManager(o),c=Hw.se(o,n.wt,s,a.referenceDelegate);return new kx(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new ew(t,fm.ot),e).next()}))}))}}]),e}();function Ox(e){e.createObjectStore("targetDocuments",{keyPath:jb}).createIndex("documentTargetsIndex",Vb,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ub,{unique:!0}),e.createObjectStore("targetGlobal")}var Px="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Rx=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:14;if(mn(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=l,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new gy(my.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ux(this,i),this.ei=n+"main",this.wt=new ow(s),this.ni=new tm(this.ei,this.Hs,new Dx(this.wt)),this.Vs=new Zw(this.referenceDelegate,this.wt),this.remoteDocumentCache=fx(this.wt),this.Ds=new gw,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&fy("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return kn(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new gy(my.FAILED_PRECONDITION,Px);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new fm(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=kt(mt().mark((function n(r){return mt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=kt(mt().mark((function t(n){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Mx(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(im(t))return ly("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ly("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return Lx(e).get("owner").next((function(e){return Zy.resolve(t.di(e))}))}},{key:"_i",value:function(e){return Mx(e).delete(this.clientId)}},{key:"wi",value:function(){var e=kt(mt().mark((function e(){var t,n,r,i,a=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=tw(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Zy.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=bn(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?Zy.resolve(!0):Lx(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new gy(my.FAILED_PRECONDITION,Px);return!1}}return!(!t.networkEnabled||!t.inForeground)||Mx(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ly("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=kt(mt().mark((function e(){var t=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new ew(e,fm.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Mx(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return Hw.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Fw(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return ww.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;ly("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?Zb:14===i?Xb:13===i?Yb:12===i?Jb:11===i?$b:void py();return this.ni.runTransaction(e,o,u,(function(i){return a=new ew(i,r.Ps?r.Ps.next():fm.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw fy("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new gy(my.FAILED_PRECONDITION,$y);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return Lx(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new gy(my.FAILED_PRECONDITION,Px)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lx(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=Lx(e);return n.get("owner").next((function(e){return t.di(e)?(ly("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Zy.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(fy("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!jn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return ly("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return fy("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(T){fy("Failed to set zombie client id.",T)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(T){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return tm.V()}}]),e}();function Lx(e){return tw(e,"owner")}function Mx(e){return tw(e,"clientMetadata")}function Fx(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Ux=function(){function e(t,n,r,i){mn(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return kn(e,null,[{key:"Vi",value:function(t,n){var r,i=Fk(),a=Fk(),o=bn(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),jx=function(){function e(){mn(this,e),this.Si=!1}return kn(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return Zy.resolve(null)}},{key:"xi",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Ry.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Oi(t,o,n,r)?i.Ni(e,t):(cy()<=lr.DEBUG&&ly("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ug(t)),i.Mi(e,o,t,Gy(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new gm(Bg(e));return t.forEach((function(t,r){jg(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return cy()<=lr.DEBUG&&ly("QueryEngine","Using full collection scan to execute query:",Ug(t)),this.Di.getDocumentsMatchingQuery(e,t,Hy.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Vx=function(){function e(t,n,r,i){mn(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new vm(Ay),this.Bi=new Ek((function(e){return ug(e)}),sg),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return kn(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kx(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function Bx(e,t,n,r){return new Vx(e,t,n,r)}function zx(e,t){return qx.apply(this,arguments)}function qx(){return qx=kt(mt().mark((function e(t,n){var r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yy(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Fk(),s=bn(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=bn(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=bn(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=bn(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),qx.apply(this,arguments)}function Kx(e,t){var n=yy(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Zy.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);vy(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Fk(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Gx(e){var t=yy(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function Wx(e,t){var n=yy(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(xm.EMPTY_BYTE_STRING,Ry.min()).withLastLimboFreeSnapshotVersion(Ry.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=Ck(),s=Fk();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Hx(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(Ry.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Zy.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function Hx(e,t,n){var r=Fk(),i=Fk();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Ck();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Ry.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ly("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function Qx(e,t){var n=yy(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function $x(e,t){var n=yy(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,Zy.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new aw(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function Jx(e,t,n){return Yx.apply(this,arguments)}function Yx(){return Yx=kt(mt().mark((function e(t,n,r){var i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=yy(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),im(e.t1)){e.next=12;break}throw e.t1;case 12:ly("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Yx.apply(this,arguments)}function Xx(e,t,n){var r=yy(e),i=Ry.min(),a=Fk();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=yy(e),i=r.Bi.get(n);return void 0!==i?Zy.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,Rg(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:Ry.min(),n?a:Fk())})).next((function(e){return t_(r,Vg(t),e),{documents:e,ji:a}}))}))}function Zx(e,t){var n=yy(e),r=yy(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function e_(e,t){var n=yy(e),r=n.Li.get(t)||Ry.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,Gy(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return t_(n,t,e),e}))}function t_(e,t,n){var r=Ry.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function n_(e,t,n,r){return r_.apply(this,arguments)}function r_(){return r_=kt(mt().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=yy(t),o=Fk(),u=Ck(),s=bn(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,$x(a,function(e){return Rg(Ng(My.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Hx(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),r_.apply(this,arguments)}function i_(e,t){return a_.apply(this,arguments)}function a_(){return a_=kt(mt().mark((function e(t,n){var r,i,a,o=arguments;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Fk(),e.next=3,$x(t,Rg(pw(n.bundledQuery)));case 3:return i=e.sent,a=yy(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=tb(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(xm.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),a_.apply(this,arguments)}function o_(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function u_(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function s_(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var c_=function(){function e(t,n,r,i){mn(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return kn(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new gy(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(fy("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),l_=function(){function e(t,n,r){mn(this,e),this.targetId=t,this.state=n,this.error=r}return kn(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new gy(i.error.code,i.error.message))),a?new e(t,i.state,r):(fy("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),f_=function(){function e(t,n){mn(this,e),this.clientId=t,this.activeTargetIds=n}return kn(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=jk(),o=0;i&&o<r.activeTargetIds.length;++o)i=Rm(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(fy("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),h_=function(){function e(t,n){mn(this,e),this.clientId=t,this.onlineState=n}return kn(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(fy("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),d_=function(){function e(){mn(this,e),this.activeTargetIds=jk()}return kn(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),p_=function(){function e(t,n,r,i,a){mn(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new vm(Ay),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=o_(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new d_),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return kn(e,[{key:"start",value:function(){var e=kt(mt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=bn(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(o_(this.persistenceKey,i)))&&(o=f_.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=bn(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(s_(this.persistenceKey,e));if(n){var r=l_.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(s_(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ly("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ly("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ly("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ly("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void fy("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(kt(mt().mark((function e(){var r,i,a,o,u,s,c;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=fm.ot;if(null!=e)try{var n=JSON.parse(e);vy("number"==typeof n),t=n}catch(e){fy("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==fm.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new c_(this.currentUser,e,t,n),i=u_(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=u_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=s_(this.persistenceKey,e),i=new l_(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return f_.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return c_.Ji(new oy(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return l_.Ji(r,t)}},{key:"wr",value:function(e){return h_.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:ly("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Mr(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=jk();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),v_=function(){function e(){mn(this,e),this.Fr=new d_,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return kn(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new d_,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),y_=function(){function e(){mn(this,e)}return kn(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),m_=function(){function e(){var t=this;mn(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return kn(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){ly("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=bn(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){ly("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=bn(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),g_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},k_=function(){function e(t){mn(this,e),this.jr=t.jr,this.Wr=t.Wr}return kn(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),b_=function(e){_n(n,e);var t=Tn(n);function n(e){var r;return mn(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return kn(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new iy;o.listenOnce(Zv.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Xv.NO_ERROR:var t=o.getResponseJson();ly("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Xv.TIMEOUT:ly("Connection",'RPC "'+e+'" timed out'),a(new gy(my.DEADLINE_EXCEEDED,"Request time out"));break;case Xv.HTTP_ERROR:var n=o.getStatus();if(ly("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(my).indexOf(t)>=0?t:my.UNKNOWN}(r.status);a(new gy(u,r.message))}else a(new gy(my.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new gy(my.UNAVAILABLE,"Connection failed."));break;default:py()}}finally{ly("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Jv(),a=Yv(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ny({})),this.uo(o.initMessageHeaders,t,n),Un()||Bn()||Fn().indexOf("Electron/")>=0||zn()||Fn().indexOf("MSAppHost/")>=0||Vn()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");ly("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new k_({jr:function(e){l?ly("Connection","Not sending because WebChannel is closed:",e):(c||(ly("Connection","Opening WebChannel transport."),s.open(),c=!0),ly("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,ry.EventType.OPEN,(function(){l||ly("Connection","WebChannel transport opened.")})),h(s,ry.EventType.CLOSE,(function(){l||(l=!0,ly("Connection","WebChannel transport closed"),f.eo())})),h(s,ry.EventType.ERROR,(function(e){l||(l=!0,hy("Connection","WebChannel transport errored:",e),f.eo(new gy(my.UNAVAILABLE,"The operation could not be completed")))})),h(s,ry.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];vy(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){ly("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=kk[e];if(void 0!==t)return Ik(t)}(a),u=i.message;void 0===o&&(o=my.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new gy(o,u)),s.close()}else ly("Connection","WebChannel received:",n),f.no(n)}})),h(a,ey.STAT_EVENT,(function(e){e.stat===ty.PROXY?ly("Connection","Detected buffering proxy"):e.stat===ty.NOPROXY&&ly("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){mn(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return kn(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);ly("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return ly("RestConnection","Received: ",e),e}),(function(t){throw hy("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+uy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=g_[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function w_(){return"undefined"!=typeof window?window:null}function x_(){return"undefined"!=typeof document?document:null}function __(e){return new Yk(e,!0)}var S_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;mn(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return kn(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&ly("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),I_=function(){function e(t,n,r,i,a,o,u,s){mn(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new S_(t,n)}return kn(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===my.RESOURCE_EXHAUSTED?(fy(n.toString()),fy("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===my.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=St(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new gy(my.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(kt(mt().mark((function t(){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return ly("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(ly("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),E_=function(e){_n(n,e);var t=Tn(n);function n(e,r,i,a,o,u){var s;return mn(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return kn(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:py()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(vy(void 0===t||"string"==typeof t),xm.fromBase64String(t||"")):(vy(void 0===t||t instanceof Uint8Array),xm.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?my.UNKNOWN:Ik(e.code);return new gy(t,e.message||"")}(o);n=new Kk(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=ab(e,s.document.name),l=tb(s.document.updateTime),f=new ng({mapValue:{fields:s.document.fields}}),h=ig.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new zk(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=ab(e,v.document),m=v.readTime?tb(v.readTime):Ry.min(),g=ig.newNoDocument(y,m),k=v.removedTargetIds||[];n=new zk([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=ab(e,b.document),x=b.removedTargetIds||[];n=new zk([],x,w,null)}else{if(!("filter"in t))return py();t.filter;var _=t.filter;_.targetId;var S=_.count||0,I=new _k(S),E=_.targetId;n=new qk(E,I)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return Ry.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ry.min():t.readTime?tb(t.readTime):Ry.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=sb(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=cg(r)?{documents:vb(e,r)}:{query:yb(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Zk(e,t.resumeToken):t.snapshotVersion.compareTo(Ry.min())>0&&(n.readTime=Xk(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return py()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=sb(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}(I_),T_=function(e){_n(n,e);var t=Tn(n);function n(e,r,i,a,o,u){var s;return mn(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return kn(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Di(Sn(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(vy(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(vy(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?tb(e.updateTime):tb(t);return n.isEqual(Ry.min())&&(n=tb(t)),new ak(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=tb(e.commitTime);return this.listener.Jo(n,t)}return vy(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=sb(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return db(t.wt,e)}))};this.Mo(n)}}]),n}(I_),C_=function(e){_n(n,e);var t=Tn(n);function n(e,r,i,a){var o;return mn(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return kn(n,[{key:"tu",value:function(){if(this.Zo)throw new gy(my.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=St(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===my.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new gy(my.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=St(i,2),o=a[0],u=a[1];return r.bo.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===my.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new gy(my.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return kn((function e(){mn(this,e)}))}()),N_=function(){function e(t,n){mn(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return kn(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(fy(t),this.su=!1):ly("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),A_=kn((function e(t,n,r,i,a){var o=this;mn(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=B_(o),!e.t0){e.next=5;break}return ly("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=yy(t)).lu.add(4),e.next=4,P_(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,D_(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new N_(r,i)}));function D_(e){return O_.apply(this,arguments)}function O_(){return O_=kt(mt().mark((function e(t){var n,r,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B_(t)){e.next=18;break}n=bn(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),O_.apply(this,arguments)}function P_(e){return R_.apply(this,arguments)}function R_(){return R_=kt(mt().mark((function e(t){var n,r,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=bn(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),R_.apply(this,arguments)}function L_(e,t){var n=yy(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),V_(n)?j_(n):yS(n).Co()&&F_(n,t))}function M_(e,t){var n=yy(e),r=yS(n);n.hu.delete(t),r.Co()&&U_(n,t),0===n.hu.size&&(r.Co()?r.ko():B_(n)&&n._u.set("Unknown"))}function F_(e,t){e.wu.Nt(t.targetId),yS(e).Qo(t)}function U_(e,t){e.wu.Nt(t),yS(e).jo(t)}function j_(e){e.wu=new Wk({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),yS(e).start(),e._u.iu()}function V_(e){return B_(e)&&!yS(e).Do()&&e.hu.size>0}function B_(e){return 0===yy(e).lu.size}function z_(e){e.wu=void 0}function q_(e){return K_.apply(this,arguments)}function K_(){return K_=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){F_(t,e)}));case 1:case"end":return e.stop()}}),e)}))),K_.apply(this,arguments)}function G_(e,t){return W_.apply(this,arguments)}function W_(){return W_=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z_(t),V_(t)?(t._u.uu(n),j_(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),W_.apply(this,arguments)}function H_(e,t,n){return Q_.apply(this,arguments)}function Q_(){return Q_=kt(mt().mark((function e(t,n,r){var i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Kk&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=kt(mt().mark((function e(t,n){var r,i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=bn(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ly("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,$_(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof zk?t.wu.Ut(n):n instanceof qk?t.wu.zt(n):t.wu.Gt(n),r.isEqual(Ry.min())){e.next=29;break}return e.prev=14,e.next=17,Gx(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(xm.EMPTY_BYTE_STRING,n.snapshotVersion)),U_(e,t);var r=new aw(n.target,t,1,n.sequenceNumber);F_(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ly("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,$_(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Q_.apply(this,arguments)}function $_(e,t,n){return J_.apply(this,arguments)}function J_(){return J_=kt(mt().mark((function e(t,n,r){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(im(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,P_(t);case 5:t._u.set("Offline"),r||(r=function(){return Gx(t.localStore)}),t.asyncQueue.enqueueRetryable(kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ly("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,D_(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),J_.apply(this,arguments)}function Y_(e,t){return t().catch((function(n){return $_(e,n,t)}))}function X_(e){return Z_.apply(this,arguments)}function Z_(){return Z_=kt(mt().mark((function e(t){var n,r,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=yy(t),r=mS(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!eS(n)){e.next=19;break}return e.prev=3,e.next=6,Qx(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,tS(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,$_(n,e.t0);case 17:e.next=2;break;case 19:nS(n)&&rS(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Z_.apply(this,arguments)}function eS(e){return B_(e)&&e.au.length<10}function tS(e,t){e.au.push(t);var n=mS(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function nS(e){return B_(e)&&!mS(e).Do()&&e.au.length>0}function rS(e){mS(e).start()}function iS(e){return aS.apply(this,arguments)}function aS(){return aS=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mS(t).Xo();case 1:case"end":return e.stop()}}),e)}))),aS.apply(this,arguments)}function oS(e){return uS.apply(this,arguments)}function uS(){return uS=kt(mt().mark((function e(t){var n,r,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=mS(t),r=bn(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),uS.apply(this,arguments)}function sS(e,t,n){return cS.apply(this,arguments)}function cS(){return cS=kt(mt().mark((function e(t,n,r){var i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=rw.from(i,n,r),e.next=3,Y_(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,X_(t);case 5:case"end":return e.stop()}}),e)}))),cS.apply(this,arguments)}function lS(e,t){return fS.apply(this,arguments)}function fS(){return fS=kt(mt().mark((function e(t,n){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&mS(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=kt(mt().mark((function e(t,n){var r,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Sk(i=n.code)||i===my.ABORTED){e.next=7;break}return r=t.au.shift(),mS(t).No(),e.next=5,Y_(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,X_(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:nS(t)&&rS(t);case 5:case"end":return e.stop()}}),e)}))),fS.apply(this,arguments)}function hS(e,t){return dS.apply(this,arguments)}function dS(){return dS=kt(mt().mark((function e(t,n){var r,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=yy(t)).asyncQueue.verifyOperationInProgress(),ly("RemoteStore","RemoteStore received new credentials"),i=B_(r),r.lu.add(3),e.next=6,P_(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,D_(r);case 12:case"end":return e.stop()}}),e)}))),dS.apply(this,arguments)}function pS(e,t){return vS.apply(this,arguments)}function vS(){return vS=kt(mt().mark((function e(t,n){var r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yy(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,D_(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,P_(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),vS.apply(this,arguments)}function yS(e){return e.mu||(e.mu=function(e,t,n){var r=yy(e);return r.tu(),new E_(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:q_.bind(null,e),Jr:G_.bind(null,e),Go:H_.bind(null,e)}),e.fu.push(function(){var t=kt(mt().mark((function t(n){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),V_(e)?j_(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:z_(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function mS(e){return e.gu||(e.gu=function(e,t,n){var r=yy(e);return r.tu(),new T_(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:iS.bind(null,e),Jr:lS.bind(null,e),Yo:oS.bind(null,e),Jo:sS.bind(null,e)}),e.fu.push(function(){var t=kt(mt().mark((function t(n){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,X_(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(ly("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var gS=function(){function e(t,n,r,i,a){mn(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ky,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return kn(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gy(my.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function kS(e,t){if(fy("AsyncQueue","".concat(t,": ").concat(e)),im(e))return new gy(my.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var bS=function(){function e(t){mn(this,e),this.comparator=t?function(e,n){return t(e,n)||jy.comparator(e.key,n.key)}:function(e,t){return jy.comparator(e.key,t.key)},this.keyedMap=Ak(),this.sortedSet=new vm(this.comparator)}return kn(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),wS=function(){function e(){mn(this,e),this.yu=new vm(jy.comparator)}return kn(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):py():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),xS=function(){function e(t,n,r,i,a,o,u,s){mn(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return kn(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,bS.emptySet(n),a,r,i,!0,!1)}}]),e}(),_S=kn((function e(){mn(this,e),this.Iu=void 0,this.listeners=[]})),SS=kn((function e(){mn(this,e),this.queries=new Ek((function(e){return Fg(e)}),Mg),this.onlineState="Unknown",this.Tu=new Set}));function IS(e,t){return ES.apply(this,arguments)}function ES(){return ES=kt(mt().mark((function e(t,n){var r,i,a,o,u;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yy(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new _S),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=kS(e.t0,"Initialization of query '".concat(Ug(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&DS(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),ES.apply(this,arguments)}function TS(e,t){return CS.apply(this,arguments)}function CS(){return CS=kt(mt().mark((function e(t,n){var r,i,a,o,u;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yy(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),CS.apply(this,arguments)}function NS(e,t){var n,r=yy(e),i=!1,a=bn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=bn(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&DS(r)}function AS(e,t,n){var r=yy(e),i=r.queries.get(t);if(i){var a,o=bn(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function DS(e){e.Tu.forEach((function(e){e.next()}))}var OS=function(){function e(t,n,r){mn(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return kn(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=bn(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new xS(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=xS.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),PS=function(){function e(t,n){mn(this,e),this.payload=t,this.byteLength=n}return kn(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),RS=function(){function e(t){mn(this,e),this.wt=t}return kn(e,[{key:"Wi",value:function(e){return ab(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?fb(this.wt,e.document,!1):ig.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return tb(e)}}]),e}(),LS=function(){function e(t,n,r){mn(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=MS(t)}return kn(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=My.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new RS(this.wt),i=bn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=bn(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Fk()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=kt(mt().mark((function e(){var t,n,r,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n_(this.localStore,new RS(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=bn(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,i_(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function MS(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var FS=kn((function e(t){mn(this,e),this.key=t})),US=kn((function e(t){mn(this,e),this.key=t})),jS=function(){function e(t,n){mn(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Fk(),this.mutatedKeys=Fk(),this.Lu=Bg(t),this.Uu=new bS(this.Lu)}return kn(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new wS,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=jg(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Oi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return py()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new xS(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new wS,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=Fk(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new US(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new FS(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=Fk();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return xS.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),VS=kn((function e(t,n,r){mn(this,e),this.query=t,this.targetId=n,this.view=r})),BS=kn((function e(t){mn(this,e),this.key=t,this.Xu=!1})),zS=function(){function e(t,n,r,i,a,o){mn(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new Ek((function(e){return Fg(e)}),Mg),this.ec=new Map,this.nc=new Set,this.sc=new vm(jy.comparator),this.ic=new Map,this.rc=new xx,this.oc={},this.uc=new Map,this.cc=Xw.Rn(),this.onlineState="Unknown",this.ac=void 0}return kn(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function qS(e,t){return KS.apply(this,arguments)}function KS(){return KS=kt(mt().mark((function e(t,n){var r,i,a,o,u,s;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=MI(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,$x(r.localStore,Rg(n));case 8:return u=e.sent,r.isPrimaryClient&&L_(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,GS(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),KS.apply(this,arguments)}function GS(e,t,n,r){return WS.apply(this,arguments)}function WS(){return WS=kt(mt().mark((function e(t,n,r,i){var a,o,u,s,c,l;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=kt(mt().mark((function e(t,n,r,i){var a,o,u;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Oi,!e.t0){e.next=6;break}return e.next=5,Xx(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(hI(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Xx(t.localStore,n,!0);case 3:return a=e.sent,o=new jS(n,a.ji),u=o.Ku(a.documents),s=Bk.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),hI(t,r,c.zu),l=new VS(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),WS.apply(this,arguments)}function HS(e,t){return QS.apply(this,arguments)}function QS(){return QS=kt(mt().mark((function e(t,n){var r,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yy(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!Mg(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Jx(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),M_(r.remoteStore,i.targetId),lI(r,i.targetId)})).catch(Yy);case 9:e.next=14;break;case 11:return lI(r,i.targetId),e.next=14,Jx(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),QS.apply(this,arguments)}function $S(e,t,n){return JS.apply(this,arguments)}function JS(){return JS=kt(mt().mark((function e(t,n,r){var i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=FI(t),e.prev=1,e.next=4,function(e,t){var n,r,i=yy(e),a=Py.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Fk());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Ck(),s=Fk();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=bn(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=hk(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new vk(c.key,l,rg(l.value.mapValue),ok.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Dk(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new vm(Ay)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,vI(i,a.changes);case 9:return e.next=11,X_(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=kS(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),JS.apply(this,arguments)}function YS(e,t){return XS.apply(this,arguments)}function XS(){return XS=kt(mt().mark((function e(t,n){var r,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yy(t),e.prev=1,e.next=4,Wx(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(vy(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?vy(n.Xu):e.removedDocuments.size>0&&(vy(n.Xu),n.Xu=!1))})),e.next=8,vI(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Yy(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),XS.apply(this,arguments)}function ZS(e,t,n){var r=yy(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=yy(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=bn(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&DS(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function eI(e,t,n){return tI.apply(this,arguments)}function tI(){return tI=kt(mt().mark((function e(t,n,r){var i,a,o,u,s,c;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=yy(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new vm(jy.comparator)).insert(o,ig.newNoDocument(o,Ry.min())),s=Fk().add(o),c=new Vk(Ry.min(),new Map,new gm(Ay),u,s),e.next=9,YS(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),pI(i),e.next=16;break;case 14:return e.next=16,Jx(i.localStore,n,!1).then((function(){return lI(i,n,r)})).catch(Yy);case 16:case"end":return e.stop()}}),e)}))),tI.apply(this,arguments)}function nI(e,t){return rI.apply(this,arguments)}function rI(){return rI=kt(mt().mark((function e(t,n){var r,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yy(t),i=n.batch.batchId,e.prev=1,e.next=4,Kx(r.localStore,n);case 4:return a=e.sent,cI(r,i,null),sI(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,vI(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Yy(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),rI.apply(this,arguments)}function iI(e,t,n){return aI.apply(this,arguments)}function aI(){return aI=kt(mt().mark((function e(t,n,r){var i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yy(t),e.prev=1,e.next=4,function(e,t){var n=yy(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return vy(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,cI(i,n,r),sI(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,vI(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Yy(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),aI.apply(this,arguments)}function oI(e,t){return uI.apply(this,arguments)}function uI(){return uI=kt(mt().mark((function e(t,n){var r,i,a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B_((r=yy(t)).remoteStore)||ly("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=yy(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=kS(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),uI.apply(this,arguments)}function sI(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function cI(e,t,n){var r=yy(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function lI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=bn(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||fI(e,t)}))}function fI(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(M_(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),pI(e))}function hI(e,t,n){var r,i=bn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof FS?(e.rc.addReference(a.key,t),dI(e,a)):a instanceof US?(ly("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||fI(e,a.key)):py()}}catch(o){i.e(o)}finally{i.f()}}function dI(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(ly("SyncEngine","New document in limbo: "+n),e.nc.add(r),pI(e))}function pI(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new jy(My.fromString(t)),r=e.cc.next();e.ic.set(r,new BS(n)),e.sc=e.sc.insert(n,r),L_(e.remoteStore,new aw(Rg(Ng(n.path)),r,2,fm.ot))}}function vI(e,t,n){return yI.apply(this,arguments)}function yI(){return yI=kt(mt().mark((function e(t,n,r){var i,a,o,u;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=yy(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Ux.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=kt(mt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yy(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Zy.forEach(n,(function(t){return Zy.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Zy.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),im(e.t0)){e.next=10;break}throw e.t0;case 10:ly("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=bn(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),yI.apply(this,arguments)}function mI(e,t){return gI.apply(this,arguments)}function gI(){return gI=kt(mt().mark((function e(t,n){var r,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=yy(t)).currentUser.isEqual(n)){e.next=11;break}return ly("SyncEngine","User change. New user:",n.toKey()),e.next=5,zx(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new gy(my.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,vI(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),gI.apply(this,arguments)}function kI(e,t){var n=yy(e),r=n.ic.get(t);if(r&&r.Xu)return Fk().add(r.key);var i=Fk(),a=n.ec.get(t);if(!a)return i;var o,u=bn(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function bI(e,t){return wI.apply(this,arguments)}function wI(){return wI=kt(mt().mark((function e(t,n){var r,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yy(t),e.next=3,Xx(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&hI(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),wI.apply(this,arguments)}function xI(e,t){return _I.apply(this,arguments)}function _I(){return _I=kt(mt().mark((function e(t,n){var r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yy(t),e.abrupt("return",e_(r.localStore,n).then((function(e){return vI(r,e)})));case 2:case"end":return e.stop()}}),e)}))),_I.apply(this,arguments)}function SI(e,t,n,r){return II.apply(this,arguments)}function II(){return II=kt(mt().mark((function e(t,n,r,i){var a,o;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=yy(t),e.next=3,function(e,t){var n=yy(e),r=yy(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Zy.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,X_(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(cI(a,n,i||null),sI(a,n),function(e,t){yy(yy(e).mutationQueue).In(t)}(a.localStore,n)):py();case 11:return e.next=13,vI(a,o);case 13:e.next=16;break;case 15:ly("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),II.apply(this,arguments)}function EI(e,t){return TI.apply(this,arguments)}function TI(){return TI=kt(mt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(MI(r=yy(t)),FI(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,CI(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,pS(r.remoteStore,!0);case 9:o=bn(a);try{for(o.s();!(u=o.n()).done;)s=u.value,L_(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return lI(r,t),Jx(r.localStore,t,!0)})),M_(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,CI(r,c);case 21:return function(e){var t=yy(e);t.ic.forEach((function(e,n){M_(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new vm(jy.comparator)}(r),r.ac=!1,e.next=25,pS(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),TI.apply(this,arguments)}function CI(e,t,n){return NI.apply(this,arguments)}function NI(){return NI=kt(mt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=yy(t),a=[],o=[],u=bn(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ec.get(c))||0===f.length){e.next=34;break}return e.next=11,$x(i.localStore,Rg(f[0]));case 11:l=e.sent,h=bn(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,bI(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Zx(i.localStore,c);case 36:return m=e.sent,e.next=39,$x(i.localStore,m);case 39:return l=e.sent,e.next=42,GS(i,AI(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),NI.apply(this,arguments)}function AI(e){return Cg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function DI(e){var t=yy(e);return yy(yy(t.localStore).persistence).Ri()}function OI(e,t,n,r){return PI.apply(this,arguments)}function PI(){return PI=kt(mt().mark((function e(t,n,r,i){var a,o,u,s;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=yy(t)).ac){e.next=3;break}return e.abrupt("return",void ly("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,e_(a.localStore,Vg(o[0]));case 10:return u=e.sent,s=Vk.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,vI(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Jx(a.localStore,n,!0);case 17:return lI(a,n,i),e.abrupt("break",20);case 19:py();case 20:case"end":return e.stop()}}),e)}))),PI.apply(this,arguments)}function RI(e,t,n){return LI.apply(this,arguments)}function LI(){return LI=kt(mt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=MI(t)).ac){e.next=45;break}a=bn(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return ly("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Zx(i.localStore,u);case 12:return s=e.sent,e.next=15,$x(i.localStore,s);case 15:return c=e.sent,e.next=18,GS(i,AI(s),c.targetId,!1);case 18:L_(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=bn(r),e.prev=30,h=mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,Jx(i.localStore,t,!1).then((function(){M_(i.remoteStore,t),lI(i,t)})).catch(Yy);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),LI.apply(this,arguments)}function MI(e){var t=yy(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=YS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=kI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=eI.bind(null,t),t.Zu.Go=NS.bind(null,t.eventManager),t.Zu.lc=AS.bind(null,t.eventManager),t}function FI(e){var t=yy(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=nI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=iI.bind(null,t),t}function UI(e,t,n){var r=yy(e);(function(){var e=kt(mt().mark((function e(t,n,r){var i,a,o,u,s;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=yy(e),r=tb(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(MS(i)),a=new LS(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,vI(t,s.Mu,void 0);case 31:return e.next=33,function(e,t){var n=yy(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(hy("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var jI=function(){function e(){mn(this,e),this.synchronizeTabs=!1}return kn(e,[{key:"initialize",value:function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=__(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return Bx(this.persistence,new jx,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new Cx(Ax.Ms,this.wt)}},{key:"dc",value:function(e){return new v_}},{key:"terminate",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),VI=function(e){_n(n,e);var t=Tn(n);function n(e,r,i){var a;return mn(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return kn(n,[{key:"initialize",value:function(){var e=kt(mt().mark((function e(t){var r=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Di(Sn(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,FI(this.yc.syncEngine);case 6:return e.next=8,X_(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return Bx(this.persistence,new jx,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new ax(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new lm(t,this.persistence);return new cm(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=Fx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Kw.withCacheSize(this.cacheSizeBytes):Kw.DEFAULT;return new Rx(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,w_(),x_(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new v_}}]),n}(jI),BI=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return kn(n,[{key:"initialize",value:function(){var e=kt(mt().mark((function e(t){var r,i=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Di(Sn(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof p_,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:SI.bind(null,r),Or:OI.bind(null,r),Mr:RI.bind(null,r),Ri:DI.bind(null,r),Nr:xI.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,EI(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=w_();if(!p_.V(t))throw new gy(my.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Fx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new p_(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(VI),zI=function(){function e(){mn(this,e)}return kn(e,[{key:"initialize",value:function(){var e=kt(mt().mark((function e(t,n){var r=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ZS(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=mI.bind(null,this.syncEngine),e.next=12,pS(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new SS}},{key:"createDatastore",value:function(e){var t,n=__(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new b_(t));return function(e,t,n,r){return new C_(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ZS(o.syncEngine,e,0)},a=m_.V()?new m_:new y_,new A_(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new zS(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=yy(t),ly("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,P_(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function qI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return kt(mt().mark((function r(){var i;return mt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var KI=function(){function e(t){mn(this,e),this.observer=t,this.muted=!1}return kn(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),GI=function(){function e(t,n){var r=this;mn(this,e),this.Ec=t,this.wt=n,this.metadata=new ky,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return kn(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=kt(mt().mark((function e(){var t,n,r,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new PS(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=kt(mt().mark((function e(){var t,n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=kt(mt().mark((function e(){var t,n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),WI=function(){function e(t){mn(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return kn(e,[{key:"lookup",value:function(){var e=kt(mt().mark((function e(t){var n,r=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new gy(my.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=kt(mt().mark((function e(t,n){var r,i,a,o,u,s;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yy(t),i=sb(r.wt)+"/documents",a={documents:n.map((function(e){return ib(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=hb(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());vy(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new wk(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=kt(mt().mark((function e(){var t,n=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=jy.fromPath(t);n.mutations.push(new xk(r,n.precondition(r)))})),e.next=7,function(){var e=kt(mt().mark((function e(t,n){var r,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yy(t),i=sb(r.wt)+"/documents",a={writes:n.map((function(e){return db(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw py();t=Ry.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new gy(my.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ok.updateTime(t):ok.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ry.min()))throw new gy(my.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ok.updateTime(t)}return ok.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),HI=function(){function e(t,n,r,i,a){mn(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new S_(this.asyncQueue,"transaction_retry")}return kn(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(kt(mt().mark((function t(){var n,r;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new WI(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!Om(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Sk(t)}return!1}}]),e}(),QI=function(){function e(t,n,r,i){var a=this;mn(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=oy.UNAUTHENTICATED,this.clientId=Ny.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ly("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ly("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return kn(e,[{key:"getConfiguration",value:function(){var e=kt(mt().mark((function e(){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new gy(my.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ky;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(kt(mt().mark((function n(){var r;return mt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=kS(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function $I(e,t){return JI.apply(this,arguments)}function JI(){return JI=kt(mt().mark((function e(t,n){var r,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ly("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,zx(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),JI.apply(this,arguments)}function YI(e,t){return XI.apply(this,arguments)}function XI(){return XI=kt(mt().mark((function e(t,n){var r,i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,ZI(t);case 3:return r=e.sent,ly("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return hS(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return hS(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),XI.apply(this,arguments)}function ZI(e){return eE.apply(this,arguments)}function eE(){return eE=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ly("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,$I(t,new jI);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),eE.apply(this,arguments)}function tE(e){return nE.apply(this,arguments)}function nE(){return nE=kt(mt().mark((function e(t){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ly("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,YI(t,new zI);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),nE.apply(this,arguments)}function rE(e){return ZI(e).then((function(e){return e.persistence}))}function iE(e){return ZI(e).then((function(e){return e.localStore}))}function aE(e){return tE(e).then((function(e){return e.remoteStore}))}function oE(e){return tE(e).then((function(e){return e.syncEngine}))}function uE(e){return sE.apply(this,arguments)}function sE(){return sE=kt(mt().mark((function e(t){var n,r;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=qS.bind(null,n.syncEngine),r.onUnlisten=HS.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),sE.apply(this,arguments)}function cE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ky;return e.asyncQueue.enqueueAndForget(kt(mt().mark((function i(){return mt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new KI({next:function(a){t.enqueueAndForget((function(){return TS(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new gy(my.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new gy(my.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new OS(Ng(n.path),a,{includeMetadataChanges:!0,Du:!0});return IS(e,o)},i.next=3,uE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function lE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ky;return e.asyncQueue.enqueueAndForget(kt(mt().mark((function i(){return mt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new KI({next:function(n){t.enqueueAndForget((function(){return TS(e,o)})),n.fromCache&&"server"===r.source?i.reject(new gy(my.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new OS(n,a,{includeMetadataChanges:!0,Du:!0});return IS(e,o)},i.next=3,uE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var fE=new Map;function hE(e,t,n){if(!n)throw new gy(my.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function dE(e,t,n,r){if(!0===t&&!0===r)throw new gy(my.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function pE(e){if(!jy.isDocumentKey(e))throw new gy(my.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function vE(e){if(jy.isDocumentKey(e))throw new gy(my.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function yE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":py()}function mE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new gy(my.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=yE(e);throw new gy(my.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function gE(e,t){if(t<=0)throw new gy(my.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var kE=function(){function e(t){var n;if(mn(this,e),void 0===t.host){if(void 0!==t.ssl)throw new gy(my.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new gy(my.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,dE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return kn(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),bE=function(){function e(t,n,r){mn(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kE({}),this._settingsFrozen=!1,t instanceof Dm?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new gy(my.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dm(e.options.projectId)}(t))}return kn(e,[{key:"app",get:function(){if(!this._app)throw new gy(my.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new gy(my.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new wy;switch(e.type){case"gapi":var t=e.client;return vy(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Iy(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new gy(my.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=fE.get(e);t&&(ly("ComponentProvider","Removing Datastore"),fE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function wE(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=mE(e,bE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&hy("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=oy.MOCK_USER;else{o=Mn(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new gy(my.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new oy(s)}e._authCredentials=new xy(new by(o,u))}}var xE=function(){function e(t,n,r){mn(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return kn(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new SE(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),_E=function(){function e(t,n,r){mn(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return kn(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),SE=function(e){_n(n,e);var t=Tn(n);function n(e,r,i){var a;return mn(this,n),(a=t.call(this,e,r,Ng(i)))._path=i,a.type="collection",a}return kn(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new xE(this.firestore,null,new jy(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(_E);function IE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=rr(e),hE("collection","path",t),e instanceof bE){var a=My.fromString.apply(My,[t].concat(r));return vE(a),new SE(e,null,a)}if(!(e instanceof xE||e instanceof SE))throw new gy(my.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(My.fromString.apply(My,[t].concat(r)));return vE(o),new SE(e.firestore,null,o)}function EE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=rr(e),1===arguments.length&&(t=Ny.I()),hE("doc","path",t),e instanceof bE){var a=My.fromString.apply(My,[t].concat(r));return pE(a),new xE(e,null,new jy(a))}if(!(e instanceof xE||e instanceof SE))throw new gy(my.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(My.fromString.apply(My,[t].concat(r)));return pE(o),new xE(e.firestore,e instanceof SE?e.converter:null,new jy(o))}function TE(e,t){return e=rr(e),t=rr(t),(e instanceof xE||e instanceof SE)&&(t instanceof xE||t instanceof SE)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function CE(e,t){return e=rr(e),t=rr(t),e instanceof _E&&t instanceof _E&&e.firestore===t.firestore&&Mg(e._query,t._query)&&e.converter===t.converter}var NE=function(){function e(){var t=this;mn(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new S_(this,"async_queue_retry"),this.Kc=function(){var e=x_();e&&ly("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=x_();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return kn(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=x_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new ky;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=kt(mt().mark((function e(){var t=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),im(e.t0)){e.next=12;break}throw e.t0;case 12:ly("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw fy("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=gS.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&py()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=kt(mt().mark((function e(){var t;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=bn(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=bn(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function AE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=bn(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var DE=function(){function e(){mn(this,e),this._progressObserver={},this._taskCompletionResolver=new ky,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return kn(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),OE=function(e){_n(n,e);var t=Tn(n);function n(e,r,i){var a;return mn(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new NE,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return kn(n,[{key:"_terminate",value:function(){return this._firestoreClient||RE(this),this._firestoreClient.terminate()}}]),n}(bE);function PE(e){return e._firestoreClient||RE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function RE(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Am(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new QI(e._authCredentials,e._appCheckCredentials,e._queue,r)}function LE(e,t,n){var r=new ky;return e.asyncQueue.enqueue(kt(mt().mark((function i(){return mt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,$I(e,n);case 3:return i.next=5,YI(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===my.FAILED_PRECONDITION||e.code===my.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function ME(e){return function(e){return e.asyncQueue.enqueue(kt(mt().mark((function t(){var n,r;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rE(e);case 2:return n=t.sent,t.next=5,aE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=yy(e);return t.lu.delete(0),D_(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(PE(e=mE(e,OE)))}function FE(e){return function(e){return e.asyncQueue.enqueue(kt(mt().mark((function t(){var n,r;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rE(e);case 2:return n=t.sent,t.next=5,aE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=yy(t)).lu.add(0),e.next=4,P_(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(PE(e=mE(e,OE)))}function UE(e,t){var n=PE(e=mE(e,OE)),r=new DE;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new GI(e,t)}(function(e,t){if(e instanceof Uint8Array)return qI(e,t);if(e instanceof ArrayBuffer)return qI(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,__(t));e.asyncQueue.enqueueAndForget(kt(mt().mark((function t(){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=UI,t.next=3,oE(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function jE(e,t){return function(e,t){return e.asyncQueue.enqueue(kt(mt().mark((function n(){return mt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=yy(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,iE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(PE(e=mE(e,OE)),t).then((function(t){return t?new _E(e,null,t.query):null}))}function VE(e){if(e._initialized||e._terminated)throw new gy(my.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var BE=function(){function e(){mn(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new gy(my.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Uy(n)}return kn(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var zE=function(){function e(t){mn(this,e),this._byteString=t}return kn(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(xm.fromBase64String(t))}catch(t){throw new gy(my.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(xm.fromUint8Array(t))}}]),e}(),qE=kn((function e(t){mn(this,e),this._methodName=t})),KE=function(){function e(t,n){if(mn(this,e),!isFinite(t)||t<-90||t>90)throw new gy(my.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new gy(my.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return kn(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ay(this._lat,e._lat)||Ay(this._long,e._long)}}]),e}(),GE=/^__.*__$/,WE=function(){function e(t,n,r){mn(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return kn(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new vk(e,this.data,this.fieldMask,t,this.fieldTransforms):new pk(e,this.data,t,this.fieldTransforms)}}]),e}(),HE=function(){function e(t,n,r){mn(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return kn(e,[{key:"toMutation",value:function(e,t){return new vk(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function QE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw py()}}var $E=function(){function e(t,n,r,i,a,o){mn(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return kn(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return vT(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(QE(this.Zc)&&GE.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),JE=function(){function e(t,n,r){mn(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||__(t)}return kn(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new $E({Zc:e,methodName:t,ca:n,path:Uy.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function YE(e){var t=e._freezeSettings(),n=__(e._databaseId);return new JE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function XE(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);fT("Data must be an object, but it was:",o,r);var u,s,c=cT(r,o);if(a.merge)u=new wm(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=bn(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=hT(t,d,n);if(!o.contains(p))throw new gy(my.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));yT(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new wm(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new WE(new ng(c),u,s)}var ZE=function(e){_n(n,e);var t=Tn(n);function n(){return mn(this,n),t.apply(this,arguments)}return kn(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(qE);function eT(e,t,n){return new $E({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var tT=function(e){_n(n,e);var t=Tn(n);function n(){return mn(this,n),t.apply(this,arguments)}return kn(n,[{key:"_toFieldTransform",value:function(e){return new ik(e.path,new Jg)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(qE),nT=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this,e)).ha=r,i}return kn(n,[{key:"_toFieldTransform",value:function(e){var t=eT(this,e,!0),n=this.ha.map((function(e){return sT(e,t)})),r=new Yg(n);return new ik(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(qE),rT=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this,e)).ha=r,i}return kn(n,[{key:"_toFieldTransform",value:function(e){var t=eT(this,e,!0),n=this.ha.map((function(e){return sT(e,t)})),r=new Zg(n);return new ik(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(qE),iT=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this,e)).la=r,i}return kn(n,[{key:"_toFieldTransform",value:function(e){var t=new tk(e.wt,Gg(e.wt,this.la));return new ik(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(qE);function aT(e,t,n,r){var i=e.aa(1,t,n);fT("Data must be an object, but it was:",i,r);var a=[],o=ng.empty();dm(r,(function(e,r){var u=pT(t,e,n);r=rr(r);var s=i.ia(u);if(r instanceof ZE)a.push(u);else{var c=sT(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new wm(a);return new HE(o,u,i.fieldTransforms)}function oT(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[hT(t,r,n)],s=[i];if(a.length%2!=0)throw new gy(my.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(hT(t,a[c])),s.push(a[c+1]);for(var l=[],f=ng.empty(),h=u.length-1;h>=0;--h)if(!yT(l,u[h])){var d=u[h],p=s[h];p=rr(p);var v=o.ia(d);if(p instanceof ZE)l.push(d);else{var y=sT(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new wm(l);return new HE(f,m,o.fieldTransforms)}function uT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return sT(n,e.aa(r?4:3,t))}function sT(e,t){if(lT(e=rr(e)))return fT("Unsupported field value:",t,e),cT(e,t);if(e instanceof qE)return function(e,t){if(!QE(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=bn(e);try{for(a.s();!(n=a.n()).done;){var o=sT(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=rr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Gg(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Py.fromDate(e);return{timestampValue:Xk(t.wt,n)}}if(e instanceof Py){var r=new Py(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xk(t.wt,r)}}if(e instanceof KE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof zE)return{bytesValue:Zk(t.wt,e._byteString)};if(e instanceof xE){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:nb(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(yE(e)))}(e,t)}function cT(e,t){var n={};return pm(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):dm(e,(function(e,r){var i=sT(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function lT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Py||e instanceof KE||e instanceof zE||e instanceof xE||e instanceof qE)}function fT(e,t,n){if(!lT(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=yE(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function hT(e,t,n){if((t=rr(t))instanceof BE)return t._internalPath;if("string"==typeof t)return pT(e,t);throw vT("Field path arguments must be of type string or ",e,!1,void 0,n)}var dT=new RegExp("[~\\*/\\[\\]]");function pT(e,t,n){if(t.search(dT)>=0)throw vT("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Cn(BE,ar(t.split(".")))._internalPath}catch(R){throw vT("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function vT(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new gy(my.INVALID_ARGUMENT,u+e+s)}function yT(e,t){return e.some((function(e){return e.isEqual(t)}))}var mT=function(){function e(t,n,r,i,a){mn(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return kn(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new xE(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new gT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(kT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),gT=function(e){_n(n,e);var t=Tn(n);function n(){return mn(this,n),t.apply(this,arguments)}return kn(n,[{key:"data",value:function(){return Di(Sn(n.prototype),"data",this).call(this)}}]),n}(mT);function kT(e,t){return"string"==typeof t?pT(e,t):t instanceof BE?t._internalPath:t._delegate._internalPath}var bT=function(){function e(t,n){mn(this,e),this.hasPendingWrites=t,this.fromCache=n}return kn(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),wT=function(e){_n(n,e);var t=Tn(n);function n(e,r,i,a,o,u){var s;return mn(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return kn(n,[{key:"exists",value:function(){return Di(Sn(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new xT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(kT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(mT),xT=function(e){_n(n,e);var t=Tn(n);function n(){return mn(this,n),t.apply(this,arguments)}return kn(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Di(Sn(n.prototype),"data",this).call(this,e)}}]),n}(wT),_T=function(){function e(t,n,r,i){mn(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new bT(i.hasPendingWrites,i.fromCache),this.query=r}return kn(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new xT(n._firestore,n._userDataWriter,r.key,r,new bT(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new gy(my.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new xT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new bT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new xT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new bT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ST(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function ST(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return py()}}function IT(e,t){return e instanceof wT&&t instanceof wT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof _T&&t instanceof _T&&e._firestore===t._firestore&&CE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function ET(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new gy(my.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var TT=kn((function e(){mn(this,e)}));function CT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var NT=function(e){_n(n,e);var t=Tn(n);function n(e,r,i){var a;return mn(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return kn(n,[{key:"_apply",value:function(e){var t=YE(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new gy(my.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){VT(o,a);var s,c=[],l=bn(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(jT(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=jT(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||VT(o,a),u=uT(n,"where",o,"in"===a||"not-in"===a);var h=dg.create(i,a,u);return function(e,t){if(t.ht()){var n=Dg(e);if(null!==n&&!n.isEqual(t.field))throw new gy(my.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Ag(e);null!==r&&BT(e,t.field,r)}var i=function(e,t){var n,r=bn(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new gy(my.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new gy(my.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new _E(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Tg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(TT);var AT=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return kn(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new gy(my.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new gy(my.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new _g(t,n);return function(e,t){if(null===Ag(e)){var n=Dg(e);null!==n&&BT(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new _E(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Tg(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(TT);var DT=function(e){_n(n,e);var t=Tn(n);function n(e,r,i){var a;return mn(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return kn(n,[{key:"_apply",value:function(e){return new _E(e.firestore,e.converter,Lg(e._query,this.ma,this.ga))}}]),n}(TT);var OT=function(e){_n(n,e);var t=Tn(n);function n(e,r,i){var a;return mn(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return kn(n,[{key:"_apply",value:function(e){var t=UT(e,this.type,this.ya,this.pa);return new _E(e.firestore,e.converter,function(e,t){return new Tg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(TT);function PT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new OT("startAt",t,!0)}function RT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new OT("startAfter",t,!1)}var LT=function(e){_n(n,e);var t=Tn(n);function n(e,r,i){var a;return mn(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return kn(n,[{key:"_apply",value:function(e){var t=UT(e,this.type,this.ya,this.pa);return new _E(e.firestore,e.converter,function(e,t){return new Tg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(TT);function MT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new LT("endBefore",t,!1)}function FT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new LT("endAt",t,!0)}function UT(e,t,n,r){if(n[0]=rr(n[0]),n[0]instanceof mT)return function(e,t,n,r,i){if(!r)throw new gy(my.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=bn(Pg(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Km(t,r.key));else{var c=r.data.field(s.field);if(Tm(c))throw new gy(my.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new gy(my.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new xg(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=YE(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new gy(my.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new gy(my.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Og(e)&&-1!==c.indexOf("/"))throw new gy(my.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(My.fromString(c));if(!jy.isDocumentKey(l))throw new gy(my.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new jy(l);u.push(Km(t,f))}else{var h=uT(n,r,c);u.push(h)}}return new xg(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function jT(e,t,n){if("string"==typeof(n=rr(n))){if(""===n)throw new gy(my.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Og(t)&&-1!==n.indexOf("/"))throw new gy(my.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(My.fromString(n));if(!jy.isDocumentKey(r))throw new gy(my.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Km(e,new jy(r))}if(n instanceof xE)return Km(e,n._key);throw new gy(my.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(yE(n),"."))}function VT(e,t){if(!Array.isArray(e)||0===e.length)throw new gy(my.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new gy(my.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function BT(e,t,n){if(!n.isEqual(t))throw new gy(my.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var zT={maxAttempts:5},qT=function(){function e(){mn(this,e)}return kn(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Fm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Im(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Em(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw py()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return dm(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new KE(Im(e.latitude),Im(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Cm(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Nm(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Sm(e);return new Py(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=My.fromString(e);vy(Eb(n));var r=new Dm(n.get(1),n.get(3)),i=new jy(n.popFirst(5));return r.isEqual(t)||fy("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function KT(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var GT=function(e){_n(n,e);var t=Tn(n);function n(e){var r;return mn(this,n),(r=t.call(this)).firestore=e,r}return kn(n,[{key:"convertBytes",value:function(e){return new zE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new xE(this.firestore,null,t)}}]),n}(qT),WT=function(){function e(t,n){mn(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=YE(t)}return kn(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=HT(e,this._firestore),i=KT(r.converter,t,n),a=XE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,ok.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=HT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=rr(t))||t instanceof BE?oT(this._dataReader,"WriteBatch.update",i._key,t,n,o):aT(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,ok.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=HT(e,this._firestore);return this._mutations=this._mutations.concat(new wk(t._key,ok.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new gy(my.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function HT(e,t){if((e=rr(e)).firestore!==t)throw new gy(my.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var QT=function(e){_n(n,e);var t=Tn(n);function n(e){var r;return mn(this,n),(r=t.call(this)).firestore=e,r}return kn(n,[{key:"convertBytes",value:function(e){return new zE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new xE(this.firestore,null,t)}}]),n}(qT);function $T(e){e=mE(e,xE);var t=mE(e.firestore,OE),n=PE(t),r=new QT(t);return function(e,t){var n=new ky;return e.asyncQueue.enqueueAndForget(kt(mt().mark((function r(){return mt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=kt(mt().mark((function e(t,n,r){var i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=yy(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new gy(my.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=kS(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,iE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new wT(t,r,e._key,n,new bT(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function JT(e){e=mE(e,_E);var t=mE(e.firestore,OE),n=PE(t),r=new QT(t);return function(e,t){var n=new ky;return e.asyncQueue.enqueueAndForget(kt(mt().mark((function r(){return mt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=kt(mt().mark((function e(t,n,r){var i,a,o,u,s;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xx(t,n,!0);case 3:i=e.sent,a=new jS(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=kS(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,iE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new _T(t,r,e,n)}))}function YT(e,t,n){e=mE(e,xE);var r=mE(e.firestore,OE),i=KT(e.converter,t,n);return tC(r,[XE(YE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ok.none())])}function XT(e,t,n){e=mE(e,xE);for(var r=mE(e.firestore,OE),i=YE(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return tC(r,[("string"==typeof(t=rr(t))||t instanceof BE?oT(i,"updateDoc",e._key,t,n,o):aT(i,"updateDoc",e._key,t)).toMutation(e._key,ok.exists(!0))])}function ZT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=rr(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||AE(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(AE(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof xE)l=mE(e.firestore,OE),f=Ng(e._key.path),c={next:function(t){n[s]&&n[s](nC(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=mE(e,_E);l=mE(p.firestore,OE),f=p._query;var v=new QT(l);c={next:function(e){n[s]&&n[s](new _T(l,v,p,e))},error:n[s+1],complete:n[s+2]},ET(e._query)}return function(e,t,n,r){var i=new KI(r),a=new OS(t,i,n);return e.asyncQueue.enqueueAndForget(kt(mt().mark((function t(){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=IS,t.next=3,uE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(kt(mt().mark((function t(){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=TS,t.next=3,uE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(PE(l),f,h,c)}function eC(e,t){return function(e,t){var n=new KI(t);return e.asyncQueue.enqueueAndForget(kt(mt().mark((function t(){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){yy(e).Tu.add(t),t.next()},t.next=3,uE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(kt(mt().mark((function t(){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){yy(e).Tu.delete(t)},t.next=3,uE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(PE(e=mE(e,OE)),AE(t)?t:{next:t})}function tC(e,t){return function(e,t){var n=new ky;return e.asyncQueue.enqueueAndForget(kt(mt().mark((function r(){return mt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=$S,r.next=3,oE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(PE(e),t)}function nC(e,t,n){var r=n.docs.get(t._key),i=new QT(e);return new wT(e,i,t._key,r,new bT(n.hasPendingWrites,n.fromCache),t.converter)}var rC=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this,e,r))._firestore=e,i}return kn(n,[{key:"get",value:function(e){var t=this,r=HT(e,this._firestore),i=new QT(this._firestore);return Di(Sn(n.prototype),"get",this).call(this,e).then((function(e){return new wT(t._firestore,i,r._key,e._document,new bT(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){mn(this,e),this._firestore=t,this._transaction=n,this._dataReader=YE(t)}return kn(e,[{key:"get",value:function(e){var t=this,n=HT(e,this._firestore),r=new GT(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return py();var i=e[0];if(i.isFoundDocument())return new mT(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new mT(t._firestore,r,n._key,null,n.converter);throw py()}))}},{key:"set",value:function(e,t,n){var r=HT(e,this._firestore),i=KT(r.converter,t,n),a=XE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=HT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=rr(t))||t instanceof BE?oT(this._dataReader,"Transaction.update",i._key,t,n,o):aT(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=HT(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function iC(e,t,n){e=mE(e,OE);var r=Object.assign(Object.assign({},zT),n);return function(e){if(e.maxAttempts<1)throw new gy(my.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new ky;return e.asyncQueue.enqueueAndForget(kt(mt().mark((function i(){var a;return mt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return tE(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new HI(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(PE(e),(function(n){return t(new rC(e,n))}),r)}function aC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new nT("arrayUnion",t)}function oC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new rT("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){uy=e}(Zr),Wr(new or("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new OE(i,new _y(e.getProvider("auth-internal")),new Ty(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),ai(ay,"3.4.10",e),ai(ay,"3.4.10","esm2017")}();function uC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new gy("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function sC(){if("undefined"===typeof Uint8Array)throw new gy("unimplemented","Uint8Arrays are not available in this environment.")}function cC(){if("undefined"==typeof atob)throw new gy("unimplemented","Blobs are unavailable in Firestore in this environment.")}var lC=function(){function e(t){mn(this,e),this._delegate=t}return kn(e,[{key:"toBase64",value:function(){return cC(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return sC(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return cC(),new e(zE.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return sC(),new e(zE.fromUint8Array(t))}}]),e}();function fC(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=bn(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var hC=function(){function e(){mn(this,e)}return kn(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){VE(e=mE(e,OE));var n=PE(e),r=e._freezeSettings(),i=new zI;return LE(n,i,new VI(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){VE(e=mE(e,OE));var t=PE(e),n=e._freezeSettings(),r=new zI;return LE(t,r,new BI(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new gy(my.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new ky;return e._queue.enqueueAndForgetEvenWhileRestricted(kt(mt().mark((function n(){return mt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=kt(mt().mark((function e(t){var n;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tm.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,tm.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Fx(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),dC=function(){function e(t,n,r){var i=this;mn(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Dm||(this._appCompat=t)}return kn(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||hy("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};wE(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return ME(this._delegate)}},{key:"disableNetwork",value:function(){return FE(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&dE("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new ky;return e.asyncQueue.enqueueAndForget(kt(mt().mark((function n(){return mt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=oI,n.next=3,oE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(PE(e=mE(e,OE)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return eC(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new gy("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new TC(this,IE(this._delegate,e))}catch(t){throw kC(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new gC(this,EE(this._delegate,e))}catch(t){throw kC(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new SC(this,function(e,t){if(e=mE(e,bE),hE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new gy(my.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new _E(e,null,function(e){return new Tg(My.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw kC(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return iC(this._delegate,(function(n){return e(new vC(t,n))}))}},{key:"batch",value:function(){var e=this;return PE(this._delegate),new yC(new WT(this._delegate,(function(t){return tC(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return UE(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return jE(this._delegate,e).then((function(e){return e?new SC(t,e):null}))}}]),e}(),pC=function(e){_n(n,e);var t=Tn(n);function n(e){var r;return mn(this,n),(r=t.call(this)).firestore=e,r}return kn(n,[{key:"convertBytes",value:function(e){return new lC(new zE(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return gC.forKey(t,this.firestore,null)}}]),n}(qT);var vC=function(){function e(t,n){mn(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new pC(t)}return kn(e,[{key:"get",value:function(e){var t=this,n=CC(e);return this._delegate.get(n).then((function(e){return new xC(t._firestore,new wT(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=CC(e);return n?(uC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=CC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=CC(e);return this._delegate.delete(t),this}}]),e}(),yC=function(){function e(t){mn(this,e),this._delegate=t}return kn(e,[{key:"set",value:function(e,t,n){var r=CC(e);return n?(uC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=CC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=CC(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),mC=function(){function e(t,n,r){mn(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return kn(e,[{key:"fromFirestore",value:function(e,t){var n=new xT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _C(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new pC(t),n),i.set(n,a)),a}}]),e}();mC.INSTANCES=new WeakMap;var gC=function(){function e(t,n){mn(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new pC(t)}return kn(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new TC(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new TC(this.firestore,IE(this._delegate,e))}catch(t){throw kC(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=rr(e))instanceof xE&&TE(this._delegate,e)}},{key:"set",value:function(e,t){t=uC("DocumentReference.set",t);try{return t?YT(this._delegate,e,t):YT(this._delegate,e)}catch(n){throw kC(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?XT(this._delegate,e):XT.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw kC(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return tC(mE(e.firestore,OE),[new wk(e._key,ok.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=bC(n),a=wC(n,(function(t){return new xC(e.firestore,new wT(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return ZT(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?$T(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=mE(e,xE);var t=mE(e.firestore,OE);return cE(PE(t),e._key,{source:"server"}).then((function(n){return nC(t,e,n)}))}(this._delegate):function(e){e=mE(e,xE);var t=mE(e.firestore,OE);return cE(PE(t),e._key).then((function(n){return nC(t,e,n)}))}(this._delegate),t.then((function(e){return new xC(n.firestore,new wT(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(mC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new gy("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new xE(n._delegate,r,new jy(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new xE(n._delegate,r,t))}}]),e}();function kC(e,t,n){return e.message=e.message.replace(t,n),e}function bC(e){var t,n=bn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!fC(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function wC(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=fC(e[0])?e[0]:fC(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var xC=function(){function e(t,n){mn(this,e),this._firestore=t,this._delegate=n}return kn(e,[{key:"ref",get:function(){return new gC(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return IT(this._delegate,e._delegate)}}]),e}(),_C=function(e){_n(n,e);var t=Tn(n);function n(){return mn(this,n),t.apply(this,arguments)}return kn(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||py()}(void 0!==t),t}}]),n}(xC),SC=function(){function e(t,n){mn(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new pC(t)}return kn(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,CT(this._delegate,function(e,t,n){var r=t,i=kT("where",e);return new NT(i,r,n)}(t,n,r)))}catch(i){throw kC(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,CT(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=kT("orderBy",e);return new AT(n,t)}(t,n)))}catch(r){throw kC(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,CT(this._delegate,function(e){return gE("limit",e),new DT("limit",e,"F")}(t)))}catch(n){throw kC(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,CT(this._delegate,function(e){return gE("limitToLast",e),new DT("limitToLast",e,"L")}(t)))}catch(n){throw kC(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,CT(this._delegate,PT.apply(void 0,arguments)))}catch(t){throw kC(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,CT(this._delegate,RT.apply(void 0,arguments)))}catch(t){throw kC(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,CT(this._delegate,MT.apply(void 0,arguments)))}catch(t){throw kC(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,CT(this._delegate,FT.apply(void 0,arguments)))}catch(t){throw kC(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return CE(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?JT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=mE(e,_E);var t=mE(e.firestore,OE),n=PE(t),r=new QT(t);return lE(n,e._query,{source:"server"}).then((function(n){return new _T(t,r,e,n)}))}(this._delegate):function(e){e=mE(e,_E);var t=mE(e.firestore,OE),n=PE(t),r=new QT(t);return ET(e._query),lE(n,e._query).then((function(n){return new _T(t,r,e,n)}))}(this._delegate),t.then((function(e){return new EC(n.firestore,new _T(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=bC(n),a=wC(n,(function(t){return new EC(e.firestore,new _T(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return ZT(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(mC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),IC=function(){function e(t,n){mn(this,e),this._firestore=t,this._delegate=n}return kn(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new _C(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),EC=function(){function e(t,n){mn(this,e),this._firestore=t,this._delegate=n}return kn(e,[{key:"query",get:function(){return new SC(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new _C(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new IC(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new _C(n._firestore,r))}))}},{key:"isEqual",value:function(e){return IT(this._delegate,e._delegate)}}]),e}(),TC=function(e){_n(n,e);var t=Tn(n);function n(e,r){var i;return mn(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return kn(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new gC(this.firestore,e):null}},{key:"doc",value:function(e){try{return new gC(this.firestore,void 0===e?EE(this._delegate):EE(this._delegate,e))}catch(t){throw kC(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=mE(e.firestore,OE),r=EE(e),i=KT(e.converter,t);return tC(n,[XE(YE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ok.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new gC(t.firestore,e)}))}},{key:"isEqual",value:function(e){return TE(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(mC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(SC);function CC(e){return mE(e,xE)}var NC=function(){function e(){mn(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Cn(BE,n)}return kn(e,[{key:"isEqual",value:function(e){return(e=rr(e))instanceof BE&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Uy.keyField().canonicalString())}}]),e}(),AC=function(){function e(t){mn(this,e),this._delegate=t}return kn(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new tT("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new ZE("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=aC.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=oC.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new iT("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),DC={Firestore:dC,GeoPoint:KE,Timestamp:Py,Blob:lC,Transaction:vC,WriteBatch:yC,DocumentReference:gC,DocumentSnapshot:xC,Query:SC,QueryDocumentSnapshot:_C,QuerySnapshot:EC,CollectionReference:TC,FieldPath:NC,FieldValue:AC,setLogLevel:function(e){!function(e){sy.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new or("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},DC)))}(e,(function(e,t){return new dC(e,t,new hC)})),e.registerVersion("@firebase/firestore-compat","0.1.19")}(Ni);Ni.initializeApp({apiKey:"AIzaSyBdDJsFLqxpagwp5gsahlZTu9CWxKupVCA",authDomain:"netflix-clone-b01a7.firebaseapp.com",projectId:"netflix-clone-b01a7",storageBucket:"netflix-clone-b01a7.appspot.com",messagingSenderId:"803190464207",appId:"1:803190464207:web:68be1c4ec26964adb2e1ba"}).firestore();var OC=Ni.auth();var PC=function(){var e=(0,t.useRef)(null),n=(0,t.useRef)(null);return(0,Nt.jsx)("div",{className:"SignUpScreen",children:(0,Nt.jsxs)("form",{children:[(0,Nt.jsx)("h1",{children:"Sign In"}),(0,Nt.jsx)("input",{ref:e,type:"email",placeholder:"Email"}),(0,Nt.jsx)("input",{ref:n,type:"password",placeholder:"Password"}),(0,Nt.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),OC.signInWithEmailAndPassword(e.current.value,n.current.value).then((function(e){console.log(e)})).catch((function(e){alert(e.authUser)}))},children:"Sign In"}),(0,Nt.jsxs)("h4",{children:[" ",(0,Nt.jsx)("span",{className:"SignUpScreen_gray",children:"New to Netflix?"})," ",(0,Nt.jsx)("span",{className:"SignUpScreen_link",onClick:function(t){t.preventDefault(),OC.createUserWithEmailAndPassword(e.current.value,n.current.value).then((function(e){console.log(e)})).catch((function(e){alert(e.message)}))},children:"Sign up now"})]})]})})};var RC,LC=function(){var e=St((0,t.useState)(!1),2),n=e[0],r=e[1];return(0,Nt.jsxs)("div",{className:"LoginScreen",children:[(0,Nt.jsxs)("div",{className:"LoginScreen_background",children:[(0,Nt.jsx)("img",{className:"LoginScreen_logo",src:"https://assets.stickpng.com/images/580b57fcd9996e24bc43c529.png",alt:""}),(0,Nt.jsx)("button",{onClick:function(){return r(!0)},className:"LoginScreen_button",children:"Sign In"}),(0,Nt.jsx)("div",{className:"LoginScreen_gradient"})]}),(0,Nt.jsx)("div",{className:"LoginScreen_body",children:n?(0,Nt.jsx)(PC,{}):(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("h1",{children:"Unlimited files, TV programmes and more."}),(0,Nt.jsx)("h2",{children:"Watch anywhere. Cancel anytime."}),(0,Nt.jsx)("h3",{children:"Ready to watch? Enter your email to create or restart your membership."}),(0,Nt.jsx)("div",{className:"LoginScreen_input",children:(0,Nt.jsxs)("form",{children:[(0,Nt.jsx)("input",{type:"email",placeholder:"Email Address"}),(0,Nt.jsx)("button",{onClick:function(){return r(!0)},className:"LoginScreen_getStarted",children:"GET STARTED"})]})})]})})]})},MC=function(){return RC||(RC=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];vt=!0;var r=Date.now();return pt.then((function(e){return dt(e,t,r)}))}("pk_test_51LDOrbSGySChMEHWYTgQPECgOu6anyrcwTNm3UVJ5tJIGn5eDEOFODsFKnNJHsj4T3dDtyfEDtsfr0zGVoA4RL8r00xG1ZQV7R")),RC};var FC=function(){var e=St((0,t.useState)(!1),2),n=e[0],r=e[1],i=St((0,t.useState)(!1),2),a=i[0],o=i[1],u=St((0,t.useState)(!1),2),s=u[0],c=u[1],l=[{price:"price_1LDnnDSGySChMEHWFJs1v4qC",quantity:1},{price:"price_1LDnp2SGySChMEHWwQWBDLLJ",quantity:1},{price:"price_1LDnqlSGySChMEHWVvCg7Xvd",quantity:1}],f=function(e){return{lineItems:[l[e]],mode:"payment",successUrl:"".concat(window.location.origin,"/success"),cancelUrl:"".concat(window.location.origin,"/cancel")}},h=function(){var e=kt(mt().mark((function e(t){var n,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0===t?r(!0):1===t?o(!0):c(!0),console.log("redirectToCheckout"),e.next=4,MC();case 4:return n=e.sent,e.next=7,n.redirectToCheckout(f(t));case 7:i=e.sent,a=i.error,console.log("Stripe Checkout Error",a),0===t?r(!1):1===t?o(!1):c(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=v(ot);return(0,Nt.jsxs)("div",{className:"profileScreen",children:[(0,Nt.jsx)(dn,{}),(0,Nt.jsxs)("div",{className:"profileScreen_body",children:[(0,Nt.jsx)("h1",{children:"Edit Profile"}),(0,Nt.jsxs)("div",{className:"profileScreen_info",children:[(0,Nt.jsx)("img",{src:"https://i.pinimg.com/564x/0d/dc/ca/0ddccae723d85a703b798a5e682c23c1--horse-stuff-sleepover.jpg",alt:""}),(0,Nt.jsxs)("div",{className:"profileScreen_details",children:[(0,Nt.jsx)("h2",{children:d.email}),(0,Nt.jsxs)("div",{className:"profileScreen_plans",children:[(0,Nt.jsx)("h3",{children:"Plans"}),(0,Nt.jsxs)("div",{children:[(0,Nt.jsxs)("div",{className:"plans",children:[(0,Nt.jsx)("h4",{children:"Premium Plan"}),(0,Nt.jsx)("button",{onClick:function(){h(2)},disable:s,children:s?"Loading...":"Subscribe"})]}),(0,Nt.jsxs)("div",{className:"plans",children:[(0,Nt.jsx)("h4",{children:"Standard Plan"}),(0,Nt.jsx)("button",{onClick:function(){h(1)},disable:a,children:a?"Loading...":"Subscribe"})]}),(0,Nt.jsxs)("div",{className:"plans",children:[(0,Nt.jsx)("h4",{children:"Basic Plan"}),(0,Nt.jsx)("button",{onClick:function(){h(0)},disable:n,children:n?"Loading...":"Subscribe"})]})]}),(0,Nt.jsx)("button",{onClick:function(){return OC.signOut()},className:"profileScreen_signOut",children:"Sign Out"})]})]})]})]})]})};var UC=function(){var e=un();return(0,Nt.jsxs)("div",{className:"success",children:[(0,Nt.jsx)(dn,{}),(0,Nt.jsxs)("div",{className:"success-inner",children:[(0,Nt.jsx)("h2",{children:"Thank you"}),(0,Nt.jsx)("p",{children:"For Subscribing\ud83d\ude03"}),(0,Nt.jsx)("button",{onClick:function(){e("/")},children:" Go Home "})]})]})};var jC=function(){var e=un();return(0,Nt.jsxs)("div",{className:"cancel",children:[(0,Nt.jsx)(dn,{}),(0,Nt.jsxs)("div",{className:"cancel-inner",children:[(0,Nt.jsx)("h2",{children:"Payment Cancelled\u2639\ufe0f"}),(0,Nt.jsx)("button",{onClick:function(){e("/profile")},children:"Try Again"})]})]})};var VC=function(){var e=v(ot),n=S();return(0,t.useEffect)((function(){return OC.onAuthStateChanged((function(e){n(e?it({uid:e.uid,email:e.email}):at())}))}),[n]),(0,Nt.jsx)("div",{className:"app",children:(0,Nt.jsx)(yn,{children:e?(0,Nt.jsxs)(fn,{children:[(0,Nt.jsx)(cn,{exact:!0,path:"/",element:(0,Nt.jsx)(vn,{})}),(0,Nt.jsx)(cn,{path:"/profile",element:(0,Nt.jsx)(FC,{})}),(0,Nt.jsx)(cn,{path:"/success",element:(0,Nt.jsx)(UC,{})}),(0,Nt.jsx)(cn,{path:"/cancel",element:(0,Nt.jsx)(jC,{})})]}):(0,Nt.jsx)(LC,{})})})},BC=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},zC=document.getElementById("root");(0,r.s)(zC).render((0,Nt.jsx)(t.StrictMode,{children:(0,Nt.jsx)(k,{store:ut,children:(0,Nt.jsx)(VC,{})})})),BC()}()}();
//# sourceMappingURL=main.67711648.js.map